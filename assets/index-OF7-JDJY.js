import{a2 as lt,a as Xe,t as ut,Z as tt}from"./index-Gl-djqa7.js";var ct=function(j){var H={};function O(F){if(H[F])return H[F].exports;var R=H[F]={i:F,l:!1,exports:{}};return j[F].call(R.exports,R,R.exports,O),R.l=!0,R.exports}return O.m=j,O.c=H,O.d=function(F,R,A){O.o(F,R)||Object.defineProperty(F,R,{enumerable:!0,get:A})},O.r=function(F){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})},O.t=function(F,R){if(1&R&&(F=O(F)),8&R||4&R&&typeof F=="object"&&F&&F.__esModule)return F;var A=Object.create(null);if(O.r(A),Object.defineProperty(A,"default",{enumerable:!0,value:F}),2&R&&typeof F!="string")for(var c in F)O.d(A,c,(function(C){return F[C]}).bind(null,c));return A},O.n=function(F){var R=F&&F.__esModule?function(){return F.default}:function(){return F};return O.d(R,"a",R),R},O.o=function(F,R){return Object.prototype.hasOwnProperty.call(F,R)},O.p="",O(O.s=111)}([function(j,H){j.exports=Xe},function(j,H,O){(function(F){var R;R=function(){var A=function(f){var T=f.id,h=f.viewBox,p=f.content;this.id=T,this.viewBox=h,this.content=p};function c(f,T){return f(T={exports:{}},T.exports),T.exports}A.prototype.stringify=function(){return this.content},A.prototype.toString=function(){return this.stringify()},A.prototype.destroy=function(){var f=this;["id","viewBox","content"].forEach(function(T){return delete f[T]})};var C=c(function(f,T){f.exports=function(){function h(u){return u&&typeof u=="object"&&Object.prototype.toString.call(u)!=="[object RegExp]"&&Object.prototype.toString.call(u)!=="[object Date]"}function p(u,e){var n;return e&&e.clone===!0&&h(u)?E((n=u,Array.isArray(n)?[]:{}),u,e):u}function b(u,e,n){var t=u.slice();return e.forEach(function(s,g){t[g]===void 0?t[g]=p(s,n):h(s)?t[g]=E(u[g],s,n):u.indexOf(s)===-1&&t.push(p(s,n))}),t}function E(u,e,n){var t=Array.isArray(e),s=(n||{arrayMerge:b}).arrayMerge||b;return t?Array.isArray(u)?s(u,e,n):p(e,n):function(g,a,o){var d={};return h(g)&&Object.keys(g).forEach(function(r){d[r]=p(g[r],o)}),Object.keys(a).forEach(function(r){h(a[r])&&g[r]?d[r]=E(g[r],a[r],o):d[r]=p(a[r],o)}),d}(u,e,n)}return E.all=function(u,e){if(!Array.isArray(u)||u.length<2)throw new Error("first argument should be an array with at least two elements");return u.reduce(function(n,t){return E(n,t,e)})},E}()}),y=c(function(f,T){T.default={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}},f.exports=T.default}),v=y.svg,k=y.xlink,D={};D[v.name]=v.uri,D[k.name]=k.uri;var L=function(f,T){return f===void 0&&(f=""),"<svg "+function(h){return Object.keys(h).map(function(p){return p+'="'+h[p].toString().replace(/"/g,"&quot;")+'"'}).join(" ")}(C(D,T||{}))+">"+f+"</svg>"};return function(f){function T(){f.apply(this,arguments)}f&&(T.__proto__=f),T.prototype=Object.create(f&&f.prototype),T.prototype.constructor=T;var h={isMounted:{}};return h.isMounted.get=function(){return!!this.node},T.createFromExistingNode=function(p){return new T({id:p.getAttribute("id"),viewBox:p.getAttribute("viewBox"),content:p.outerHTML})},T.prototype.destroy=function(){this.isMounted&&this.unmount(),f.prototype.destroy.call(this)},T.prototype.mount=function(p){if(this.isMounted)return this.node;var b=typeof p=="string"?document.querySelector(p):p,E=this.render();return this.node=E,b.appendChild(E),E},T.prototype.render=function(){var p=this.stringify();return function(b){var E=!!document.importNode,u=new DOMParser().parseFromString(b,"image/svg+xml").documentElement;return E?document.importNode(u,!0):u}(L(p)).childNodes[0]},T.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(T.prototype,h),T}(A)},j.exports=R()}).call(this,O(48))},function(j,H,O){(function(F){var R;R=function(){function A(M,B){return M(B={exports:{}},B.exports),B.exports}var c=A(function(M,B){M.exports=function(){function G(q){return q&&typeof q=="object"&&Object.prototype.toString.call(q)!=="[object RegExp]"&&Object.prototype.toString.call(q)!=="[object Date]"}function K(q,Z){var ee;return Z&&Z.clone===!0&&G(q)?Y((ee=q,Array.isArray(ee)?[]:{}),q,Z):q}function z(q,Z,ee){var te=q.slice();return Z.forEach(function(ae,se){te[se]===void 0?te[se]=K(ae,ee):G(ae)?te[se]=Y(q[se],ae,ee):q.indexOf(ae)===-1&&te.push(K(ae,ee))}),te}function Y(q,Z,ee){var te=Array.isArray(Z),ae=(ee||{arrayMerge:z}).arrayMerge||z;return te?Array.isArray(q)?ae(q,Z,ee):K(Z,ee):function(se,pe,ve){var we={};return G(se)&&Object.keys(se).forEach(function(ue){we[ue]=K(se[ue],ve)}),Object.keys(pe).forEach(function(ue){G(pe[ue])&&se[ue]?we[ue]=Y(se[ue],pe[ue],ve):we[ue]=K(pe[ue],ve)}),we}(q,Z,ee)}return Y.all=function(q,Z){if(!Array.isArray(q)||q.length<2)throw new Error("first argument should be an array with at least two elements");return q.reduce(function(ee,te){return Y(ee,te,Z)})},Y}()}),C=A(function(M,B){B.default={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}},M.exports=B.default}),y=C.svg,v=C.xlink,k={};k[y.name]=y.uri,k[v.name]=v.uri;var D,L=function(M,B){return M===void 0&&(M=""),"<svg "+function(G){return Object.keys(G).map(function(K){return K+'="'+G[K].toString().replace(/"/g,"&quot;")+'"'}).join(" ")}(c(k,B||{}))+">"+M+"</svg>"},f=C.svg,T=C.xlink,h={attrs:(D={style:["position: absolute","width: 0","height: 0"].join("; "),"aria-hidden":"true"},D[f.name]=f.uri,D[T.name]=T.uri,D)},p=function(M){this.config=c(h,M||{}),this.symbols=[]};p.prototype.add=function(M){var B=this.symbols,G=this.find(M.id);return G?(B[B.indexOf(G)]=M,!1):(B.push(M),!0)},p.prototype.remove=function(M){var B=this.symbols,G=this.find(M);return!!G&&(B.splice(B.indexOf(G),1),G.destroy(),!0)},p.prototype.find=function(M){return this.symbols.filter(function(B){return B.id===M})[0]||null},p.prototype.has=function(M){return this.find(M)!==null},p.prototype.stringify=function(){var M=this.config.attrs,B=this.symbols.map(function(G){return G.stringify()}).join("");return L(B,M)},p.prototype.toString=function(){return this.stringify()},p.prototype.destroy=function(){this.symbols.forEach(function(M){return M.destroy()})};var b=function(M){var B=M.id,G=M.viewBox,K=M.content;this.id=B,this.viewBox=G,this.content=K};b.prototype.stringify=function(){return this.content},b.prototype.toString=function(){return this.stringify()},b.prototype.destroy=function(){var M=this;["id","viewBox","content"].forEach(function(B){return delete M[B]})};var E=function(M){var B=!!document.importNode,G=new DOMParser().parseFromString(M,"image/svg+xml").documentElement;return B?document.importNode(G,!0):G},u=function(M){function B(){M.apply(this,arguments)}M&&(B.__proto__=M),B.prototype=Object.create(M&&M.prototype),B.prototype.constructor=B;var G={isMounted:{}};return G.isMounted.get=function(){return!!this.node},B.createFromExistingNode=function(K){return new B({id:K.getAttribute("id"),viewBox:K.getAttribute("viewBox"),content:K.outerHTML})},B.prototype.destroy=function(){this.isMounted&&this.unmount(),M.prototype.destroy.call(this)},B.prototype.mount=function(K){if(this.isMounted)return this.node;var z=typeof K=="string"?document.querySelector(K):K,Y=this.render();return this.node=Y,z.appendChild(Y),Y},B.prototype.render=function(){var K=this.stringify();return E(L(K)).childNodes[0]},B.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(B.prototype,G),B}(b),e={autoConfigure:!0,mountTo:"body",syncUrlsWithBaseTag:!1,listenLocationChangeEvent:!0,locationChangeEvent:"locationChange",locationChangeAngularEmitter:!1,usagesToUpdate:"use[*|href]",moveGradientsOutsideSymbol:!1},n=function(M){return Array.prototype.slice.call(M,0)},t=function(){return/firefox/i.test(navigator.userAgent)},s=function(){return/msie/i.test(navigator.userAgent)||/trident/i.test(navigator.userAgent)},g=function(){return/edge/i.test(navigator.userAgent)},a=function(M){return(M||window.location.href).split("#")[0]},o=function(M){angular.module("ng").run(["$rootScope",function(B){B.$on("$locationChangeSuccess",function(G,K,z){var Y,q,Z;Y=M,q={oldUrl:z,newUrl:K},(Z=document.createEvent("CustomEvent")).initCustomEvent(Y,!1,!1,q),window.dispatchEvent(Z)})}])},d=function(M,B){return B===void 0&&(B="linearGradient, radialGradient, pattern, mask, clipPath"),n(M.querySelectorAll("symbol")).forEach(function(G){n(G.querySelectorAll(B)).forEach(function(K){G.parentNode.insertBefore(K,G)})}),M},r=C.xlink.uri,l=/[{}|\\\^\[\]`"<>]/g;function i(M){return M.replace(l,function(B){return"%"+B[0].charCodeAt(0).toString(16).toUpperCase()})}var m,S=["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke","style"],w=S.map(function(M){return"["+M+"]"}).join(","),x=function(M,B,G,K){var z=i(G),Y=i(K);(function(q,Z){return n(q).reduce(function(ee,te){if(!te.attributes)return ee;var ae=n(te.attributes),se=Z?ae.filter(Z):ae;return ee.concat(se)},[])})(M.querySelectorAll(w),function(q){var Z=q.localName,ee=q.value;return S.indexOf(Z)!==-1&&ee.indexOf("url("+z)!==-1}).forEach(function(q){return q.value=q.value.replace(new RegExp(z.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),Y)}),function(q,Z,ee){n(q).forEach(function(te){var ae=te.getAttribute("xlink:href");if(ae&&ae.indexOf(Z)===0){var se=ae.replace(Z,ee);te.setAttributeNS(r,"xlink:href",se)}})}(B,z,Y)},_="mount",I="symbol_mount",P=function(M){function B(K){var z=this;K===void 0&&(K={}),M.call(this,c(e,K));var Y,q=(Y=Y||Object.create(null),{on:function(ae,se){(Y[ae]||(Y[ae]=[])).push(se)},off:function(ae,se){Y[ae]&&Y[ae].splice(Y[ae].indexOf(se)>>>0,1)},emit:function(ae,se){(Y[ae]||[]).map(function(pe){pe(se)}),(Y["*"]||[]).map(function(pe){pe(ae,se)})}});this._emitter=q,this.node=null;var Z=this.config;if(Z.autoConfigure&&this._autoConfigure(K),Z.syncUrlsWithBaseTag){var ee=document.getElementsByTagName("base")[0].getAttribute("href");q.on(_,function(){return z.updateUrls("#",ee)})}var te=this._handleLocationChange.bind(this);this._handleLocationChange=te,Z.listenLocationChangeEvent&&window.addEventListener(Z.locationChangeEvent,te),Z.locationChangeAngularEmitter&&o(Z.locationChangeEvent),q.on(_,function(ae){Z.moveGradientsOutsideSymbol&&d(ae)}),q.on(I,function(ae){var se;Z.moveGradientsOutsideSymbol&&d(ae.parentNode),(s()||g())&&(se=[],n(ae.querySelectorAll("style")).forEach(function(pe){pe.textContent+="",se.push(pe)}))})}M&&(B.__proto__=M),B.prototype=Object.create(M&&M.prototype),B.prototype.constructor=B;var G={isMounted:{}};return G.isMounted.get=function(){return!!this.node},B.prototype._autoConfigure=function(K){var z=this.config;K.syncUrlsWithBaseTag===void 0&&(z.syncUrlsWithBaseTag=document.getElementsByTagName("base")[0]!==void 0),K.locationChangeAngularEmitter===void 0&&(z.locationChangeAngularEmitter=window.angular!==void 0),K.moveGradientsOutsideSymbol===void 0&&(z.moveGradientsOutsideSymbol=t())},B.prototype._handleLocationChange=function(K){var z=K.detail,Y=z.oldUrl,q=z.newUrl;this.updateUrls(Y,q)},B.prototype.add=function(K){var z=M.prototype.add.call(this,K);return this.isMounted&&z&&(K.mount(this.node),this._emitter.emit(I,K.node)),z},B.prototype.attach=function(K){var z=this,Y=this;if(Y.isMounted)return Y.node;var q=typeof K=="string"?document.querySelector(K):K;return Y.node=q,this.symbols.forEach(function(Z){Z.mount(Y.node),z._emitter.emit(I,Z.node)}),n(q.querySelectorAll("symbol")).forEach(function(Z){var ee=u.createFromExistingNode(Z);ee.node=Z,Y.add(ee)}),this._emitter.emit(_,q),q},B.prototype.destroy=function(){var K=this.config,z=this.symbols,Y=this._emitter;z.forEach(function(q){return q.destroy()}),Y.off("*"),window.removeEventListener(K.locationChangeEvent,this._handleLocationChange),this.isMounted&&this.unmount()},B.prototype.mount=function(K,z){if(K===void 0&&(K=this.config.mountTo),z===void 0&&(z=!1),this.isMounted)return this.node;var Y=typeof K=="string"?document.querySelector(K):K,q=this.render();return this.node=q,z&&Y.childNodes[0]?Y.insertBefore(q,Y.childNodes[0]):Y.appendChild(q),this._emitter.emit(_,q),q},B.prototype.render=function(){return E(this.stringify())},B.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},B.prototype.updateUrls=function(K,z){if(!this.isMounted)return!1;var Y=document.querySelectorAll(this.config.usagesToUpdate);return x(this.node,Y,a(K)+"#",a(z)+"#"),!0},Object.defineProperties(B.prototype,G),B}(p),N=A(function(M){var B,G,K,z,Y;M.exports=(G=[],K=document,z=K.documentElement.doScroll,(Y=(z?/^loaded|^c/:/^loaded|^i|^c/).test(K.readyState))||K.addEventListener("DOMContentLoaded",B=function(){for(K.removeEventListener("DOMContentLoaded",B),Y=1;B=G.shift();)B()}),function(q){Y?setTimeout(q,0):G.push(q)})});window.__SVG_SPRITE__?m=window.__SVG_SPRITE__:(m=new P({attrs:{id:"__SVG_SPRITE_NODE__","aria-hidden":"true"}}),window.__SVG_SPRITE__=m);var U=function(){var M=document.getElementById("__SVG_SPRITE_NODE__");M?m.attach(M):m.mount(document.body,!0)};return document.body?U():N(U),m},j.exports=R()}).call(this,O(48))},function(j,H,O){for(var F=O(50),R=O(25),A=O(19),c=O(6),C=O(9),y=O(27),v=O(8),k=v("iterator"),D=v("toStringTag"),L=y.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},T=R(f),h=0;h<T.length;h++){var p,b=T[h],E=f[b],u=c[b],e=u&&u.prototype;if(e&&(e[k]||C(e,k,L),e[D]||C(e,D,b),y[b]=L,E))for(p in F)e[p]||A(e,p,F[p],!0)}},function(j,H,O){var F,R=function(){return F===void 0&&(F=!!(window&&document&&document.all&&!window.atob)),F},A=function(){var b={};return function(E){if(b[E]===void 0){var u=document.querySelector(E);if(window.HTMLIFrameElement&&u instanceof window.HTMLIFrameElement)try{u=u.contentDocument.head}catch{u=null}b[E]=u}return b[E]}}(),c=[];function C(b){for(var E=-1,u=0;u<c.length;u++)if(c[u].identifier===b){E=u;break}return E}function y(b,E){for(var u={},e=[],n=0;n<b.length;n++){var t=b[n],s=E.base?t[0]+E.base:t[0],g=u[s]||0,a="".concat(s," ").concat(g);u[s]=g+1;var o=C(a),d={css:t[1],media:t[2],sourceMap:t[3]};o!==-1?(c[o].references++,c[o].updater(d)):c.push({identifier:a,updater:p(d,E),references:1}),e.push(a)}return e}function v(b){var E=document.createElement("style"),u=b.attributes||{};if(u.nonce===void 0){var e=O.nc;e&&(u.nonce=e)}if(Object.keys(u).forEach(function(t){E.setAttribute(t,u[t])}),typeof b.insert=="function")b.insert(E);else{var n=A(b.insert||"head");if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(E)}return E}var k,D=(k=[],function(b,E){return k[b]=E,k.filter(Boolean).join(`
`)});function L(b,E,u,e){var n=u?"":e.media?"@media ".concat(e.media," {").concat(e.css,"}"):e.css;if(b.styleSheet)b.styleSheet.cssText=D(E,n);else{var t=document.createTextNode(n),s=b.childNodes;s[E]&&b.removeChild(s[E]),s.length?b.insertBefore(t,s[E]):b.appendChild(t)}}function f(b,E,u){var e=u.css,n=u.media,t=u.sourceMap;if(n?b.setAttribute("media",n):b.removeAttribute("media"),t&&typeof btoa<"u"&&(e+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(t))))," */")),b.styleSheet)b.styleSheet.cssText=e;else{for(;b.firstChild;)b.removeChild(b.firstChild);b.appendChild(document.createTextNode(e))}}var T=null,h=0;function p(b,E){var u,e,n;if(E.singleton){var t=h++;u=T||(T=v(E)),e=L.bind(null,u,t,!1),n=L.bind(null,u,t,!0)}else u=v(E),e=f.bind(null,u,E),n=function(){(function(s){if(s.parentNode===null)return!1;s.parentNode.removeChild(s)})(u)};return e(b),function(s){if(s){if(s.css===b.css&&s.media===b.media&&s.sourceMap===b.sourceMap)return;e(b=s)}else n()}}j.exports=function(b,E){(E=E||{}).singleton||typeof E.singleton=="boolean"||(E.singleton=R());var u=y(b=b||[],E);return function(e){if(e=e||[],Object.prototype.toString.call(e)==="[object Array]"){for(var n=0;n<u.length;n++){var t=C(u[n]);c[t].references--}for(var s=y(e,E),g=0;g<u.length;g++){var a=C(u[g]);c[a].references===0&&(c[a].updater(),c.splice(a,1))}u=s}}}},function(j,H,O){j.exports=function(F){var R=[];return R.toString=function(){return this.map(function(A){var c=function(C,y){var v=C[1]||"",k=C[3];if(!k)return v;if(y&&typeof btoa=="function"){var D=(f=k,T=btoa(unescape(encodeURIComponent(JSON.stringify(f)))),h="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(T),"/*# ".concat(h," */")),L=k.sources.map(function(p){return"/*# sourceURL=".concat(k.sourceRoot||"").concat(p," */")});return[v].concat(L).concat([D]).join(`
`)}var f,T,h;return[v].join(`
`)}(A,F);return A[2]?"@media ".concat(A[2]," {").concat(c,"}"):c}).join("")},R.i=function(A,c,C){typeof A=="string"&&(A=[[null,A,""]]);var y={};if(C)for(var v=0;v<this.length;v++){var k=this[v][0];k!=null&&(y[k]=!0)}for(var D=0;D<A.length;D++){var L=[].concat(A[D]);C&&y[L[0]]||(c&&(L[2]?L[2]="".concat(c," and ").concat(L[2]):L[2]=c),R.push(L))}},R}},function(j,H){var O=j.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=O)},function(j,H,O){j.exports=!O(11)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(j,H,O){var F=O(21)("wks"),R=O(17),A=O(6).Symbol,c=typeof A=="function";(j.exports=function(C){return F[C]||(F[C]=c&&A[C]||(c?A:R)("Symbol."+C))}).store=F},function(j,H,O){var F=O(10),R=O(24);j.exports=O(7)?function(A,c,C){return F.f(A,c,R(1,C))}:function(A,c,C){return A[c]=C,A}},function(j,H,O){var F=O(14),R=O(36),A=O(26),c=Object.defineProperty;H.f=O(7)?Object.defineProperty:function(C,y,v){if(F(C),y=A(y,!0),F(v),R)try{return c(C,y,v)}catch{}if("get"in v||"set"in v)throw TypeError("Accessors not supported!");return"value"in v&&(C[y]=v.value),C}},function(j,H){j.exports=function(O){try{return!!O()}catch{return!0}}},function(j,H){var O={}.hasOwnProperty;j.exports=function(F,R){return O.call(F,R)}},function(j,H,O){var F=O(6),R=O(12),A=O(7),c=O(28),C=O(19),y=O(64).KEY,v=O(11),k=O(21),D=O(31),L=O(17),f=O(8),T=O(44),h=O(65),p=O(66),b=O(67),E=O(14),u=O(18),e=O(32),n=O(15),t=O(26),s=O(24),g=O(41),a=O(68),o=O(69),d=O(45),r=O(10),l=O(25),i=o.f,m=r.f,S=a.f,w=F.Symbol,x=F.JSON,_=x&&x.stringify,I=f("_hidden"),P=f("toPrimitive"),N={}.propertyIsEnumerable,U=k("symbol-registry"),M=k("symbols"),B=k("op-symbols"),G=Object.prototype,K=typeof w=="function"&&!!d.f,z=F.QObject,Y=!z||!z.prototype||!z.prototype.findChild,q=A&&v(function(){return g(m({},"a",{get:function(){return m(this,"a",{value:7}).a}})).a!=7})?function(Q,re,fe){var Te=i(G,re);Te&&delete G[re],m(Q,re,fe),Te&&Q!==G&&m(G,re,Te)}:m,Z=function(Q){var re=M[Q]=g(w.prototype);return re._k=Q,re},ee=K&&typeof w.iterator=="symbol"?function(Q){return typeof Q=="symbol"}:function(Q){return Q instanceof w},te=function(Q,re,fe){return Q===G&&te(B,re,fe),E(Q),re=t(re,!0),E(fe),R(M,re)?(fe.enumerable?(R(Q,I)&&Q[I][re]&&(Q[I][re]=!1),fe=g(fe,{enumerable:s(0,!1)})):(R(Q,I)||m(Q,I,s(1,{})),Q[I][re]=!0),q(Q,re,fe)):m(Q,re,fe)},ae=function(Q,re){E(Q);for(var fe,Te=p(re=n(re)),xe=0,Be=Te.length;Be>xe;)te(Q,fe=Te[xe++],re[fe]);return Q},se=function(Q){var re=N.call(this,Q=t(Q,!0));return!(this===G&&R(M,Q)&&!R(B,Q))&&(!(re||!R(this,Q)||!R(M,Q)||R(this,I)&&this[I][Q])||re)},pe=function(Q,re){if(Q=n(Q),re=t(re,!0),Q!==G||!R(M,re)||R(B,re)){var fe=i(Q,re);return!fe||!R(M,re)||R(Q,I)&&Q[I][re]||(fe.enumerable=!0),fe}},ve=function(Q){for(var re,fe=S(n(Q)),Te=[],xe=0;fe.length>xe;)R(M,re=fe[xe++])||re==I||re==y||Te.push(re);return Te},we=function(Q){for(var re,fe=Q===G,Te=S(fe?B:n(Q)),xe=[],Be=0;Te.length>Be;)!R(M,re=Te[Be++])||fe&&!R(G,re)||xe.push(M[re]);return xe};K||(C((w=function(){if(this instanceof w)throw TypeError("Symbol is not a constructor!");var Q=L(arguments.length>0?arguments[0]:void 0),re=function(fe){this===G&&re.call(B,fe),R(this,I)&&R(this[I],Q)&&(this[I][Q]=!1),q(this,Q,s(1,fe))};return A&&Y&&q(G,Q,{configurable:!0,set:re}),Z(Q)}).prototype,"toString",function(){return this._k}),o.f=pe,r.f=te,O(46).f=a.f=ve,O(33).f=se,d.f=we,A&&!O(23)&&C(G,"propertyIsEnumerable",se,!0),T.f=function(Q){return Z(f(Q))}),c(c.G+c.W+c.F*!K,{Symbol:w});for(var ue="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Ee=0;ue.length>Ee;)f(ue[Ee++]);for(var Ce=l(f.store),Re=0;Ce.length>Re;)h(Ce[Re++]);c(c.S+c.F*!K,"Symbol",{for:function(Q){return R(U,Q+="")?U[Q]:U[Q]=w(Q)},keyFor:function(Q){if(!ee(Q))throw TypeError(Q+" is not a symbol!");for(var re in U)if(U[re]===Q)return re},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),c(c.S+c.F*!K,"Object",{create:function(Q,re){return re===void 0?g(Q):ae(g(Q),re)},defineProperty:te,defineProperties:ae,getOwnPropertyDescriptor:pe,getOwnPropertyNames:ve,getOwnPropertySymbols:we});var Ne=v(function(){d.f(1)});c(c.S+c.F*Ne,"Object",{getOwnPropertySymbols:function(Q){return d.f(e(Q))}}),x&&c(c.S+c.F*(!K||v(function(){var Q=w();return _([Q])!="[null]"||_({a:Q})!="{}"||_(Object(Q))!="{}"})),"JSON",{stringify:function(Q){for(var re,fe,Te=[Q],xe=1;arguments.length>xe;)Te.push(arguments[xe++]);if(fe=re=Te[1],(u(re)||Q!==void 0)&&!ee(Q))return b(re)||(re=function(Be,Ue){if(typeof fe=="function"&&(Ue=fe.call(this,Be,Ue)),!ee(Ue))return Ue}),Te[1]=re,_.apply(x,Te)}}),w.prototype[P]||O(9)(w.prototype,P,w.prototype.valueOf),D(w,"Symbol"),D(Math,"Math",!0),D(F.JSON,"JSON",!0)},function(j,H,O){var F=O(18);j.exports=function(R){if(!F(R))throw TypeError(R+" is not an object!");return R}},function(j,H,O){var F=O(53),R=O(39);j.exports=function(A){return F(R(A))}},function(j,H,O){var F=O(4),R=O(77);typeof(R=R.__esModule?R.default:R)=="string"&&(R=[[j.i,R,""]]);var A={insert:"head",singleton:!1};F(R,A),j.exports=R.locals||{}},function(j,H){var O=0,F=Math.random();j.exports=function(R){return"Symbol(".concat(R===void 0?"":R,")_",(++O+F).toString(36))}},function(j,H){j.exports=function(O){return typeof O=="object"?O!==null:typeof O=="function"}},function(j,H,O){var F=O(6),R=O(9),A=O(12),c=O(17)("src"),C=O(55),y=(""+C).split("toString");O(22).inspectSource=function(v){return C.call(v)},(j.exports=function(v,k,D,L){var f=typeof D=="function";f&&(A(D,"name")||R(D,"name",k)),v[k]!==D&&(f&&(A(D,c)||R(D,c,v[k]?""+v[k]:y.join(String(k)))),v===F?v[k]=D:L?v[k]?v[k]=D:R(v,k,D):(delete v[k],R(v,k,D)))})(Function.prototype,"toString",function(){return typeof this=="function"&&this[c]||C.call(this)})},function(j,H,O){/*!
* screenfull
* v5.1.0 - 2020-12-24
* (c) Sindre Sorhus; MIT License
*/(function(){var F=typeof window<"u"&&window.document!==void 0?window.document:{},R=j.exports,A=function(){for(var y,v=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],k=0,D=v.length,L={};k<D;k++)if((y=v[k])&&y[1]in F){for(k=0;k<y.length;k++)L[v[0][k]]=y[k];return L}return!1}(),c={change:A.fullscreenchange,error:A.fullscreenerror},C={request:function(y,v){return new Promise((function(k,D){var L=(function(){this.off("change",L),k()}).bind(this);this.on("change",L);var f=(y=y||F.documentElement)[A.requestFullscreen](v);f instanceof Promise&&f.then(L).catch(D)}).bind(this))},exit:function(){return new Promise((function(y,v){if(this.isFullscreen){var k=(function(){this.off("change",k),y()}).bind(this);this.on("change",k);var D=F[A.exitFullscreen]();D instanceof Promise&&D.then(k).catch(v)}else y()}).bind(this))},toggle:function(y,v){return this.isFullscreen?this.exit():this.request(y,v)},onchange:function(y){this.on("change",y)},onerror:function(y){this.on("error",y)},on:function(y,v){var k=c[y];k&&F.addEventListener(k,v,!1)},off:function(y,v){var k=c[y];k&&F.removeEventListener(k,v,!1)},raw:A};A?(Object.defineProperties(C,{isFullscreen:{get:function(){return!!F[A.fullscreenElement]}},element:{enumerable:!0,get:function(){return F[A.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!F[A.fullscreenEnabled]}}}),R?j.exports=C:window.screenfull=C):R?j.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}})()},function(j,H,O){var F=O(22),R=O(6),A=R["__core-js_shared__"]||(R["__core-js_shared__"]={});(j.exports=function(c,C){return A[c]||(A[c]=C!==void 0?C:{})})("versions",[]).push({version:F.version,mode:O(23)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(j,H){var O=j.exports={version:"2.6.12"};typeof __e=="number"&&(__e=O)},function(j,H){j.exports=!1},function(j,H){j.exports=function(O,F){return{enumerable:!(1&O),configurable:!(2&O),writable:!(4&O),value:F}}},function(j,H,O){var F=O(42),R=O(30);j.exports=Object.keys||function(A){return F(A,R)}},function(j,H,O){var F=O(18);j.exports=function(R,A){if(!F(R))return R;var c,C;if(A&&typeof(c=R.toString)=="function"&&!F(C=c.call(R))||typeof(c=R.valueOf)=="function"&&!F(C=c.call(R))||!A&&typeof(c=R.toString)=="function"&&!F(C=c.call(R)))return C;throw TypeError("Can't convert object to primitive value")}},function(j,H){j.exports={}},function(j,H,O){var F=O(6),R=O(22),A=O(9),c=O(19),C=O(56),y=function(v,k,D){var L,f,T,h,p=v&y.F,b=v&y.G,E=v&y.S,u=v&y.P,e=v&y.B,n=b?F:E?F[k]||(F[k]={}):(F[k]||{}).prototype,t=b?R:R[k]||(R[k]={}),s=t.prototype||(t.prototype={});for(L in b&&(D=k),D)T=((f=!p&&n&&n[L]!==void 0)?n:D)[L],h=e&&f?C(T,F):u&&typeof T=="function"?C(Function.call,T):T,n&&c(n,L,T,v&y.U),t[L]!=T&&A(t,L,h),u&&s[L]!=T&&(s[L]=T)};F.core=R,y.F=1,y.G=2,y.S=4,y.P=8,y.B=16,y.W=32,y.U=64,y.R=128,j.exports=y},function(j,H,O){var F=O(21)("keys"),R=O(17);j.exports=function(A){return F[A]||(F[A]=R(A))}},function(j,H){j.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(j,H,O){var F=O(10).f,R=O(12),A=O(8)("toStringTag");j.exports=function(c,C,y){c&&!R(c=y?c:c.prototype,A)&&F(c,A,{configurable:!0,value:C})}},function(j,H,O){var F=O(39);j.exports=function(R){return Object(F(R))}},function(j,H){H.f={}.propertyIsEnumerable},function(j,H,O){O(70);var F=O(14),R=O(47),A=O(7),c=/./.toString,C=function(y){O(19)(RegExp.prototype,"toString",y,!0)};O(11)(function(){return c.call({source:"a",flags:"b"})!="/a/b"})?C(function(){var y=F(this);return"/".concat(y.source,"/","flags"in y?y.flags:!A&&y instanceof RegExp?R.call(y):void 0)}):c.name!="toString"&&C(function(){return c.call(this)})},function(j,H,O){var F;typeof window<"u"&&(F=function(){return function(R){var A={};function c(C){if(A[C])return A[C].exports;var y=A[C]={i:C,l:!1,exports:{}};return R[C].call(y.exports,y,y.exports,c),y.l=!0,y.exports}return c.m=R,c.c=A,c.d=function(C,y,v){c.o(C,y)||Object.defineProperty(C,y,{enumerable:!0,get:v})},c.r=function(C){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})},c.t=function(C,y){if(1&y&&(C=c(C)),8&y||4&y&&typeof C=="object"&&C&&C.__esModule)return C;var v=Object.create(null);if(c.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:C}),2&y&&typeof C!="string")for(var k in C)c.d(v,k,(function(D){return C[D]}).bind(null,k));return v},c.n=function(C){var y=C&&C.__esModule?function(){return C.default}:function(){return C};return c.d(y,"a",y),y},c.o=function(C,y){return Object.prototype.hasOwnProperty.call(C,y)},c.p="/dist/",c(c.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(R,A,c){var C=Object.prototype.hasOwnProperty,y="~";function v(){}function k(T,h,p){this.fn=T,this.context=h,this.once=p||!1}function D(T,h,p,b,E){if(typeof p!="function")throw new TypeError("The listener must be a function");var u=new k(p,b||T,E),e=y?y+h:h;return T._events[e]?T._events[e].fn?T._events[e]=[T._events[e],u]:T._events[e].push(u):(T._events[e]=u,T._eventsCount++),T}function L(T,h){--T._eventsCount==0?T._events=new v:delete T._events[h]}function f(){this._events=new v,this._eventsCount=0}Object.create&&(v.prototype=Object.create(null),new v().__proto__||(y=!1)),f.prototype.eventNames=function(){var T,h,p=[];if(this._eventsCount===0)return p;for(h in T=this._events)C.call(T,h)&&p.push(y?h.slice(1):h);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(T)):p},f.prototype.listeners=function(T){var h=y?y+T:T,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var b=0,E=p.length,u=new Array(E);b<E;b++)u[b]=p[b].fn;return u},f.prototype.listenerCount=function(T){var h=y?y+T:T,p=this._events[h];return p?p.fn?1:p.length:0},f.prototype.emit=function(T,h,p,b,E,u){var e=y?y+T:T;if(!this._events[e])return!1;var n,t,s=this._events[e],g=arguments.length;if(s.fn){switch(s.once&&this.removeListener(T,s.fn,void 0,!0),g){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,h),!0;case 3:return s.fn.call(s.context,h,p),!0;case 4:return s.fn.call(s.context,h,p,b),!0;case 5:return s.fn.call(s.context,h,p,b,E),!0;case 6:return s.fn.call(s.context,h,p,b,E,u),!0}for(t=1,n=new Array(g-1);t<g;t++)n[t-1]=arguments[t];s.fn.apply(s.context,n)}else{var a,o=s.length;for(t=0;t<o;t++)switch(s[t].once&&this.removeListener(T,s[t].fn,void 0,!0),g){case 1:s[t].fn.call(s[t].context);break;case 2:s[t].fn.call(s[t].context,h);break;case 3:s[t].fn.call(s[t].context,h,p);break;case 4:s[t].fn.call(s[t].context,h,p,b);break;default:if(!n)for(a=1,n=new Array(g-1);a<g;a++)n[a-1]=arguments[a];s[t].fn.apply(s[t].context,n)}}return!0},f.prototype.on=function(T,h,p){return D(this,T,h,p,!1)},f.prototype.once=function(T,h,p){return D(this,T,h,p,!0)},f.prototype.removeListener=function(T,h,p,b){var E=y?y+T:T;if(!this._events[E])return this;if(!h)return L(this,E),this;var u=this._events[E];if(u.fn)u.fn!==h||b&&!u.once||p&&u.context!==p||L(this,E);else{for(var e=0,n=[],t=u.length;e<t;e++)(u[e].fn!==h||b&&!u[e].once||p&&u[e].context!==p)&&n.push(u[e]);n.length?this._events[E]=n.length===1?n[0]:n:L(this,E)}return this},f.prototype.removeAllListeners=function(T){var h;return T?(h=y?y+T:T,this._events[h]&&L(this,h)):(this._events=new v,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=y,f.EventEmitter=f,R.exports=f},"./node_modules/url-toolkit/src/url-toolkit.js":function(R,A,c){var C,y,v,k,D;C=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,y=/^([^\/?#]*)([^]*)$/,v=/(?:\/|^)\.(?=\/)/g,k=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,D={buildAbsoluteURL:function(L,f,T){if(T=T||{},L=L.trim(),!(f=f.trim())){if(!T.alwaysNormalize)return L;var h=D.parseURL(L);if(!h)throw new Error("Error trying to parse base URL.");return h.path=D.normalizePath(h.path),D.buildURLFromParts(h)}var p=D.parseURL(f);if(!p)throw new Error("Error trying to parse relative URL.");if(p.scheme)return T.alwaysNormalize?(p.path=D.normalizePath(p.path),D.buildURLFromParts(p)):f;var b=D.parseURL(L);if(!b)throw new Error("Error trying to parse base URL.");if(!b.netLoc&&b.path&&b.path[0]!=="/"){var E=y.exec(b.path);b.netLoc=E[1],b.path=E[2]}b.netLoc&&!b.path&&(b.path="/");var u={scheme:b.scheme,netLoc:p.netLoc,path:null,params:p.params,query:p.query,fragment:p.fragment};if(!p.netLoc&&(u.netLoc=b.netLoc,p.path[0]!=="/"))if(p.path){var e=b.path,n=e.substring(0,e.lastIndexOf("/")+1)+p.path;u.path=D.normalizePath(n)}else u.path=b.path,p.params||(u.params=b.params,p.query||(u.query=b.query));return u.path===null&&(u.path=T.alwaysNormalize?D.normalizePath(p.path):p.path),D.buildURLFromParts(u)},parseURL:function(L){var f=C.exec(L);return f?{scheme:f[1]||"",netLoc:f[2]||"",path:f[3]||"",params:f[4]||"",query:f[5]||"",fragment:f[6]||""}:null},normalizePath:function(L){for(L=L.split("").reverse().join("").replace(v,"");L.length!==(L=L.replace(k,"")).length;);return L.split("").reverse().join("")},buildURLFromParts:function(L){return L.scheme+L.netLoc+L.path+L.params+L.query+L.fragment}},R.exports=D},"./node_modules/webworkify-webpack/index.js":function(R,A,c){function C(D){var L={};function f(h){if(L[h])return L[h].exports;var p=L[h]={i:h,l:!1,exports:{}};return D[h].call(p.exports,p,p.exports,f),p.l=!0,p.exports}f.m=D,f.c=L,f.i=function(h){return h},f.d=function(h,p,b){f.o(h,p)||Object.defineProperty(h,p,{configurable:!1,enumerable:!0,get:b})},f.r=function(h){Object.defineProperty(h,"__esModule",{value:!0})},f.n=function(h){var p=h&&h.__esModule?function(){return h.default}:function(){return h};return f.d(p,"a",p),p},f.o=function(h,p){return Object.prototype.hasOwnProperty.call(h,p)},f.p="/",f.oe=function(h){throw console.error(h),h};var T=f(f.s=ENTRY_MODULE);return T.default||T}function y(D){return(D+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function v(D,L,f){var T={};T[f]=[];var h=L.toString(),p=h.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!p)return T;for(var b,E=p[1],u=new RegExp("(\\\\n|\\W)"+y(E)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");b=u.exec(h);)b[3]!=="dll-reference"&&T[f].push(b[3]);for(u=new RegExp("\\("+y(E)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");b=u.exec(h);)D[b[2]]||(T[f].push(b[1]),D[b[2]]=c(b[1]).m),T[b[2]]=T[b[2]]||[],T[b[2]].push(b[4]);for(var e,n=Object.keys(T),t=0;t<n.length;t++)for(var s=0;s<T[n[t]].length;s++)e=T[n[t]][s],isNaN(1*e)||(T[n[t]][s]=1*T[n[t]][s]);return T}function k(D){return Object.keys(D).reduce(function(L,f){return L||D[f].length>0},!1)}R.exports=function(D,L){L=L||{};var f={main:c.m},T=L.all?{main:Object.keys(f.main)}:function(u,e){for(var n={main:[e]},t={main:[]},s={main:{}};k(n);)for(var g=Object.keys(n),a=0;a<g.length;a++){var o=g[a],d=n[o].pop();if(s[o]=s[o]||{},!s[o][d]&&u[o][d]){s[o][d]=!0,t[o]=t[o]||[],t[o].push(d);for(var r=v(u,u[o][d],o),l=Object.keys(r),i=0;i<l.length;i++)n[l[i]]=n[l[i]]||[],n[l[i]]=n[l[i]].concat(r[l[i]])}}return t}(f,D),h="";Object.keys(T).filter(function(u){return u!=="main"}).forEach(function(u){for(var e=0;T[u][e];)e++;T[u].push(e),f[u][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",h=h+"var "+u+" = ("+C.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+T[u].map(function(n){return JSON.stringify(n)+": "+f[u][n].toString()}).join(",")+`});
`}),h=h+"new (("+C.toString().replace("ENTRY_MODULE",JSON.stringify(D))+")({"+T.main.map(function(u){return JSON.stringify(u)+": "+f.main[u].toString()}).join(",")+"}))(self);";var p=new window.Blob([h],{type:"text/javascript"});if(L.bare)return p;var b=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(p),E=new window.Worker(b);return E.objectURL=b,E}},"./src/config.ts":function(R,A,c){c.r(A),c.d(A,"hlsDefaultConfig",function(){return o}),c.d(A,"mergeConfig",function(){return d}),c.d(A,"enableStreamingMode",function(){return r});var C=c("./src/controller/abr-controller.ts"),y=c("./src/controller/audio-stream-controller.ts"),v=c("./src/controller/audio-track-controller.ts"),k=c("./src/controller/subtitle-stream-controller.ts"),D=c("./src/controller/subtitle-track-controller.ts"),L=c("./src/controller/buffer-controller.ts"),f=c("./src/controller/timeline-controller.ts"),T=c("./src/controller/cap-level-controller.ts"),h=c("./src/controller/fps-controller.ts"),p=c("./src/controller/eme-controller.ts"),b=c("./src/utils/xhr-loader.ts"),E=c("./src/utils/fetch-loader.ts"),u=c("./src/utils/cues.ts"),e=c("./src/utils/mediakeys-helper.ts"),n=c("./src/utils/logger.ts");function t(){return(t=Object.assign||function(l){for(var i=1;i<arguments.length;i++){var m=arguments[i];for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&(l[S]=m[S])}return l}).apply(this,arguments)}function s(l,i){var m=Object.keys(l);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(l);i&&(S=S.filter(function(w){return Object.getOwnPropertyDescriptor(l,w).enumerable})),m.push.apply(m,S)}return m}function g(l){for(var i=1;i<arguments.length;i++){var m=arguments[i]!=null?arguments[i]:{};i%2?s(Object(m),!0).forEach(function(S){a(l,S,m[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(m)):s(Object(m)).forEach(function(S){Object.defineProperty(l,S,Object.getOwnPropertyDescriptor(m,S))})}return l}function a(l,i,m){return i in l?Object.defineProperty(l,i,{value:m,enumerable:!0,configurable:!0,writable:!0}):l[i]=m,l}var o=g(g({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:b.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:C.default,bufferController:L.default,capLevelController:T.default,fpsController:h.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:e.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0},{cueHandler:u.default,enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:k.SubtitleStreamController,subtitleTrackController:D.default,timelineController:f.TimelineController,audioStreamController:y.default,audioTrackController:v.default,emeController:p.default});function d(l,i){if((i.liveSyncDurationCount||i.liveMaxLatencyDurationCount)&&(i.liveSyncDuration||i.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(i.liveMaxLatencyDurationCount!==void 0&&(i.liveSyncDurationCount===void 0||i.liveMaxLatencyDurationCount<=i.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(i.liveMaxLatencyDuration!==void 0&&(i.liveSyncDuration===void 0||i.liveMaxLatencyDuration<=i.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return t({},l,i)}function r(l){var i=l.loader;i!==E.default&&i!==b.default?(n.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),l.progressive=!1):Object(E.fetchSupported)()&&(l.loader=E.default,l.progressive=!0,l.enableSoftwareAES=!0,n.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}},"./src/controller/abr-controller.ts":function(R,A,c){c.r(A);var C=c("./src/polyfills/number.ts"),y=c("./src/utils/ewma-bandwidth-estimator.ts"),v=c("./src/events.ts"),k=c("./src/utils/buffer-helper.ts"),D=c("./src/errors.ts"),L=c("./src/types/loader.ts"),f=c("./src/utils/logger.ts");function T(p,b){for(var E=0;E<b.length;E++){var u=b[E];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(p,u.key,u)}}var h=function(){function p(e){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e;var n=e.config;this.bwEstimator=new y.default(n.abrEwmaSlowVoD,n.abrEwmaFastVoD,n.abrEwmaDefaultEstimate),this.registerListeners()}var b,E,u=p.prototype;return u.registerListeners=function(){var e=this.hls;e.on(v.Events.FRAG_LOADING,this.onFragLoading,this),e.on(v.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(v.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(v.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(v.Events.ERROR,this.onError,this)},u.unregisterListeners=function(){var e=this.hls;e.off(v.Events.FRAG_LOADING,this.onFragLoading,this),e.off(v.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(v.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(v.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(v.Events.ERROR,this.onError,this)},u.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},u.onFragLoading=function(e,n){var t,s=n.frag;s.type===L.PlaylistLevelType.MAIN&&(this.timer||(this.fragCurrent=s,this.partCurrent=(t=n.part)!=null?t:null,this.timer=self.setInterval(this.onCheck,100)))},u.onLevelLoaded=function(e,n){var t=this.hls.config;n.details.live?this.bwEstimator.update(t.abrEwmaSlowLive,t.abrEwmaFastLive):this.bwEstimator.update(t.abrEwmaSlowVoD,t.abrEwmaFastVoD)},u._abandonRulesCheck=function(){var e=this.fragCurrent,n=this.partCurrent,t=this.hls,s=t.autoLevelEnabled,g=t.config,a=t.media;if(e&&a){var o=n?n.stats:e.stats,d=n?n.duration:e.duration;if(o.aborted)return f.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(s&&!a.paused&&a.playbackRate&&a.readyState){var r=performance.now()-o.loading.start,l=Math.abs(a.playbackRate);if(!(r<=500*d/l)){var i=t.levels,m=t.minAutoLevel,S=i[e.level],w=o.total||Math.max(o.loaded,Math.round(d*S.maxBitrate/8)),x=Math.max(1,o.bwEstimate?o.bwEstimate/8:1e3*o.loaded/r),_=(w-o.loaded)/x,I=a.currentTime,P=(k.BufferHelper.bufferInfo(a,I,g.maxBufferHole).end-I)/l;if(!(P>=2*d/l||_<=P)){var N,U=Number.POSITIVE_INFINITY;for(N=e.level-1;N>m&&!((U=d*i[N].maxBitrate/(6.4*x))<P);N--);if(!(U>=_)){var M=this.bwEstimator.getEstimate();f.logger.warn("Fragment "+e.sn+(n?" part "+n.index:"")+" of level "+e.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+N+`
      Current BW estimate: `+(Object(C.isFiniteNumber)(M)?(M/1024).toFixed(3):"Unknown")+` Kb/s
      Estimated load time for current fragment: `+_.toFixed(3)+` s
      Estimated load time for the next fragment: `+U.toFixed(3)+` s
      Time to underbuffer: `+P.toFixed(3)+" s"),t.nextLoadLevel=N,this.bwEstimator.sample(r,o.loaded),this.clearTimer(),e.loader&&(this.fragCurrent=this.partCurrent=null,e.loader.abort()),t.trigger(v.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:n,stats:o})}}}}}},u.onFragLoaded=function(e,n){var t=n.frag,s=n.part;if(t.type===L.PlaylistLevelType.MAIN&&Object(C.isFiniteNumber)(t.sn)){var g=s?s.stats:t.stats,a=s?s.duration:t.duration;if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var o=this.hls.levels[t.level],d=(o.loaded?o.loaded.bytes:0)+g.loaded,r=(o.loaded?o.loaded.duration:0)+a;o.loaded={bytes:d,duration:r},o.realBitrate=Math.round(8*d/r)}if(t.bitrateTest){var l={stats:g,frag:t,part:s,id:t.type};this.onFragBuffered(v.Events.FRAG_BUFFERED,l),t.bitrateTest=!1}}},u.onFragBuffered=function(e,n){var t=n.frag,s=n.part,g=s?s.stats:t.stats;if(!g.aborted&&t.type===L.PlaylistLevelType.MAIN&&t.sn!=="initSegment"){var a=g.parsing.end-g.loading.start;this.bwEstimator.sample(a,g.loaded),g.bwEstimate=this.bwEstimator.getEstimate(),t.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}},u.onError=function(e,n){switch(n.details){case D.ErrorDetails.FRAG_LOAD_ERROR:case D.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},u.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},u.getNextABRAutoLevel=function(){var e=this.fragCurrent,n=this.partCurrent,t=this.hls,s=t.maxAutoLevel,g=t.config,a=t.minAutoLevel,o=t.media,d=n?n.duration:e?e.duration:0,r=o?o.currentTime:0,l=o&&o.playbackRate!==0?Math.abs(o.playbackRate):1,i=this.bwEstimator?this.bwEstimator.getEstimate():g.abrEwmaDefaultEstimate,m=(k.BufferHelper.bufferInfo(o,r,g.maxBufferHole).end-r)/l,S=this.findBestLevel(i,a,s,m,g.abrBandWidthFactor,g.abrBandWidthUpFactor);if(S>=0)return S;f.logger.trace((m?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var w=d?Math.min(d,g.maxStarvationDelay):g.maxStarvationDelay,x=g.abrBandWidthFactor,_=g.abrBandWidthUpFactor;if(!m){var I=this.bitrateTestDelay;I&&(w=(d?Math.min(d,g.maxLoadingDelay):g.maxLoadingDelay)-I,f.logger.trace("bitrate test took "+Math.round(1e3*I)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*w)+" ms"),x=_=1)}return S=this.findBestLevel(i,a,s,m+w,x,_),Math.max(S,0)},u.findBestLevel=function(e,n,t,s,g,a){for(var o,d=this.fragCurrent,r=this.partCurrent,l=this.lastLoadedFragLevel,i=this.hls.levels,m=i[l],S=!(m==null||(o=m.details)===null||o===void 0||!o.live),w=m==null?void 0:m.codecSet,x=r?r.duration:d?d.duration:0,_=t;_>=n;_--){var I=i[_];if(I&&(!w||I.codecSet===w)){var P=I.details,N=(r?P==null?void 0:P.partTarget:P==null?void 0:P.averagetargetduration)||x,U=void 0;U=_<=l?g*e:a*e;var M=i[_].maxBitrate,B=M*N/U;if(f.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+_+"/"+Math.round(U)+"/"+M+"/"+N+"/"+s+"/"+B),U>M&&(!B||S&&!this.bitrateTestDelay||B<s))return _}}return-1},b=p,(E=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,n=this.bwEstimator;if(!(e===-1||n&&n.canEstimate()))return e;var t=this.getNextABRAutoLevel();return e!==-1&&(t=Math.min(e,t)),t},set:function(e){this._nextAutoLevel=e}}])&&T(b.prototype,E),p}();A.default=h},"./src/controller/audio-stream-controller.ts":function(R,A,c){c.r(A);var C=c("./src/polyfills/number.ts"),y=c("./src/controller/base-stream-controller.ts"),v=c("./src/events.ts"),k=c("./src/utils/buffer-helper.ts"),D=c("./src/controller/fragment-tracker.ts"),L=c("./src/types/level.ts"),f=c("./src/types/loader.ts"),T=c("./src/loader/fragment.ts"),h=c("./src/demux/chunk-cache.ts"),p=c("./src/demux/transmuxer-interface.ts"),b=c("./src/types/transmuxer.ts"),E=c("./src/controller/fragment-finders.ts"),u=c("./src/utils/discontinuities.ts"),e=c("./src/errors.ts"),n=c("./src/utils/logger.ts");function t(){return(t=Object.assign||function(a){for(var o=1;o<arguments.length;o++){var d=arguments[o];for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&(a[r]=d[r])}return a}).apply(this,arguments)}function s(a,o){return(s=Object.setPrototypeOf||function(d,r){return d.__proto__=r,d})(a,o)}var g=function(a){var o,d;function r(i,m){var S;return(S=a.call(this,i,m,"[audio-stream-controller]")||this).videoBuffer=null,S.videoTrackCC=-1,S.waitingVideoCC=-1,S.audioSwitch=!1,S.trackId=-1,S.waitingData=null,S.mainDetails=null,S.bufferFlushed=!1,S._registerListeners(),S}d=a,(o=r).prototype=Object.create(d.prototype),o.prototype.constructor=o,s(o,d);var l=r.prototype;return l.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},l._registerListeners=function(){var i=this.hls;i.on(v.Events.MEDIA_ATTACHED,this.onMediaAttached,this),i.on(v.Events.MEDIA_DETACHING,this.onMediaDetaching,this),i.on(v.Events.MANIFEST_LOADING,this.onManifestLoading,this),i.on(v.Events.LEVEL_LOADED,this.onLevelLoaded,this),i.on(v.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),i.on(v.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),i.on(v.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),i.on(v.Events.ERROR,this.onError,this),i.on(v.Events.BUFFER_RESET,this.onBufferReset,this),i.on(v.Events.BUFFER_CREATED,this.onBufferCreated,this),i.on(v.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),i.on(v.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),i.on(v.Events.FRAG_BUFFERED,this.onFragBuffered,this)},l._unregisterListeners=function(){var i=this.hls;i.off(v.Events.MEDIA_ATTACHED,this.onMediaAttached,this),i.off(v.Events.MEDIA_DETACHING,this.onMediaDetaching,this),i.off(v.Events.MANIFEST_LOADING,this.onManifestLoading,this),i.off(v.Events.LEVEL_LOADED,this.onLevelLoaded,this),i.off(v.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),i.off(v.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),i.off(v.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),i.off(v.Events.ERROR,this.onError,this),i.off(v.Events.BUFFER_RESET,this.onBufferReset,this),i.off(v.Events.BUFFER_CREATED,this.onBufferCreated,this),i.off(v.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),i.off(v.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),i.off(v.Events.FRAG_BUFFERED,this.onFragBuffered,this)},l.onInitPtsFound=function(i,m){var S=m.frag,w=m.id,x=m.initPTS;if(w==="main"){var _=S.cc;this.initPTS[S.cc]=x,this.log("InitPTS for cc: "+_+" found from main: "+x),this.videoTrackCC=_,this.state===y.State.WAITING_INIT_PTS&&this.tick()}},l.startLoad=function(i){if(!this.levels)return this.startPosition=i,void(this.state=y.State.STOPPED);var m=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,m>0&&i===-1?(this.log("Override startPosition with lastCurrentTime @"+m.toFixed(3)),this.state=y.State.IDLE):(this.loadedmetadata=!1,this.state=y.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=i,this.tick()},l.doTick=function(){switch(this.state){case y.State.IDLE:this.doTickIdle();break;case y.State.WAITING_TRACK:var i,m=this.levels,S=this.trackId,w=m==null||(i=m[S])===null||i===void 0?void 0:i.details;if(w){if(this.waitForCdnTuneIn(w))break;this.state=y.State.WAITING_INIT_PTS}break;case y.State.FRAG_LOADING_WAITING_RETRY:var x,_=performance.now(),I=this.retryDate;(!I||_>=I||(x=this.media)!==null&&x!==void 0&&x.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=y.State.IDLE);break;case y.State.WAITING_INIT_PTS:var P=this.waitingData;if(P){var N=P.frag,U=P.part,M=P.cache,B=P.complete;if(this.initPTS[N.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=y.State.FRAG_LOADING;var G={frag:N,part:U,payload:M.flush(),networkDetails:null};this._handleFragmentLoadProgress(G),B&&a.prototype._handleFragmentLoadComplete.call(this,G)}else if(this.videoTrackCC!==this.waitingVideoCC)n.logger.log("Waiting fragment cc ("+N.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var K=this.getLoadPosition(),z=k.BufferHelper.bufferInfo(this.mediaBuffer,K,this.config.maxBufferHole);Object(E.fragmentWithinToleranceTest)(z.end,this.config.maxFragLookUpTolerance,N)<0&&(n.logger.log("Waiting fragment cc ("+N.cc+") @ "+N.start+" cancelled because another fragment at "+z.end+" is needed"),this.clearWaitingFragment())}}else this.state=y.State.IDLE}this.onTickEnd()},l.clearWaitingFragment=function(){var i=this.waitingData;i&&(this.fragmentTracker.removeFragment(i.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=y.State.IDLE)},l.onTickEnd=function(){var i=this.media;if(i&&i.readyState){var m=(this.mediaBuffer?this.mediaBuffer:i).buffered;!this.loadedmetadata&&m.length&&(this.loadedmetadata=!0),this.lastCurrentTime=i.currentTime}},l.doTickIdle=function(){var i,m,S=this.hls,w=this.levels,x=this.media,_=this.trackId,I=S.config;if(w&&w[_]&&(x||!this.startFragRequested&&I.startFragPrefetch)){var P=w[_].details;if(!P||P.live&&this.levelLastLoaded!==_||this.waitForCdnTuneIn(P))this.state=y.State.WAITING_TRACK;else{this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,T.ElementaryStreamTypes.AUDIO,f.PlaylistLevelType.AUDIO));var N=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,f.PlaylistLevelType.AUDIO);if(N!==null){var U=N.len,M=this.getMaxBufferLength(),B=this.audioSwitch;if(!(U>=M)||B){if(!B&&this._streamEnded(N,P))return S.trigger(v.Events.BUFFER_EOS,{type:"audio"}),void(this.state=y.State.ENDED);var G=P.fragments[0].start,K=N.end;if(B){var z=this.getLoadPosition();K=z,P.PTSKnown&&z<G&&(N.end>G||N.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),x.currentTime=G+.05)}var Y=this.getNextFragment(K,P);Y?((i=Y.decryptdata)===null||i===void 0?void 0:i.keyFormat)!=="identity"||(m=Y.decryptdata)!==null&&m!==void 0&&m.key?this.loadFragment(Y,P,K):this.loadKey(Y,P):this.bufferFlushed=!0}}}}},l.getMaxBufferLength=function(){var i=a.prototype.getMaxBufferLength.call(this),m=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,f.PlaylistLevelType.MAIN);return m===null?i:Math.max(i,m.len)},l.onMediaDetaching=function(){this.videoBuffer=null,a.prototype.onMediaDetaching.call(this)},l.onAudioTracksUpdated=function(i,m){var S=m.audioTracks;this.resetTransmuxer(),this.levels=S.map(function(w){return new L.Level(w)})},l.onAudioTrackSwitching=function(i,m){var S=!!m.url;this.trackId=m.id;var w=this.fragCurrent;w!=null&&w.loader&&w.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),S?this.setInterval(100):this.resetTransmuxer(),S?(this.audioSwitch=!0,this.state=y.State.IDLE):this.state=y.State.STOPPED,this.tick()},l.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},l.onLevelLoaded=function(i,m){this.mainDetails=m.details},l.onAudioTrackLoaded=function(i,m){var S,w=this.levels,x=m.details,_=m.id;if(w){this.log("Track "+_+" loaded ["+x.startSN+","+x.endSN+"],duration:"+x.totalduration);var I=w[_],P=0;if(x.live||(S=I.details)!==null&&S!==void 0&&S.live){var N=this.mainDetails;if(x.fragments[0]||(x.deltaUpdateFailed=!0),x.deltaUpdateFailed||!N)return;!I.details&&x.hasProgramDateTime&&N.hasProgramDateTime?(Object(u.alignMediaPlaylistByPDT)(x,N),P=x.fragments[0].start):P=this.alignPlaylists(x,I.details)}I.details=x,this.levelLastLoaded=_,this.startFragRequested||!this.mainDetails&&x.live||this.setStartPosition(I.details,P),this.state!==y.State.WAITING_TRACK||this.waitForCdnTuneIn(x)||(this.state=y.State.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+_)},l._handleFragmentLoadProgress=function(i){var m,S=i.frag,w=i.part,x=i.payload,_=this.config,I=this.trackId,P=this.levels;if(P){var N=P[I];console.assert(N,"Audio track is defined on fragment load progress");var U=N.details;console.assert(U,"Audio track details are defined on fragment load progress");var M=_.defaultAudioCodec||N.audioCodec||"mp4a.40.2",B=this.transmuxer;B||(B=this.transmuxer=new p.default(this.hls,f.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var G=this.initPTS[S.cc],K=(m=S.initSegment)===null||m===void 0?void 0:m.data;if(G!==void 0){var z=w?w.index:-1,Y=z!==-1,q=new b.ChunkMetadata(S.level,S.sn,S.stats.chunkCount,x.byteLength,z,Y);B.push(x,K,M,"",S,w,U.totalduration,!1,q,G)}else n.logger.log("Unknown video PTS for cc "+S.cc+", waiting for video PTS before demuxing audio frag "+S.sn+" of ["+U.startSN+" ,"+U.endSN+"],track "+I),(this.waitingData=this.waitingData||{frag:S,part:w,cache:new h.default,complete:!1}).cache.push(new Uint8Array(x)),this.waitingVideoCC=this.videoTrackCC,this.state=y.State.WAITING_INIT_PTS}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+S.sn+" of level "+S.level+" will not be buffered")},l._handleFragmentLoadComplete=function(i){this.waitingData?this.waitingData.complete=!0:a.prototype._handleFragmentLoadComplete.call(this,i)},l.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},l.onBufferCreated=function(i,m){var S=m.tracks.audio;S&&(this.mediaBuffer=S.buffer),m.tracks.video&&(this.videoBuffer=m.tracks.video.buffer)},l.onFragBuffered=function(i,m){var S=m.frag,w=m.part;S.type===f.PlaylistLevelType.AUDIO&&(this.fragContextChanged(S)?this.warn("Fragment "+S.sn+(w?" p: "+w.index:"")+" of level "+S.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):(S.sn!=="initSegment"&&(this.fragPrevious=S,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(v.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(S,w)))},l.onError=function(i,m){switch(m.details){case e.ErrorDetails.FRAG_LOAD_ERROR:case e.ErrorDetails.FRAG_LOAD_TIMEOUT:case e.ErrorDetails.KEY_LOAD_ERROR:case e.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(f.PlaylistLevelType.AUDIO,m);break;case e.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case e.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==y.State.ERROR&&this.state!==y.State.STOPPED&&(this.state=m.fatal?y.State.ERROR:y.State.IDLE,this.warn(m.details+" while loading frag, switching to "+this.state+" state"));break;case e.ErrorDetails.BUFFER_FULL_ERROR:if(m.parent==="audio"&&(this.state===y.State.PARSING||this.state===y.State.PARSED)){var S=!0,w=this.getFwdBufferInfo(this.mediaBuffer,f.PlaylistLevelType.AUDIO);w&&w.len>.5&&(S=!this.reduceMaxBufferLength(w.len)),S&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,a.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}},l.onBufferFlushed=function(i,m){m.type===T.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0)},l._handleTransmuxComplete=function(i){var m,S="audio",w=this.hls,x=i.remuxResult,_=i.chunkMeta,I=this.getCurrentContext(_);if(!I)return this.warn("The loading context changed while buffering fragment "+_.sn+" of level "+_.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(_.level);var P=I.frag,N=I.part,U=x.audio,M=x.text,B=x.id3,G=x.initSegment;if(!this.fragContextChanged(P)){if(this.state=y.State.PARSING,this.audioSwitch&&U&&this.completeAudioSwitch(),G!=null&&G.tracks&&(this._bufferInitSegment(G.tracks,P,_),w.trigger(v.Events.FRAG_PARSING_INIT_SEGMENT,{frag:P,id:S,tracks:G.tracks})),U){var K=U.startPTS,z=U.endPTS,Y=U.startDTS,q=U.endDTS;N&&(N.elementaryStreams[T.ElementaryStreamTypes.AUDIO]={startPTS:K,endPTS:z,startDTS:Y,endDTS:q}),P.setElementaryStreamInfo(T.ElementaryStreamTypes.AUDIO,K,z,Y,q),this.bufferFragmentData(U,P,N,_)}if(B!=null&&(m=B.samples)!==null&&m!==void 0&&m.length){var Z=t({frag:P,id:S},B);w.trigger(v.Events.FRAG_PARSING_METADATA,Z)}if(M){var ee=t({frag:P,id:S},M);w.trigger(v.Events.FRAG_PARSING_USERDATA,ee)}}},l._bufferInitSegment=function(i,m,S){if(this.state===y.State.PARSING){i.video&&delete i.video;var w=i.audio;if(w){w.levelCodec=w.codec,w.id="audio",this.log("Init audio buffer, container:"+w.container+", codecs[parsed]=["+w.codec+"]"),this.hls.trigger(v.Events.BUFFER_CODECS,i);var x=w.initSegment;if(x!=null&&x.byteLength){var _={type:"audio",frag:m,part:null,chunkMeta:S,parent:m.type,data:x};this.hls.trigger(v.Events.BUFFER_APPENDING,_)}this.tick()}}},l.loadFragment=function(i,m,S){var w=this.fragmentTracker.getState(i);this.fragCurrent=i,(this.audioSwitch||w===D.FragmentState.NOT_LOADED||w===D.FragmentState.PARTIAL)&&(i.sn==="initSegment"?this._loadInitSegment(i):m.live&&!Object(C.isFiniteNumber)(this.initPTS[i.cc])?(this.log("Waiting for video PTS in continuity counter "+i.cc+" of live stream before loading audio fragment "+i.sn+" of level "+this.trackId),this.state=y.State.WAITING_INIT_PTS):(this.startFragRequested=!0,a.prototype.loadFragment.call(this,i,m,S)))},l.completeAudioSwitch=function(){var i=this.hls,m=this.media,S=this.trackId;m&&(this.log("Switching audio track : flushing all audio"),a.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,i.trigger(v.Events.AUDIO_TRACK_SWITCHED,{id:S})},r}(y.default);A.default=g},"./src/controller/audio-track-controller.ts":function(R,A,c){c.r(A);var C=c("./src/events.ts"),y=c("./src/errors.ts"),v=c("./src/controller/base-playlist-controller.ts"),k=c("./src/types/loader.ts");function D(T,h){for(var p=0;p<h.length;p++){var b=h[p];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(T,b.key,b)}}function L(T,h){return(L=Object.setPrototypeOf||function(p,b){return p.__proto__=b,p})(T,h)}var f=function(T){var h,p;function b(n){var t;return(t=T.call(this,n,"[audio-track-controller]")||this).tracks=[],t.groupId=null,t.tracksInGroup=[],t.trackId=-1,t.trackName="",t.selectDefaultTrack=!0,t.registerListeners(),t}p=T,(h=b).prototype=Object.create(p.prototype),h.prototype.constructor=h,L(h,p);var E,u,e=b.prototype;return e.registerListeners=function(){var n=this.hls;n.on(C.Events.MANIFEST_LOADING,this.onManifestLoading,this),n.on(C.Events.MANIFEST_PARSED,this.onManifestParsed,this),n.on(C.Events.LEVEL_LOADING,this.onLevelLoading,this),n.on(C.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),n.on(C.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),n.on(C.Events.ERROR,this.onError,this)},e.unregisterListeners=function(){var n=this.hls;n.off(C.Events.MANIFEST_LOADING,this.onManifestLoading,this),n.off(C.Events.MANIFEST_PARSED,this.onManifestParsed,this),n.off(C.Events.LEVEL_LOADING,this.onLevelLoading,this),n.off(C.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),n.off(C.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),n.off(C.Events.ERROR,this.onError,this)},e.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,T.prototype.destroy.call(this)},e.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},e.onManifestParsed=function(n,t){this.tracks=t.audioTracks||[]},e.onAudioTrackLoaded=function(n,t){var s=t.id,g=t.details,a=this.tracksInGroup[s];if(a){var o=a.details;a.details=t.details,this.log("audioTrack "+s+" loaded ["+g.startSN+"-"+g.endSN+"]"),s===this.trackId&&(this.retryCount=0,this.playlistLoaded(s,t,o))}else this.warn("Invalid audio track id "+s)},e.onLevelLoading=function(n,t){this.switchLevel(t.level)},e.onLevelSwitching=function(n,t){this.switchLevel(t.level)},e.switchLevel=function(n){var t=this.hls.levels[n];if(t!=null&&t.audioGroupIds){var s=t.audioGroupIds[t.urlId];if(this.groupId!==s){this.groupId=s;var g=this.tracks.filter(function(o){return!s||o.groupId===s});this.selectDefaultTrack&&!g.some(function(o){return o.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=g;var a={audioTracks:g};this.log("Updating audio tracks, "+g.length+' track(s) found in "'+s+'" group-id'),this.hls.trigger(C.Events.AUDIO_TRACKS_UPDATED,a),this.selectInitialTrack()}}},e.onError=function(n,t){T.prototype.onError.call(this,n,t),!t.fatal&&t.context&&t.context.type===k.PlaylistContextType.AUDIO_TRACK&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.retryLoadingOrFail(t)},e.setAudioTrack=function(n){var t=this.tracksInGroup;if(n<0||n>=t.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var s=t[this.trackId];this.log("Now switching to audio-track index "+n);var g=t[n],a=g.id,o=g.groupId,d=o===void 0?"":o,r=g.name,l=g.type,i=g.url;if(this.trackId=n,this.trackName=r,this.selectDefaultTrack=!1,this.hls.trigger(C.Events.AUDIO_TRACK_SWITCHING,{id:a,groupId:d,name:r,type:l,url:i}),!g.details||g.details.live){var m=this.switchParams(g.url,s==null?void 0:s.details);this.loadPlaylist(m)}}},e.selectInitialTrack=function(){var n=this.tracksInGroup;console.assert(n.length,"Initial audio track should be selected when tracks are known");var t=this.trackName,s=this.findTrackId(t)||this.findTrackId();s!==-1?this.setAudioTrack(s):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(C.Events.ERROR,{type:y.ErrorTypes.MEDIA_ERROR,details:y.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},e.findTrackId=function(n){for(var t=this.tracksInGroup,s=0;s<t.length;s++){var g=t[s];if((!this.selectDefaultTrack||g.default)&&(!n||n===g.name))return g.id}return-1},e.loadPlaylist=function(n){var t=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(t)){var s=t.id,g=t.groupId,a=t.url;if(n)try{a=n.addDirectives(a)}catch(o){this.warn("Could not construct new URL with HLS Delivery Directives: "+o)}this.log("loading audio-track playlist for id: "+s),this.clearTimer(),this.hls.trigger(C.Events.AUDIO_TRACK_LOADING,{url:a,id:s,groupId:g,deliveryDirectives:n||null})}},E=b,(u=[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(n){this.selectDefaultTrack=!1,this.setAudioTrack(n)}}])&&D(E.prototype,u),b}(v.default);A.default=f},"./src/controller/base-playlist-controller.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return L});var C=c("./src/polyfills/number.ts"),y=c("./src/types/level.ts"),v=c("./src/controller/level-helper.ts"),k=c("./src/utils/logger.ts"),D=c("./src/errors.ts"),L=function(){function f(h,p){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=k.logger.log.bind(k.logger,p+":"),this.warn=k.logger.warn.bind(k.logger,p+":"),this.hls=h}var T=f.prototype;return T.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},T.onError=function(h,p){p.fatal&&p.type===D.ErrorTypes.NETWORK_ERROR&&this.clearTimer()},T.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},T.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},T.stopLoad=function(){this.canLoad=!1,this.clearTimer()},T.switchParams=function(h,p){var b=p==null?void 0:p.renditionReports;if(b)for(var E=0;E<b.length;E++){var u=b[E],e=""+u.URI;if(e===h.substr(-e.length)){var n=parseInt(u["LAST-MSN"]),t=parseInt(u["LAST-PART"]);if(p&&this.hls.config.lowLatencyMode){var s=Math.min(p.age-p.partTarget,p.targetduration);t!==void 0&&s>p.partTarget&&(t+=1)}if(Object(C.isFiniteNumber)(n))return new y.HlsUrlParameters(n,Object(C.isFiniteNumber)(t)?t:void 0,y.HlsSkip.No)}}},T.loadPlaylist=function(h){},T.shouldLoadTrack=function(h){return this.canLoad&&h&&!!h.url&&(!h.details||h.details.live)},T.playlistLoaded=function(h,p,b){var E=this,u=p.details,e=p.stats,n=e.loading.end?Math.max(0,self.performance.now()-e.loading.end):0;if(u.advancedDateTime=Date.now()-n,u.live||b!=null&&b.live){if(u.reloaded(b),b&&this.log("live playlist "+h+" "+(u.advanced?"REFRESHED "+u.lastPartSn+"-"+u.lastPartIndex:"MISSED")),b&&u.fragments.length>0&&Object(v.mergeDetails)(b,u),!this.canLoad||!u.live)return;var t,s=void 0,g=void 0;if(u.canBlockReload&&u.endSN&&u.advanced){var a=this.hls.config.lowLatencyMode,o=u.lastPartSn,d=u.endSN,r=u.lastPartIndex,l=o===d;r!==-1?(s=l?d+1:o,g=l?a?0:r:r+1):s=d+1;var i=u.age,m=i+u.ageHeader,S=Math.min(m-u.partTarget,1.5*u.targetduration);if(S>0){if(b&&S>b.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+b.tuneInGoal+" to: "+S+" with playlist age: "+u.age),S=0;else{var w=Math.floor(S/u.targetduration);s+=w,g!==void 0&&(g+=Math.round(S%u.targetduration/u.partTarget)),this.log("CDN Tune-in age: "+u.ageHeader+"s last advanced "+i.toFixed(2)+"s goal: "+S+" skip sn "+w+" to part "+g)}u.tuneInGoal=S}if(t=this.getDeliveryDirectives(u,p.deliveryDirectives,s,g),a||!l)return void this.loadPlaylist(t)}else t=this.getDeliveryDirectives(u,p.deliveryDirectives,s,g);var x=Object(v.computeReloadInterval)(u,e);s!==void 0&&u.canBlockReload&&(x-=u.partTarget||1),this.log("reload live playlist "+h+" in "+Math.round(x)+" ms"),this.timer=self.setTimeout(function(){return E.loadPlaylist(t)},x)}else this.clearTimer()},T.getDeliveryDirectives=function(h,p,b,E){var u=Object(y.getSkipValue)(h,b);return p!=null&&p.skip&&h.deltaUpdateFailed&&(b=p.msn,E=p.part,u=y.HlsSkip.No),new y.HlsUrlParameters(b,E,u)},T.retryLoadingOrFail=function(h){var p,b=this,E=this.hls.config,u=this.retryCount<E.levelLoadingMaxRetry;if(u)if(this.retryCount++,h.details.indexOf("LoadTimeOut")>-1&&(p=h.context)!==null&&p!==void 0&&p.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+h.details+'"'),this.loadPlaylist();else{var e=Math.min(Math.pow(2,this.retryCount)*E.levelLoadingRetryDelay,E.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return b.loadPlaylist()},e),this.warn("retry playlist loading #"+this.retryCount+" in "+e+' ms after "'+h.details+'"')}else this.warn('cannot recover from error "'+h.details+'"'),this.clearTimer(),h.fatal=!0;return u},f}()},"./src/controller/base-stream-controller.ts":function(R,A,c){c.r(A),c.d(A,"State",function(){return a}),c.d(A,"default",function(){return o});var C=c("./src/polyfills/number.ts"),y=c("./src/task-loop.ts"),v=c("./src/controller/fragment-tracker.ts"),k=c("./src/utils/buffer-helper.ts"),D=c("./src/utils/logger.ts"),L=c("./src/events.ts"),f=c("./src/errors.ts"),T=c("./src/types/transmuxer.ts"),h=c("./src/utils/mp4-tools.ts"),p=c("./src/utils/discontinuities.ts"),b=c("./src/controller/fragment-finders.ts"),E=c("./src/controller/level-helper.ts"),u=c("./src/loader/fragment-loader.ts"),e=c("./src/crypt/decrypter.ts"),n=c("./src/utils/time-ranges.ts"),t=c("./src/types/loader.ts");function s(d,r){for(var l=0;l<r.length;l++){var i=r[l];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(d,i.key,i)}}function g(d,r){return(g=Object.setPrototypeOf||function(l,i){return l.__proto__=i,l})(d,r)}var a={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BACKTRACKING:"BACKTRACKING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},o=function(d){var r,l;function i(x,_,I){var P;return(P=d.call(this)||this).hls=void 0,P.fragPrevious=null,P.fragCurrent=null,P.fragmentTracker=void 0,P.transmuxer=null,P._state=a.STOPPED,P.media=void 0,P.mediaBuffer=void 0,P.config=void 0,P.bitrateTest=!1,P.lastCurrentTime=0,P.nextLoadPosition=0,P.startPosition=0,P.loadedmetadata=!1,P.fragLoadError=0,P.retryDate=0,P.levels=null,P.fragmentLoader=void 0,P.levelLastLoaded=null,P.startFragRequested=!1,P.decrypter=void 0,P.initPTS=[],P.onvseeking=null,P.onvended=null,P.logPrefix="",P.log=void 0,P.warn=void 0,P.logPrefix=I,P.log=D.logger.log.bind(D.logger,I+":"),P.warn=D.logger.warn.bind(D.logger,I+":"),P.hls=x,P.fragmentLoader=new u.default(x.config),P.fragmentTracker=_,P.config=x.config,P.decrypter=new e.default(x,x.config),x.on(L.Events.KEY_LOADED,P.onKeyLoaded,function(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}(P)),P}l=d,(r=i).prototype=Object.create(l.prototype),r.prototype.constructor=r,g(r,l);var m,S,w=i.prototype;return w.doTick=function(){this.onTickEnd()},w.onTickEnd=function(){},w.startLoad=function(x){},w.stopLoad=function(){this.fragmentLoader.abort();var x=this.fragCurrent;x&&this.fragmentTracker.removeFragment(x),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=a.STOPPED},w._streamEnded=function(x,_){var I=this.fragCurrent,P=this.fragmentTracker;if(!_.live&&I&&I.sn===_.endSN&&!x.nextStart){var N=P.getState(I);return N===v.FragmentState.PARTIAL||N===v.FragmentState.OK}return!1},w.onMediaAttached=function(x,_){var I=this.media=this.mediaBuffer=_.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),I.addEventListener("seeking",this.onvseeking),I.addEventListener("ended",this.onvended);var P=this.config;this.levels&&P.autoStartLoad&&this.state===a.STOPPED&&this.startLoad(P.startPosition)},w.onMediaDetaching=function(){var x=this.media;x!=null&&x.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),x&&(x.removeEventListener("seeking",this.onvseeking),x.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},w.onMediaSeeking=function(){var x=this.config,_=this.fragCurrent,I=this.media,P=this.mediaBuffer,N=this.state,U=I?I.currentTime:0,M=k.BufferHelper.bufferInfo(P||I,U,x.maxBufferHole);if(this.log("media seeking to "+(Object(C.isFiniteNumber)(U)?U.toFixed(3):U)+", state: "+N),N===a.ENDED)this.resetLoadingState();else if(_&&!M.len){var B=x.maxFragLookUpTolerance,G=_.start-B,K=U>_.start+_.duration+B;(U<G||K)&&(K&&_.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),_.loader.abort()),this.resetLoadingState())}I&&(this.lastCurrentTime=U),this.loadedmetadata||M.len||(this.nextLoadPosition=this.startPosition=U),this.tickImmediate()},w.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},w.onKeyLoaded=function(x,_){if(this.state===a.KEY_LOADING&&_.frag===this.fragCurrent&&this.levels){this.state=a.IDLE;var I=this.levels[_.frag.level].details;I&&this.loadFragment(_.frag,I,_.frag.start)}},w.onHandlerDestroying=function(){this.stopLoad(),d.prototype.onHandlerDestroying.call(this)},w.onHandlerDestroyed=function(){this.state=a.STOPPED,this.hls.off(L.Events.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,d.prototype.onHandlerDestroyed.call(this)},w.loadKey=function(x,_){this.log("Loading key for "+x.sn+" of ["+_.startSN+"-"+_.endSN+"], "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+x.level),this.state=a.KEY_LOADING,this.fragCurrent=x,this.hls.trigger(L.Events.KEY_LOADING,{frag:x})},w.loadFragment=function(x,_,I){this._loadFragForPlayback(x,_,I)},w._loadFragForPlayback=function(x,_,I){var P=this;this._doFragLoad(x,_,I,function(N){if(P.fragContextChanged(x))return P.warn("Fragment "+x.sn+(N.part?" p: "+N.part.index:"")+" of level "+x.level+" was dropped during download."),void P.fragmentTracker.removeFragment(x);x.stats.chunkCount++,P._handleFragmentLoadProgress(N)}).then(function(N){if(N){P.fragLoadError=0;var U=P.state;if(!P.fragContextChanged(x))return"payload"in N&&(P.log("Loaded fragment "+x.sn+" of level "+x.level),P.hls.trigger(L.Events.FRAG_LOADED,N),P.state===a.BACKTRACKING)?(P.fragmentTracker.backtrack(x,N),void P.resetFragmentLoading(x)):void P._handleFragmentLoadComplete(N);(U===a.FRAG_LOADING||U===a.BACKTRACKING||!P.fragCurrent&&U===a.PARSING)&&(P.fragmentTracker.removeFragment(x),P.state=a.IDLE)}}).catch(function(N){P.warn(N),P.resetFragmentLoading(x)})},w.flushMainBuffer=function(x,_,I){if(I===void 0&&(I=null),x-_){var P={startOffset:x,endOffset:_,type:I};this.fragLoadError=0,this.hls.trigger(L.Events.BUFFER_FLUSHING,P)}},w._loadInitSegment=function(x){var _=this;this._doFragLoad(x).then(function(I){if(!I||_.fragContextChanged(x)||!_.levels)throw new Error("init load aborted");return I}).then(function(I){var P=_.hls,N=I.payload,U=x.decryptdata;if(N&&N.byteLength>0&&U&&U.key&&U.iv&&U.method==="AES-128"){var M=self.performance.now();return _.decrypter.webCryptoDecrypt(new Uint8Array(N),U.key.buffer,U.iv.buffer).then(function(B){var G=self.performance.now();return P.trigger(L.Events.FRAG_DECRYPTED,{frag:x,payload:B,stats:{tstart:M,tdecrypt:G}}),I.payload=B,I})}return I}).then(function(I){var P=_.fragCurrent,N=_.hls,U=_.levels;if(!U)throw new Error("init load aborted, missing levels");var M=U[x.level].details;console.assert(M,"Level details are defined when init segment is loaded");var B=x.stats;_.state=a.IDLE,_.fragLoadError=0,x.data=new Uint8Array(I.payload),B.parsing.start=B.buffering.start=self.performance.now(),B.parsing.end=B.buffering.end=self.performance.now(),I.frag===P&&N.trigger(L.Events.FRAG_BUFFERED,{stats:B,frag:P,part:null,id:x.type}),_.tick()}).catch(function(I){_.warn(I),_.resetFragmentLoading(x)})},w.fragContextChanged=function(x){var _=this.fragCurrent;return!x||!_||x.level!==_.level||x.sn!==_.sn||x.urlId!==_.urlId},w.fragBufferedComplete=function(x,_){var I=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+x.type+" sn: "+x.sn+(_?" part: "+_.index:"")+" of "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+x.level+" "+n.default.toString(k.BufferHelper.getBuffered(I))),this.state=a.IDLE,this.tick()},w._handleFragmentLoadComplete=function(x){var _=this.transmuxer;if(_){var I=x.frag,P=x.part,N=x.partsLoaded,U=!N||N.length===0||N.some(function(B){return!B}),M=new T.ChunkMetadata(I.level,I.sn,I.stats.chunkCount+1,0,P?P.index:-1,!U);_.flush(M)}},w._handleFragmentLoadProgress=function(x){},w._doFragLoad=function(x,_,I,P){var N=this;if(I===void 0&&(I=null),!this.levels)throw new Error("frag load aborted, missing levels");if(I=Math.max(x.start,I||0),this.config.lowLatencyMode&&_){var U=_.partList;if(U&&P){I>x.end&&_.fragmentHint&&(x=_.fragmentHint);var M=this.getNextPart(U,x,I);if(M>-1){var B=U[M];return this.log("Loading part sn: "+x.sn+" p: "+B.index+" cc: "+x.cc+" of playlist ["+_.startSN+"-"+_.endSN+"] parts [0-"+M+"-"+(U.length-1)+"] "+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+x.level+", target: "+parseFloat(I.toFixed(3))),this.nextLoadPosition=B.start+B.duration,this.state=a.FRAG_LOADING,this.hls.trigger(L.Events.FRAG_LOADING,{frag:x,part:U[M],targetBufferTime:I}),this.doFragPartsLoad(x,U,M,P).catch(function(G){return N.handleFragLoadError(G)})}if(!x.url||this.loadedEndOfParts(U,I))return Promise.resolve(null)}}return this.log("Loading fragment "+x.sn+" cc: "+x.cc+" "+(_?"of ["+_.startSN+"-"+_.endSN+"] ":"")+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+x.level+", target: "+parseFloat(I.toFixed(3))),Object(C.isFiniteNumber)(x.sn)&&!this.bitrateTest&&(this.nextLoadPosition=x.start+x.duration),this.state=a.FRAG_LOADING,this.hls.trigger(L.Events.FRAG_LOADING,{frag:x,targetBufferTime:I}),this.fragmentLoader.load(x,P).catch(function(G){return N.handleFragLoadError(G)})},w.doFragPartsLoad=function(x,_,I,P){var N=this;return new Promise(function(U,M){var B=[];(function G(K){var z=_[K];N.fragmentLoader.loadPart(x,z,P).then(function(Y){B[z.index]=Y;var q=Y.part;N.hls.trigger(L.Events.FRAG_LOADED,Y);var Z=_[K+1];if(!Z||Z.fragment!==x)return U({frag:x,part:q,partsLoaded:B});G(K+1)}).catch(M)})(I)})},w.handleFragLoadError=function(x){var _=x.data;return _&&_.details===f.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(_.frag,_.part):this.hls.trigger(L.Events.ERROR,_),null},w._handleTransmuxerFlush=function(x){var _=this.getCurrentContext(x);if(_&&this.state===a.PARSING){var I=_.frag,P=_.part,N=_.level,U=self.performance.now();I.stats.parsing.end=U,P&&(P.stats.parsing.end=U),this.updateLevelTiming(I,P,N,x.partial)}else this.fragCurrent||(this.state=a.IDLE)},w.getCurrentContext=function(x){var _=this.levels,I=x.level,P=x.sn,N=x.part;if(!_||!_[I])return this.warn("Levels object was unset while buffering fragment "+P+" of level "+I+". The current chunk will not be buffered."),null;var U=_[I],M=N>-1?Object(E.getPartWith)(U,P,N):null,B=M?M.fragment:Object(E.getFragmentWithSN)(U,P,this.fragCurrent);return B?{frag:B,part:M,level:U}:null},w.bufferFragmentData=function(x,_,I,P){if(x&&this.state===a.PARSING){var N=x.data1,U=x.data2,M=N;if(N&&U&&(M=Object(h.appendUint8Array)(N,U)),M&&M.length){var B={type:x.type,frag:_,part:I,chunkMeta:P,parent:_.type,data:M};this.hls.trigger(L.Events.BUFFER_APPENDING,B),x.dropped&&x.independent&&!I&&this.flushBufferGap(_)}}},w.flushBufferGap=function(x){var _=this.media;if(_)if(k.BufferHelper.isBuffered(_,_.currentTime)){var I=_.currentTime,P=k.BufferHelper.bufferInfo(_,I,0),N=x.duration,U=Math.min(2*this.config.maxFragLookUpTolerance,.25*N),M=Math.max(Math.min(x.start-U,P.end-U),I+U);x.start-M>U&&this.flushMainBuffer(M,x.start)}else this.flushMainBuffer(0,x.start)},w.getFwdBufferInfo=function(x,_){var I=this.config,P=this.getLoadPosition();if(!Object(C.isFiniteNumber)(P))return null;var N=k.BufferHelper.bufferInfo(x,P,I.maxBufferHole);if(N.len===0&&N.nextStart!==void 0){var U=this.fragmentTracker.getBufferedFrag(P,_);if(U&&N.nextStart<U.end)return k.BufferHelper.bufferInfo(x,P,Math.max(N.nextStart,I.maxBufferHole))}return N},w.getMaxBufferLength=function(x){var _,I=this.config;return _=x?Math.max(8*I.maxBufferSize/x,I.maxBufferLength):I.maxBufferLength,Math.min(_,I.maxMaxBufferLength)},w.reduceMaxBufferLength=function(x){var _=this.config,I=x||_.maxBufferLength;return _.maxMaxBufferLength>=I&&(_.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+_.maxMaxBufferLength+"s"),!0)},w.getNextFragment=function(x,_){var I,P,N=_.fragments,U=N.length;if(!U)return null;var M,B=this.config,G=N[0].start;if(_.live){var K=B.initialLiveManifestSize;if(U<K)return this.warn("Not enough fragments to start playback (have: "+U+", need: "+K+")"),null;_.PTSKnown||this.startFragRequested||this.startPosition!==-1||(M=this.getInitialLiveFragment(_,N),this.startPosition=M?this.hls.liveSyncPosition||M.start:x)}else x<=G&&(M=N[0]);if(!M){var z=B.lowLatencyMode?_.partEnd:_.fragmentEnd;M=this.getFragmentAtPosition(x,z,_)}return(I=M)===null||I===void 0||!I.initSegment||(P=M)!==null&&P!==void 0&&P.initSegment.data||this.bitrateTest||(M=M.initSegment),M},w.getNextPart=function(x,_,I){for(var P=-1,N=!1,U=!0,M=0,B=x.length;M<B;M++){var G=x[M];if(U=U&&!G.independent,P>-1&&I<G.start)break;var K=G.loaded;!K&&(N||G.independent||U)&&G.fragment===_&&(P=M),N=K}return P},w.loadedEndOfParts=function(x,_){var I=x[x.length-1];return I&&_>I.start&&I.loaded},w.getInitialLiveFragment=function(x,_){var I=this.fragPrevious,P=null;if(I){if(x.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+I.programDateTime),P=Object(b.findFragmentByPDT)(_,I.endProgramDateTime,this.config.maxFragLookUpTolerance)),!P){var N=I.sn+1;if(N>=x.startSN&&N<=x.endSN){var U=_[N-x.startSN];I.cc===U.cc&&(P=U,this.log("Live playlist, switching playlist, load frag with next SN: "+P.sn))}P||(P=Object(b.findFragWithCC)(_,I.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+P.sn)}}else{var M=this.hls.liveSyncPosition;M!==null&&(P=this.getFragmentAtPosition(M,this.bitrateTest?x.fragmentEnd:x.edge,x))}return P},w.getFragmentAtPosition=function(x,_,I){var P,N=this.config,U=this.fragPrevious,M=I.fragments,B=I.endSN,G=I.fragmentHint,K=N.maxFragLookUpTolerance,z=!!(N.lowLatencyMode&&I.partList&&G);if(z&&G&&!this.bitrateTest&&(M=M.concat(G),B=G.sn),x<_){var Y=x>_-K?0:K;P=Object(b.findFragmentByPTS)(U,M,x,Y)}else P=M[M.length-1];if(P){var q=P.sn-I.startSN,Z=U&&P.level===U.level,ee=M[q+1];if(this.fragmentTracker.getState(P)===v.FragmentState.BACKTRACKED){P=null;for(var te=q;M[te]&&this.fragmentTracker.getState(M[te])===v.FragmentState.BACKTRACKED;)P=U?M[te--]:M[--te];P||(P=ee)}else U&&P.sn===U.sn&&!z&&Z&&(P.sn<B&&this.fragmentTracker.getState(ee)!==v.FragmentState.OK?(this.log("SN "+P.sn+" just loaded, load next one: "+ee.sn),P=ee):P=null)}return P},w.synchronizeToLiveEdge=function(x){var _=this.config,I=this.media;if(I){var P=this.hls.liveSyncPosition,N=I.currentTime,U=x.fragments[0].start,M=x.edge,B=N>=U-_.maxFragLookUpTolerance&&N<=M;if(P!==null&&I.duration>P&&(N<P||!B)){var G=_.liveMaxLatencyDuration!==void 0?_.liveMaxLatencyDuration:_.liveMaxLatencyDurationCount*x.targetduration;(!B&&I.readyState<4||N<M-G)&&(this.loadedmetadata||(this.nextLoadPosition=P),I.readyState&&(this.warn("Playback: "+N.toFixed(3)+" is located too far from the end of live sliding playlist: "+M+", reset currentTime to : "+P.toFixed(3)),I.currentTime=P))}}},w.alignPlaylists=function(x,_){var I=this.levels,P=this.levelLastLoaded,N=this.fragPrevious,U=P!==null?I[P]:null,M=x.fragments.length;if(!M)return this.warn("No fragments in live playlist"),0;var B=x.fragments[0].start,G=!_,K=x.alignedSliding&&Object(C.isFiniteNumber)(B);if(G||!K&&!B){Object(p.alignStream)(N,U,x);var z=x.fragments[0].start;return this.log("Live playlist sliding: "+z.toFixed(2)+" start-sn: "+(_?_.startSN:"na")+"->"+x.startSN+" prev-sn: "+(N?N.sn:"na")+" fragments: "+M),z}return B},w.waitForCdnTuneIn=function(x){return x.live&&x.canBlockReload&&x.tuneInGoal>Math.max(x.partHoldBack,3*x.partTarget)},w.setStartPosition=function(x,_){var I=this.startPosition;if(I<_&&(I=-1),I===-1||this.lastCurrentTime===-1){var P=x.startTimeOffset;Object(C.isFiniteNumber)(P)?(I=_+P,P<0&&(I+=x.totalduration),I=Math.min(Math.max(_,I),_+x.totalduration),this.log("Start time offset "+P+" found in playlist, adjust startPosition to "+I),this.startPosition=I):x.live?I=this.hls.liveSyncPosition||_:this.startPosition=I=0,this.lastCurrentTime=I}this.nextLoadPosition=I},w.getLoadPosition=function(){var x=this.media,_=0;return this.loadedmetadata&&x?_=x.currentTime:this.nextLoadPosition&&(_=this.nextLoadPosition),_},w.handleFragLoadAborted=function(x,_){this.transmuxer&&x.sn!=="initSegment"&&x.stats.aborted&&(this.warn("Fragment "+x.sn+(_?" part"+_.index:"")+" of level "+x.level+" was aborted"),this.resetFragmentLoading(x))},w.resetFragmentLoading=function(x){this.fragCurrent&&this.fragContextChanged(x)||(this.state=a.IDLE)},w.onFragmentOrKeyLoadError=function(x,_){if(!_.fatal){var I=_.frag;if(I&&I.type===x){var P=this.fragCurrent;console.assert(P&&I.sn===P.sn&&I.level===P.level&&I.urlId===P.urlId,"Frag load error must match current frag to retry");var N=this.config;if(this.fragLoadError+1<=N.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(I.level))return;var U=Math.min(Math.pow(2,this.fragLoadError)*N.fragLoadingRetryDelay,N.fragLoadingMaxRetryTimeout);this.warn("Fragment "+I.sn+" of "+x+" "+I.level+" failed to load, retrying in "+U+"ms"),this.retryDate=self.performance.now()+U,this.fragLoadError++,this.state=a.FRAG_LOADING_WAITING_RETRY}else _.levelRetry?(x===t.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=a.IDLE):(D.logger.error(_.details+" reaches max retry, redispatch as fatal ..."),_.fatal=!0,this.hls.stopLoad(),this.state=a.ERROR)}}},w.afterBufferFlushed=function(x,_,I){if(x){var P=k.BufferHelper.getBuffered(x);this.fragmentTracker.detectEvictedFragments(_,P,I),this.state===a.ENDED&&this.resetLoadingState()}},w.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=a.IDLE},w.resetLiveStartWhenNotLoaded=function(x){if(!this.loadedmetadata){this.startFragRequested=!1;var _=this.levels?this.levels[x].details:null;if(_!=null&&_.live)return this.startPosition=-1,this.setStartPosition(_,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},w.updateLevelTiming=function(x,_,I,P){var N=this,U=I.details;console.assert(!!U,"level.details must be defined"),Object.keys(x.elementaryStreams).reduce(function(M,B){var G=x.elementaryStreams[B];if(G){var K=G.endPTS-G.startPTS;if(K<=0)return N.warn("Could not parse fragment "+x.sn+" "+B+" duration reliably ("+K+") resetting transmuxer to fallback to playlist timing"),N.resetTransmuxer(),M||!1;var z=P?0:Object(E.updateFragPTSDTS)(U,x,G.startPTS,G.endPTS,G.startDTS,G.endDTS);return N.hls.trigger(L.Events.LEVEL_PTS_UPDATED,{details:U,level:I,drift:z,type:B,frag:x,start:G.startPTS,end:G.endPTS}),!0}return M},!1)?(this.state=a.PARSED,this.hls.trigger(L.Events.FRAG_PARSED,{frag:x,part:_})):this.resetLoadingState()},w.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},m=i,(S=[{key:"state",get:function(){return this._state},set:function(x){var _=this._state;_!==x&&(this._state=x,this.log(_+"->"+x))}}])&&s(m.prototype,S),i}(y.default)},"./src/controller/buffer-controller.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return b});var C=c("./src/polyfills/number.ts"),y=c("./src/events.ts"),v=c("./src/utils/logger.ts"),k=c("./src/errors.ts"),D=c("./src/utils/buffer-helper.ts"),L=c("./src/utils/mediasource-helper.ts"),f=c("./src/loader/fragment.ts"),T=c("./src/controller/buffer-operation-queue.ts"),h=Object(L.getMediaSource)(),p=/([ha]vc.)(?:\.[^.,]+)+/,b=function(){function E(e){var n=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var t=n.hls,s=n.media,g=n.mediaSource;v.logger.log("[buffer-controller]: Media source opened"),s&&(n.updateMediaElementDuration(),t.trigger(y.Events.MEDIA_ATTACHED,{media:s})),g&&g.removeEventListener("sourceopen",n._onMediaSourceOpen),n.checkPendingTracks()},this._onMediaSourceClose=function(){v.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){v.logger.log("[buffer-controller]: Media source ended")},this.hls=e,this._initSourceBuffer(),this.registerListeners()}var u=E.prototype;return u.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},u.destroy=function(){this.unregisterListeners(),this.details=null},u.registerListeners=function(){var e=this.hls;e.on(y.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(y.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(y.Events.BUFFER_RESET,this.onBufferReset,this),e.on(y.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.on(y.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(y.Events.BUFFER_EOS,this.onBufferEos,this),e.on(y.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(y.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(y.Events.FRAG_PARSED,this.onFragParsed,this),e.on(y.Events.FRAG_CHANGED,this.onFragChanged,this)},u.unregisterListeners=function(){var e=this.hls;e.off(y.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(y.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(y.Events.BUFFER_RESET,this.onBufferReset,this),e.off(y.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.off(y.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(y.Events.BUFFER_EOS,this.onBufferEos,this),e.off(y.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(y.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(y.Events.FRAG_PARSED,this.onFragParsed,this),e.off(y.Events.FRAG_CHANGED,this.onFragChanged,this)},u._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new T.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},u.onManifestParsed=function(e,n){var t=2;(n.audio&&!n.video||!n.altAudio)&&(t=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=t,this.details=null,v.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},u.onMediaAttaching=function(e,n){var t=this.media=n.media;if(t&&h){var s=this.mediaSource=new h;s.addEventListener("sourceopen",this._onMediaSourceOpen),s.addEventListener("sourceended",this._onMediaSourceEnded),s.addEventListener("sourceclose",this._onMediaSourceClose),t.src=self.URL.createObjectURL(s),this._objectUrl=t.src}},u.onMediaDetaching=function(){var e=this.media,n=this.mediaSource,t=this._objectUrl;if(n){if(v.logger.log("[buffer-controller]: media source detaching"),n.readyState==="open")try{n.endOfStream()}catch(s){v.logger.warn("[buffer-controller]: onMediaDetaching: "+s.message+" while calling endOfStream")}this.onBufferReset(),n.removeEventListener("sourceopen",this._onMediaSourceOpen),n.removeEventListener("sourceended",this._onMediaSourceEnded),n.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(t&&self.URL.revokeObjectURL(t),e.src===t?(e.removeAttribute("src"),e.load()):v.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(y.Events.MEDIA_DETACHED,void 0)},u.onBufferReset=function(){var e=this;this.getSourceBufferTypes().forEach(function(n){var t=e.sourceBuffer[n];try{t&&(e.removeBufferListeners(n),e.mediaSource&&e.mediaSource.removeSourceBuffer(t),e.sourceBuffer[n]=void 0)}catch(s){v.logger.warn("[buffer-controller]: Failed to reset the "+n+" buffer",s)}}),this._initSourceBuffer()},u.onBufferCodecs=function(e,n){var t=this,s=this.getSourceBufferTypes().length;Object.keys(n).forEach(function(g){if(s){var a=t.tracks[g];if(a&&typeof a.buffer.changeType=="function"){var o=n[g],d=o.codec,r=o.levelCodec,l=o.container;if((a.levelCodec||a.codec).replace(p,"$1")!==(r||d).replace(p,"$1")){var i=l+";codecs="+(r||d);t.appendChangeType(g,i)}}}else t.pendingTracks[g]=n[g]}),s||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},u.appendChangeType=function(e,n){var t=this,s=this.operationQueue,g={execute:function(){var a=t.sourceBuffer[e];a&&(v.logger.log("[buffer-controller]: changing "+e+" sourceBuffer type to "+n),a.changeType(n)),s.shiftAndExecuteNext(e)},onStart:function(){},onComplete:function(){},onError:function(a){v.logger.warn("[buffer-controller]: Failed to change "+e+" SourceBuffer type",a)}};s.append(g,e)},u.onBufferAppending=function(e,n){var t=this,s=this.hls,g=this.operationQueue,a=this.tracks,o=n.data,d=n.type,r=n.frag,l=n.part,i=n.chunkMeta,m=i.buffering[d],S=self.performance.now();m.start=S;var w=r.stats.buffering,x=l?l.stats.buffering:null;w.start===0&&(w.start=S),x&&x.start===0&&(x.start=S);var _=a.audio,I=d==="audio"&&i.id===1&&(_==null?void 0:_.container)==="audio/mpeg",P={execute:function(){if(m.executeStart=self.performance.now(),I){var N=t.sourceBuffer[d];if(N){var U=r.start-N.timestampOffset;Math.abs(U)>=.1&&(v.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+r.start+" (delta: "+U+") sn: "+r.sn+")"),N.timestampOffset=r.start)}}t.appendExecutor(o,d)},onStart:function(){},onComplete:function(){var N=self.performance.now();m.executeEnd=m.end=N,w.first===0&&(w.first=N),x&&x.first===0&&(x.first=N);var U=t.sourceBuffer,M={};for(var B in U)M[B]=D.BufferHelper.getBuffered(U[B]);t.appendError=0,t.hls.trigger(y.Events.BUFFER_APPENDED,{type:d,frag:r,part:l,chunkMeta:i,parent:r.type,timeRanges:M})},onError:function(N){v.logger.error("[buffer-controller]: Error encountered while trying to append to the "+d+" SourceBuffer",N);var U={type:k.ErrorTypes.MEDIA_ERROR,parent:r.type,details:k.ErrorDetails.BUFFER_APPEND_ERROR,err:N,fatal:!1};N.code===DOMException.QUOTA_EXCEEDED_ERR?U.details=k.ErrorDetails.BUFFER_FULL_ERROR:(t.appendError++,U.details=k.ErrorDetails.BUFFER_APPEND_ERROR,t.appendError>s.config.appendErrorMaxRetry&&(v.logger.error("[buffer-controller]: Failed "+s.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),U.fatal=!0)),s.trigger(y.Events.ERROR,U)}};g.append(P,d)},u.onBufferFlushing=function(e,n){var t=this,s=this.operationQueue,g=function(a){return{execute:t.removeExecutor.bind(t,a,n.startOffset,n.endOffset),onStart:function(){},onComplete:function(){t.hls.trigger(y.Events.BUFFER_FLUSHED,{type:a})},onError:function(o){v.logger.warn("[buffer-controller]: Failed to remove from "+a+" SourceBuffer",o)}}};n.type?s.append(g(n.type),n.type):this.getSourceBufferTypes().forEach(function(a){s.append(g(a),a)})},u.onFragParsed=function(e,n){var t=this,s=n.frag,g=n.part,a=[],o=g?g.elementaryStreams:s.elementaryStreams;o[f.ElementaryStreamTypes.AUDIOVIDEO]?a.push("audiovideo"):(o[f.ElementaryStreamTypes.AUDIO]&&a.push("audio"),o[f.ElementaryStreamTypes.VIDEO]&&a.push("video")),a.length===0&&v.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+s.type+" level: "+s.level+" sn: "+s.sn),this.blockBuffers(function(){var d=self.performance.now();s.stats.buffering.end=d,g&&(g.stats.buffering.end=d);var r=g?g.stats:s.stats;t.hls.trigger(y.Events.FRAG_BUFFERED,{frag:s,part:g,stats:r,id:s.type})},a)},u.onFragChanged=function(e,n){this.flushBackBuffer()},u.onBufferEos=function(e,n){var t=this;this.getSourceBufferTypes().reduce(function(s,g){var a=t.sourceBuffer[g];return n.type&&n.type!==g||a&&!a.ended&&(a.ended=!0,v.logger.log("[buffer-controller]: "+g+" sourceBuffer now EOS")),s&&!(a&&!a.ended)},!0)&&this.blockBuffers(function(){var s=t.mediaSource;s&&s.readyState==="open"&&s.endOfStream()})},u.onLevelUpdated=function(e,n){var t=n.details;t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},u.flushBackBuffer=function(){var e=this.hls,n=this.details,t=this.media,s=this.sourceBuffer;if(t&&n!==null){var g=this.getSourceBufferTypes();if(g.length){var a=n.live&&e.config.liveBackBufferLength!==null?e.config.liveBackBufferLength:e.config.backBufferLength;if(Object(C.isFiniteNumber)(a)&&!(a<0)){var o=t.currentTime,d=n.levelTargetDuration,r=Math.max(a,d),l=Math.floor(o/d)*d-r;g.forEach(function(i){var m=s[i];if(m){var S=D.BufferHelper.getBuffered(m);S.length>0&&l>S.start(0)&&(e.trigger(y.Events.BACK_BUFFER_REACHED,{bufferEnd:l}),n.live&&e.trigger(y.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:l}),e.trigger(y.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:l,type:i}))}})}}}},u.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&this.mediaSource.readyState==="open"){var e=this.details,n=this.hls,t=this.media,s=this.mediaSource,g=e.fragments[0].start+e.totalduration,a=t.duration,o=Object(C.isFiniteNumber)(s.duration)?s.duration:0;e.live&&n.config.liveDurationInfinity?(v.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),s.duration=1/0,this.updateSeekableRange(e)):(g>o&&g>a||!Object(C.isFiniteNumber)(a))&&(v.logger.log("[buffer-controller]: Updating Media Source duration to "+g.toFixed(3)),s.duration=g)}},u.updateSeekableRange=function(e){var n=this.mediaSource,t=e.fragments;if(t.length&&e.live&&n!=null&&n.setLiveSeekableRange){var s=Math.max(0,t[0].start),g=Math.max(s,s+e.totalduration);n.setLiveSeekableRange(s,g)}},u.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,n=this.operationQueue,t=this.pendingTracks,s=Object.keys(t).length;if(s&&!e||s===2){this.createSourceBuffers(t),this.pendingTracks={};var g=this.getSourceBufferTypes();if(g.length===0)return void this.hls.trigger(y.Events.ERROR,{type:k.ErrorTypes.MEDIA_ERROR,details:k.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});g.forEach(function(a){n.executeNext(a)})}},u.createSourceBuffers=function(e){var n=this.sourceBuffer,t=this.mediaSource;if(!t)throw Error("createSourceBuffers called when mediaSource was null");var s=0;for(var g in e)if(!n[g]){var a=e[g];if(!a)throw Error("source buffer exists for track "+g+", however track does not");var o=a.levelCodec||a.codec,d=a.container+";codecs="+o;v.logger.log("[buffer-controller]: creating sourceBuffer("+d+")");try{var r=n[g]=t.addSourceBuffer(d),l=g;this.addBufferListener(l,"updatestart",this._onSBUpdateStart),this.addBufferListener(l,"updateend",this._onSBUpdateEnd),this.addBufferListener(l,"error",this._onSBUpdateError),this.tracks[g]={buffer:r,codec:o,container:a.container,levelCodec:a.levelCodec,id:a.id},s++}catch(i){v.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+i.message),this.hls.trigger(y.Events.ERROR,{type:k.ErrorTypes.MEDIA_ERROR,details:k.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:i,mimeType:d})}}s&&this.hls.trigger(y.Events.BUFFER_CREATED,{tracks:this.tracks})},u._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},u._onSBUpdateEnd=function(e){var n=this.operationQueue;n.current(e).onComplete(),n.shiftAndExecuteNext(e)},u._onSBUpdateError=function(e,n){v.logger.error("[buffer-controller]: "+e+" SourceBuffer error",n),this.hls.trigger(y.Events.ERROR,{type:k.ErrorTypes.MEDIA_ERROR,details:k.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var t=this.operationQueue.current(e);t&&t.onError(n)},u.removeExecutor=function(e,n,t){var s=this.media,g=this.mediaSource,a=this.operationQueue,o=this.sourceBuffer[e];if(!s||!g||!o)return v.logger.warn("[buffer-controller]: Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void a.shiftAndExecuteNext(e);var d=Object(C.isFiniteNumber)(s.duration)?s.duration:1/0,r=Object(C.isFiniteNumber)(g.duration)?g.duration:1/0,l=Math.max(0,n),i=Math.min(t,d,r);i>l?(v.logger.log("[buffer-controller]: Removing ["+l+","+i+"] from the "+e+" SourceBuffer"),console.assert(!o.updating,e+" sourceBuffer must not be updating"),o.remove(l,i)):a.shiftAndExecuteNext(e)},u.appendExecutor=function(e,n){var t=this.operationQueue,s=this.sourceBuffer[n];if(!s)return v.logger.warn("[buffer-controller]: Attempting to append to the "+n+" SourceBuffer, but it does not exist"),void t.shiftAndExecuteNext(n);s.ended=!1,console.assert(!s.updating,n+" sourceBuffer must not be updating"),s.appendBuffer(e)},u.blockBuffers=function(e,n){var t=this;if(n===void 0&&(n=this.getSourceBufferTypes()),!n.length)return v.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(e);var s=this.operationQueue,g=n.map(function(a){return s.appendBlocker(a)});Promise.all(g).then(function(){e(),n.forEach(function(a){var o=t.sourceBuffer[a];o&&o.updating||s.shiftAndExecuteNext(a)})})},u.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},u.addBufferListener=function(e,n,t){var s=this.sourceBuffer[e];if(s){var g=t.bind(this,e);this.listeners[e].push({event:n,listener:g}),s.addEventListener(n,g)}},u.removeBufferListeners=function(e){var n=this.sourceBuffer[e];n&&this.listeners[e].forEach(function(t){n.removeEventListener(t.event,t.listener)})},E}()},"./src/controller/buffer-operation-queue.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return y});var C=c("./src/utils/logger.ts"),y=function(){function v(D){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=D}var k=v.prototype;return k.append=function(D,L){var f=this.queues[L];f.push(D),f.length===1&&this.buffers[L]&&this.executeNext(L)},k.insertAbort=function(D,L){this.queues[L].unshift(D),this.executeNext(L)},k.appendBlocker=function(D){var L,f=new Promise(function(h){L=h}),T={execute:L,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(T,D),f},k.executeNext=function(D){var L=this.buffers,f=this.queues,T=L[D],h=f[D];if(h.length){var p=h[0];try{p.execute()}catch(b){C.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),p.onError(b),T&&T.updating||(h.shift(),this.executeNext(D))}}},k.shiftAndExecuteNext=function(D){this.queues[D].shift(),this.executeNext(D)},k.current=function(D){return this.queues[D][0]},v}()},"./src/controller/cap-level-controller.ts":function(R,A,c){c.r(A);var C=c("./src/events.ts");function y(k,D){for(var L=0;L<D.length;L++){var f=D[L];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(k,f.key,f)}}var v=function(){function k(h){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=h,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var D,L,f,T=k.prototype;return T.setStreamController=function(h){this.streamController=h},T.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},T.registerListeners=function(){var h=this.hls;h.on(C.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),h.on(C.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),h.on(C.Events.MANIFEST_PARSED,this.onManifestParsed,this),h.on(C.Events.BUFFER_CODECS,this.onBufferCodecs,this),h.on(C.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},T.unregisterListener=function(){var h=this.hls;h.off(C.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),h.off(C.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),h.off(C.Events.MANIFEST_PARSED,this.onManifestParsed,this),h.off(C.Events.BUFFER_CODECS,this.onBufferCodecs,this),h.off(C.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},T.onFpsDropLevelCapping=function(h,p){k.isLevelAllowed(p.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(p.droppedLevel)},T.onMediaAttaching=function(h,p){this.media=p.media instanceof HTMLVideoElement?p.media:null},T.onManifestParsed=function(h,p){var b=this.hls;this.restrictedLevels=[],this.firstLevel=p.firstLevel,b.config.capLevelToPlayerSize&&p.video&&this.startCapping()},T.onBufferCodecs=function(h,p){this.hls.config.capLevelToPlayerSize&&p.video&&this.startCapping()},T.onMediaDetaching=function(){this.stopCapping()},T.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var h=this.hls.levels;if(h.length){var p=this.hls;p.autoLevelCapping=this.getMaxLevel(h.length-1),p.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=p.autoLevelCapping}}},T.getMaxLevel=function(h){var p=this,b=this.hls.levels;if(!b.length)return-1;var E=b.filter(function(u,e){return k.isLevelAllowed(e,p.restrictedLevels)&&e<=h});return this.clientRect=null,k.getMaxLevelByMediaSize(E,this.mediaWidth,this.mediaHeight)},T.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},T.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},T.getDimensions=function(){if(this.clientRect)return this.clientRect;var h=this.media,p={width:0,height:0};if(h){var b=h.getBoundingClientRect();p.width=b.width,p.height=b.height,p.width||p.height||(p.width=b.right-b.left||h.width||0,p.height=b.bottom-b.top||h.height||0)}return this.clientRect=p,p},k.isLevelAllowed=function(h,p){return p===void 0&&(p=[]),p.indexOf(h)===-1},k.getMaxLevelByMediaSize=function(h,p,b){if(!h||!h.length)return-1;for(var E,u,e=h.length-1,n=0;n<h.length;n+=1){var t=h[n];if((t.width>=p||t.height>=b)&&(E=t,!(u=h[n+1])||E.width!==u.width||E.height!==u.height)){e=n;break}}return e},D=k,f=[{key:"contentScaleFactor",get:function(){var h=1;try{h=self.devicePixelRatio}catch{}return h}}],(L=[{key:"mediaWidth",get:function(){return this.getDimensions().width*k.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*k.contentScaleFactor}}])&&y(D.prototype,L),f&&y(D,f),k}();A.default=v},"./src/controller/eme-controller.ts":function(R,A,c){c.r(A);var C=c("./src/events.ts"),y=c("./src/errors.ts"),v=c("./src/utils/logger.ts"),k=c("./src/utils/mediakeys-helper.ts");function D(f,T){for(var h=0;h<T.length;h++){var p=T[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(f,p.key,p)}}var L=function(){function f(b){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=b,this._config=b.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var T,h,p=f.prototype;return p.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},p._registerListeners=function(){this.hls.on(C.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(C.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(C.Events.MANIFEST_PARSED,this.onManifestParsed,this)},p._unregisterListeners=function(){this.hls.off(C.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(C.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(C.Events.MANIFEST_PARSED,this.onManifestParsed,this)},p.getLicenseServerUrl=function(b){switch(b){case k.KeySystems.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+b+'"')},p._attemptKeySystemAccess=function(b,E,u){var e=this,n=function(s,g,a,o){switch(s){case k.KeySystems.WIDEVINE:return function(d,r,l){var i={audioCapabilities:[],videoCapabilities:[]};return d.forEach(function(m){i.audioCapabilities.push({contentType:'audio/mp4; codecs="'+m+'"',robustness:l.audioRobustness||""})}),r.forEach(function(m){i.videoCapabilities.push({contentType:'video/mp4; codecs="'+m+'"',robustness:l.videoRobustness||""})}),[i]}(g,a,o);default:throw new Error("Unknown key-system: "+s)}}(b,E,u,this._drmSystemOptions);v.logger.log("Requesting encrypted media key-system access");var t=this.requestMediaKeySystemAccess(b,n);this.mediaKeysPromise=t.then(function(s){return e._onMediaKeySystemAccessObtained(b,s)}),t.catch(function(s){v.logger.error('Failed to obtain key-system "'+b+'" access:',s)})},p._onMediaKeySystemAccessObtained=function(b,E){var u=this;v.logger.log('Access for key-system "'+b+'" obtained');var e={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:E,mediaKeySystemDomain:b};this._mediaKeysList.push(e);var n=Promise.resolve().then(function(){return E.createMediaKeys()}).then(function(t){return e.mediaKeys=t,v.logger.log('Media-keys created for key-system "'+b+'"'),u._onMediaKeysCreated(),t});return n.catch(function(t){v.logger.error("Failed to create media-keys:",t)}),n},p._onMediaKeysCreated=function(){var b=this;this._mediaKeysList.forEach(function(E){E.mediaKeysSession||(E.mediaKeysSession=E.mediaKeys.createSession(),b._onNewMediaKeySession(E.mediaKeysSession))})},p._onNewMediaKeySession=function(b){var E=this;v.logger.log("New key-system session "+b.sessionId),b.addEventListener("message",function(u){E._onKeySessionMessage(b,u.message)},!1)},p._onKeySessionMessage=function(b,E){v.logger.log("Got EME message event, creating license request"),this._requestLicense(E,function(u){v.logger.log("Received license data (length: "+(u&&u.byteLength)+"), updating key-session"),b.update(u)})},p.onMediaEncrypted=function(b){var E=this;if(v.logger.log('Media is encrypted using "'+b.initDataType+'" init data type'),!this.mediaKeysPromise)return v.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(C.Events.ERROR,{type:y.ErrorTypes.KEY_SYSTEM_ERROR,details:y.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var u=function(e){E._media&&(E._attemptSetMediaKeys(e),E._generateRequestWithPreferredKeySession(b.initDataType,b.initData))};this.mediaKeysPromise.then(u).catch(u)},p._attemptSetMediaKeys=function(b){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var E=this._mediaKeysList[0];if(!E||!E.mediaKeys)return v.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(C.Events.ERROR,{type:y.ErrorTypes.KEY_SYSTEM_ERROR,details:y.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});v.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(E.mediaKeys),this._hasSetMediaKeys=!0}},p._generateRequestWithPreferredKeySession=function(b,E){var u=this,e=this._mediaKeysList[0];if(!e)return v.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(C.Events.ERROR,{type:y.ErrorTypes.KEY_SYSTEM_ERROR,details:y.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(e.mediaKeysSessionInitialized)v.logger.warn("Key-Session already initialized but requested again");else{var n=e.mediaKeysSession;if(!n)return v.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(C.Events.ERROR,{type:y.ErrorTypes.KEY_SYSTEM_ERROR,details:y.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!E)return v.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(C.Events.ERROR,{type:y.ErrorTypes.KEY_SYSTEM_ERROR,details:y.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});v.logger.log('Generating key-session request for "'+b+'" init data type'),e.mediaKeysSessionInitialized=!0,n.generateRequest(b,E).then(function(){v.logger.debug("Key-session generation succeeded")}).catch(function(t){v.logger.error("Error generating key-session request:",t),u.hls.trigger(C.Events.ERROR,{type:y.ErrorTypes.KEY_SYSTEM_ERROR,details:y.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})}},p._createLicenseXhr=function(b,E,u){var e=new XMLHttpRequest;e.responseType="arraybuffer",e.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,e,b,E,u);var n=this._licenseXhrSetup;if(n)try{n.call(this.hls,e,b),n=void 0}catch(t){v.logger.error(t)}try{e.readyState||e.open("POST",b,!0),n&&n.call(this.hls,e,b)}catch(t){throw new Error("issue setting up KeySystem license XHR "+t)}return e},p._onLicenseRequestReadyStageChange=function(b,E,u,e){switch(b.readyState){case 4:if(b.status===200){this._requestLicenseFailureCount=0,v.logger.log("License request succeeded");var n=b.response,t=this._licenseResponseCallback;if(t)try{n=t.call(this.hls,b,E)}catch(g){v.logger.error(g)}e(n)}else{if(v.logger.error("License Request XHR failed ("+E+"). Status: "+b.status+" ("+b.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(C.Events.ERROR,{type:y.ErrorTypes.KEY_SYSTEM_ERROR,details:y.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var s=3-this._requestLicenseFailureCount+1;v.logger.warn("Retrying license request, "+s+" attempts left"),this._requestLicense(u,e)}}},p._generateLicenseRequestChallenge=function(b,E){switch(b.mediaKeySystemDomain){case k.KeySystems.WIDEVINE:return E}throw new Error("unsupported key-system: "+b.mediaKeySystemDomain)},p._requestLicense=function(b,E){v.logger.log("Requesting content license for key-system");var u=this._mediaKeysList[0];if(!u)return v.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(C.Events.ERROR,{type:y.ErrorTypes.KEY_SYSTEM_ERROR,details:y.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var e=this.getLicenseServerUrl(u.mediaKeySystemDomain),n=this._createLicenseXhr(e,b,E);v.logger.log("Sending license request to URL: "+e);var t=this._generateLicenseRequestChallenge(u,b);n.send(t)}catch(s){v.logger.error("Failure requesting DRM license: "+s),this.hls.trigger(C.Events.ERROR,{type:y.ErrorTypes.KEY_SYSTEM_ERROR,details:y.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},p.onMediaAttached=function(b,E){if(this._emeEnabled){var u=E.media;this._media=u,u.addEventListener("encrypted",this._onMediaEncrypted)}},p.onMediaDetached=function(){var b=this._media,E=this._mediaKeysList;b&&(b.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(E.map(function(u){if(u.mediaKeysSession)return u.mediaKeysSession.close().catch(function(){})})).then(function(){return b.setMediaKeys(null)}).catch(function(){}))},p.onManifestParsed=function(b,E){if(this._emeEnabled){var u=E.levels.map(function(n){return n.audioCodec}).filter(function(n){return!!n}),e=E.levels.map(function(n){return n.videoCodec}).filter(function(n){return!!n});this._attemptKeySystemAccess(k.KeySystems.WIDEVINE,u,e)}},T=f,(h=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&D(T.prototype,h),f}();A.default=L},"./src/controller/fps-controller.ts":function(R,A,c){c.r(A);var C=c("./src/events.ts"),y=c("./src/utils/logger.ts"),v=function(){function k(L){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=L,this.registerListeners()}var D=k.prototype;return D.setStreamController=function(L){this.streamController=L},D.registerListeners=function(){this.hls.on(C.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},D.unregisterListeners=function(){this.hls.off(C.Events.MEDIA_ATTACHING,this.onMediaAttaching)},D.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},D.onMediaAttaching=function(L,f){var T=this.hls.config;if(T.capLevelOnFPSDrop){var h=f.media instanceof self.HTMLVideoElement?f.media:null;this.media=h,h&&typeof h.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),T.fpsDroppedMonitoringPeriod)}},D.checkFPS=function(L,f,T){var h=performance.now();if(f){if(this.lastTime){var p=h-this.lastTime,b=T-this.lastDroppedFrames,E=f-this.lastDecodedFrames,u=1e3*b/p,e=this.hls;if(e.trigger(C.Events.FPS_DROP,{currentDropped:b,currentDecoded:E,totalDroppedFrames:T}),u>0&&b>e.config.fpsDroppedMonitoringThreshold*E){var n=e.currentLevel;y.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+n),n>0&&(e.autoLevelCapping===-1||e.autoLevelCapping>=n)&&(n-=1,e.trigger(C.Events.FPS_DROP_LEVEL_CAPPING,{level:n,droppedLevel:e.currentLevel}),e.autoLevelCapping=n,this.streamController.nextLevelSwitch())}}this.lastTime=h,this.lastDroppedFrames=T,this.lastDecodedFrames=f}},D.checkFPSInterval=function(){var L=this.media;if(L)if(this.isVideoPlaybackQualityAvailable){var f=L.getVideoPlaybackQuality();this.checkFPS(L,f.totalVideoFrames,f.droppedVideoFrames)}else this.checkFPS(L,L.webkitDecodedFrameCount,L.webkitDroppedFrameCount)},k}();A.default=v},"./src/controller/fragment-finders.ts":function(R,A,c){c.r(A),c.d(A,"findFragmentByPDT",function(){return v}),c.d(A,"findFragmentByPTS",function(){return k}),c.d(A,"fragmentWithinToleranceTest",function(){return D}),c.d(A,"pdtWithinToleranceTest",function(){return L}),c.d(A,"findFragWithCC",function(){return f});var C=c("./src/polyfills/number.ts"),y=c("./src/utils/binary-search.ts");function v(T,h,p){if(h===null||!Array.isArray(T)||!T.length||!Object(C.isFiniteNumber)(h)||h<(T[0].programDateTime||0)||h>=(T[T.length-1].endProgramDateTime||0))return null;p=p||0;for(var b=0;b<T.length;++b){var E=T[b];if(L(h,p,E))return E}return null}function k(T,h,p,b){p===void 0&&(p=0),b===void 0&&(b=0);var E=null;if(T?E=h[T.sn-h[0].sn+1]||null:p===0&&h[0].start===0&&(E=h[0]),E&&D(p,b,E)===0)return E;var u=y.default.search(h,D.bind(null,p,b));return u||E}function D(T,h,p){T===void 0&&(T=0),h===void 0&&(h=0);var b=Math.min(h,p.duration+(p.deltaPTS?p.deltaPTS:0));return p.start+p.duration-b<=T?1:p.start-b>T&&p.start?-1:0}function L(T,h,p){var b=1e3*Math.min(h,p.duration+(p.deltaPTS?p.deltaPTS:0));return(p.endProgramDateTime||0)-b>T}function f(T,h){return y.default.search(T,function(p){return p.cc<h?1:p.cc>h?-1:0})}},"./src/controller/fragment-tracker.ts":function(R,A,c){c.r(A),c.d(A,"FragmentState",function(){return C}),c.d(A,"FragmentTracker",function(){return k});var C,y=c("./src/events.ts"),v=c("./src/types/loader.ts");(function(f){f.NOT_LOADED="NOT_LOADED",f.BACKTRACKED="BACKTRACKED",f.APPENDING="APPENDING",f.PARTIAL="PARTIAL",f.OK="OK"})(C||(C={}));var k=function(){function f(h){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=h,this._registerListeners()}var T=f.prototype;return T._registerListeners=function(){var h=this.hls;h.on(y.Events.BUFFER_APPENDED,this.onBufferAppended,this),h.on(y.Events.FRAG_BUFFERED,this.onFragBuffered,this),h.on(y.Events.FRAG_LOADED,this.onFragLoaded,this)},T._unregisterListeners=function(){var h=this.hls;h.off(y.Events.BUFFER_APPENDED,this.onBufferAppended,this),h.off(y.Events.FRAG_BUFFERED,this.onFragBuffered,this),h.off(y.Events.FRAG_LOADED,this.onFragLoaded,this)},T.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},T.getAppendedFrag=function(h,p){if(p===v.PlaylistLevelType.MAIN){var b=this.activeFragment,E=this.activeParts;if(!b)return null;if(E)for(var u=E.length;u--;){var e=E[u],n=e?e.end:b.appendedPTS;if(e.start<=h&&n!==void 0&&h<=n)return u>9&&(this.activeParts=E.slice(u-9)),e}else if(b.start<=h&&b.appendedPTS!==void 0&&h<=b.appendedPTS)return b}return this.getBufferedFrag(h,p)},T.getBufferedFrag=function(h,p){for(var b=this.fragments,E=Object.keys(b),u=E.length;u--;){var e=b[E[u]];if((e==null?void 0:e.body.type)===p&&e.buffered){var n=e.body;if(n.start<=h&&h<=n.end)return n}}return null},T.detectEvictedFragments=function(h,p,b){var E=this;Object.keys(this.fragments).forEach(function(u){var e=E.fragments[u];if(e)if(e.buffered){var n=e.range[h];n&&n.time.some(function(t){var s=!E.isTimeBuffered(t.startPTS,t.endPTS,p);return s&&E.removeFragment(e.body),s})}else e.body.type===b&&E.removeFragment(e.body)})},T.detectPartialFragments=function(h){var p=this,b=this.timeRanges,E=h.frag,u=h.part;if(b&&E.sn!=="initSegment"){var e=L(E),n=this.fragments[e];n&&(Object.keys(b).forEach(function(t){var s=E.elementaryStreams[t];if(s){var g=b[t],a=u!==null||s.partial===!0;n.range[t]=p.getBufferedTimes(E,u,a,g)}}),n.backtrack=n.loaded=null,Object.keys(n.range).length?n.buffered=!0:this.removeFragment(n.body))}},T.fragBuffered=function(h){var p=L(h),b=this.fragments[p];b&&(b.backtrack=b.loaded=null,b.buffered=!0)},T.getBufferedTimes=function(h,p,b,E){for(var u={time:[],partial:b},e=p?p.start:h.start,n=p?p.end:h.end,t=h.minEndPTS||n,s=h.maxStartPTS||e,g=0;g<E.length;g++){var a=E.start(g)-this.bufferPadding,o=E.end(g)+this.bufferPadding;if(s>=a&&t<=o){u.time.push({startPTS:Math.max(e,E.start(g)),endPTS:Math.min(n,E.end(g))});break}if(e<o&&n>a)u.partial=!0,u.time.push({startPTS:Math.max(e,E.start(g)),endPTS:Math.min(n,E.end(g))});else if(n<=a)break}return u},T.getPartialFragment=function(h){var p,b,E,u=null,e=0,n=this.bufferPadding,t=this.fragments;return Object.keys(t).forEach(function(s){var g=t[s];g&&D(g)&&(b=g.body.start-n,E=g.body.end+n,h>=b&&h<=E&&(p=Math.min(h-b,E-h),e<=p&&(u=g.body,e=p)))}),u},T.getState=function(h){var p=L(h),b=this.fragments[p];return b?b.buffered?D(b)?C.PARTIAL:C.OK:b.backtrack?C.BACKTRACKED:C.APPENDING:C.NOT_LOADED},T.backtrack=function(h,p){var b=L(h),E=this.fragments[b];if(!E||E.backtrack)return null;var u=E.backtrack=p||E.loaded;return E.loaded=null,u},T.getBacktrackData=function(h){var p=L(h),b=this.fragments[p];if(b){var E,u=b.backtrack;if(u!=null&&(E=u.payload)!==null&&E!==void 0&&E.byteLength)return u;this.removeFragment(h)}return null},T.isTimeBuffered=function(h,p,b){for(var E,u,e=0;e<b.length;e++){if(E=b.start(e)-this.bufferPadding,u=b.end(e)+this.bufferPadding,h>=E&&p<=u)return!0;if(p<=E)return!1}return!1},T.onFragLoaded=function(h,p){var b=p.frag,E=p.part;if(b.sn!=="initSegment"&&!b.bitrateTest&&!E){var u=L(b);this.fragments[u]={body:b,loaded:p,backtrack:null,buffered:!1,range:Object.create(null)}}},T.onBufferAppended=function(h,p){var b=this,E=p.frag,u=p.part,e=p.timeRanges;if(E.type===v.PlaylistLevelType.MAIN)if(this.activeFragment=E,u){var n=this.activeParts;n||(this.activeParts=n=[]),n.push(u)}else this.activeParts=null;this.timeRanges=e,Object.keys(e).forEach(function(t){var s=e[t];if(b.detectEvictedFragments(t,s),!u)for(var g=0;g<s.length;g++)E.appendedPTS=Math.max(s.end(g),E.appendedPTS||0)})},T.onFragBuffered=function(h,p){this.detectPartialFragments(p)},T.hasFragment=function(h){var p=L(h);return!!this.fragments[p]},T.removeFragmentsInRange=function(h,p,b){var E=this;Object.keys(this.fragments).forEach(function(u){var e=E.fragments[u];if(e&&e.buffered){var n=e.body;n.type===b&&n.start<p&&n.end>h&&E.removeFragment(n)}})},T.removeFragment=function(h){var p=L(h);h.stats.loaded=0,h.clearElementaryStreamInfo(),delete this.fragments[p]},T.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},f}();function D(f){var T,h;return f.buffered&&(((T=f.range.video)===null||T===void 0?void 0:T.partial)||((h=f.range.audio)===null||h===void 0?void 0:h.partial))}function L(f){return f.type+"_"+f.level+"_"+f.urlId+"_"+f.sn}},"./src/controller/gap-controller.ts":function(R,A,c){c.r(A),c.d(A,"STALL_MINIMUM_DURATION_MS",function(){return D}),c.d(A,"MAX_START_GAP_JUMP",function(){return L}),c.d(A,"SKIP_BUFFER_HOLE_STEP_SECONDS",function(){return f}),c.d(A,"SKIP_BUFFER_RANGE_START",function(){return T}),c.d(A,"default",function(){return h});var C=c("./src/utils/buffer-helper.ts"),y=c("./src/errors.ts"),v=c("./src/events.ts"),k=c("./src/utils/logger.ts"),D=250,L=2,f=.1,T=.05,h=function(){function p(E,u,e,n){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=E,this.media=u,this.fragmentTracker=e,this.hls=n}var b=p.prototype;return b.destroy=function(){this.hls=this.fragmentTracker=this.media=null},b.poll=function(E){var u=this.config,e=this.media,n=this.stalled,t=e.currentTime,s=e.seeking,g=this.seeking&&!s,a=!this.seeking&&s;if(this.seeking=s,t===E){if((a||g)&&(this.stalled=null),!e.paused&&!e.ended&&e.playbackRate!==0&&C.BufferHelper.getBuffered(e).length){var o=C.BufferHelper.bufferInfo(e,t,0),d=o.len>0,r=o.nextStart||0;if(d||r){if(s){var l=o.len>L,i=!r||r-t>L&&!this.fragmentTracker.getPartialFragment(t);if(l||i)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var m,S=Math.max(r,o.start||0)-t,w=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,x=!(w==null||(m=w.details)===null||m===void 0)&&m.live?2*w.details.targetduration:L;if(S>0&&S<=x)return void this._trySkipBufferHole(null)}var _=self.performance.now();if(n!==null){var I=_-n;!s&&I>=D&&this._reportStall(o.len);var P=C.BufferHelper.bufferInfo(e,t,u.maxBufferHole);this._tryFixBufferStall(P,I)}else this.stalled=_}}}else if(this.moved=!0,n!==null){if(this.stallReported){var N=self.performance.now()-n;k.logger.warn("playback not stuck anymore @"+t+", after "+Math.round(N)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},b._tryFixBufferStall=function(E,u){var e=this.config,n=this.fragmentTracker,t=this.media.currentTime,s=n.getPartialFragment(t);s&&this._trySkipBufferHole(s)||E.len>e.maxBufferHole&&u>1e3*e.highBufferWatchdogPeriod&&(k.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},b._reportStall=function(E){var u=this.hls,e=this.media;this.stallReported||(this.stallReported=!0,k.logger.warn("Playback stalling at @"+e.currentTime+" due to low buffer (buffer="+E+")"),u.trigger(v.Events.ERROR,{type:y.ErrorTypes.MEDIA_ERROR,details:y.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:E}))},b._trySkipBufferHole=function(E){for(var u=this.config,e=this.hls,n=this.media,t=n.currentTime,s=0,g=C.BufferHelper.getBuffered(n),a=0;a<g.length;a++){var o=g.start(a);if(t+u.maxBufferHole>=s&&t<o){var d=Math.max(o+T,n.currentTime+f);return k.logger.warn("skipping hole, adjusting currentTime from "+t+" to "+d),this.moved=!0,this.stalled=null,n.currentTime=d,E&&e.trigger(v.Events.ERROR,{type:y.ErrorTypes.MEDIA_ERROR,details:y.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+t+" to "+d,frag:E}),d}s=g.end(a)}return 0},b._tryNudgeBuffer=function(){var E=this.config,u=this.hls,e=this.media,n=e.currentTime,t=(this.nudgeRetry||0)+1;if(this.nudgeRetry=t,t<E.nudgeMaxRetry){var s=n+t*E.nudgeOffset;k.logger.warn("Nudging 'currentTime' from "+n+" to "+s),e.currentTime=s,u.trigger(v.Events.ERROR,{type:y.ErrorTypes.MEDIA_ERROR,details:y.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else k.logger.error("Playhead still not moving while enough data buffered @"+n+" after "+E.nudgeMaxRetry+" nudges"),u.trigger(v.Events.ERROR,{type:y.ErrorTypes.MEDIA_ERROR,details:y.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},p}()},"./src/controller/id3-track-controller.ts":function(R,A,c){c.r(A);var C=c("./src/events.ts"),y=c("./src/utils/texttrack-utils.ts"),v=c("./src/demux/id3.ts"),k=function(){function D(f){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=f,this._registerListeners()}var L=D.prototype;return L.destroy=function(){this._unregisterListeners()},L._registerListeners=function(){var f=this.hls;f.on(C.Events.MEDIA_ATTACHED,this.onMediaAttached,this),f.on(C.Events.MEDIA_DETACHING,this.onMediaDetaching,this),f.on(C.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),f.on(C.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},L._unregisterListeners=function(){var f=this.hls;f.off(C.Events.MEDIA_ATTACHED,this.onMediaAttached,this),f.off(C.Events.MEDIA_DETACHING,this.onMediaDetaching,this),f.off(C.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),f.off(C.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},L.onMediaAttached=function(f,T){this.media=T.media},L.onMediaDetaching=function(){this.id3Track&&(Object(y.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null)},L.getID3Track=function(f){if(this.media){for(var T=0;T<f.length;T++){var h=f[T];if(h.kind==="metadata"&&h.label==="id3")return Object(y.sendAddTrackEvent)(h,this.media),h}return this.media.addTextTrack("metadata","id3")}},L.onFragParsingMetadata=function(f,T){if(this.media){var h=T.frag,p=T.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var b=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,E=0;E<p.length;E++){var u=v.getID3Frames(p[E].data);if(u){var e=p[E].pts,n=E<p.length-1?p[E+1].pts:h.end;n-e<=0&&(n=e+.25);for(var t=0;t<u.length;t++){var s=u[t];if(!v.isTimeStampFrame(s)){var g=new b(e,n,"");g.value=s,this.id3Track.addCue(g)}}}}}},L.onBufferFlushing=function(f,T){var h=T.startOffset,p=T.endOffset,b=T.type;if(!b||b==="audio"){var E=this.id3Track;E&&Object(y.removeCuesInRange)(E,h,p)}},D}();A.default=k},"./src/controller/latency-controller.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return D});var C=c("./src/errors.ts"),y=c("./src/events.ts"),v=c("./src/utils/logger.ts");function k(L,f){for(var T=0;T<f.length;T++){var h=f[T];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(L,h.key,h)}}var D=function(){function L(p){var b=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return b.timeupdate()},this.hls=p,this.config=p.config,this.registerListeners()}var f,T,h=L.prototype;return h.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},h.registerListeners=function(){this.hls.on(y.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(y.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(y.Events.ERROR,this.onError,this)},h.unregisterListeners=function(){this.hls.off(y.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(y.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(y.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(y.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(y.Events.ERROR,this.onError)},h.onMediaAttached=function(p,b){this.media=b.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},h.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},h.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},h.onLevelUpdated=function(p,b){var E=b.details;this.levelDetails=E,E.advanced&&this.timeupdate(),!E.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},h.onError=function(p,b){b.details===C.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,v.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},h.timeupdate=function(){var p=this.media,b=this.levelDetails;if(p&&b){this.currentTime=p.currentTime;var E=this.computeLatency();if(E!==null){this._latency=E;var u=this.config,e=u.lowLatencyMode,n=u.maxLiveSyncPlaybackRate;if(e&&n!==1){var t=this.targetLatency;if(t!==null){var s=E-t,g=s<Math.min(this.maxLatency,t+b.targetduration);if(b.live&&g&&s>.05&&this.forwardBufferLength>1){var a=Math.min(2,Math.max(1,n)),o=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20;p.playbackRate=Math.min(a,Math.max(1,o))}else p.playbackRate!==1&&p.playbackRate!==0&&(p.playbackRate=1)}}}}},h.estimateLiveEdge=function(){var p=this.levelDetails;return p===null?null:p.edge+p.age},h.computeLatency=function(){var p=this.estimateLiveEdge();return p===null?null:p-this.currentTime},f=L,(T=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var p=this.config,b=this.levelDetails;return p.liveMaxLatencyDuration!==void 0?p.liveMaxLatencyDuration:b?p.liveMaxLatencyDurationCount*b.targetduration:0}},{key:"targetLatency",get:function(){var p=this.levelDetails;if(p===null)return null;var b=p.holdBack,E=p.partHoldBack,u=p.targetduration,e=this.config,n=e.liveSyncDuration,t=e.liveSyncDurationCount,s=e.lowLatencyMode,g=this.hls.userConfig,a=s&&E||b;(g.liveSyncDuration||g.liveSyncDurationCount||a===0)&&(a=n!==void 0?n:t*u);var o=u;return a+Math.min(1*this.stallCount,o)}},{key:"liveSyncPosition",get:function(){var p=this.estimateLiveEdge(),b=this.targetLatency,E=this.levelDetails;if(p===null||b===null||E===null)return null;var u=E.edge,e=p-b-this.edgeStalled,n=u-E.totalduration,t=u-(this.config.lowLatencyMode&&E.partTarget||E.targetduration);return Math.min(Math.max(n,e),t)}},{key:"drift",get:function(){var p=this.levelDetails;return p===null?1:p.drift}},{key:"edgeStalled",get:function(){var p=this.levelDetails;if(p===null)return 0;var b=3*(this.config.lowLatencyMode&&p.partTarget||p.targetduration);return Math.max(p.age-b,0)}},{key:"forwardBufferLength",get:function(){var p=this.media,b=this.levelDetails;if(!p||!b)return 0;var E=p.buffered.length;return E?p.buffered.end(E-1):b.edge-this.currentTime}}])&&k(f.prototype,T),L}()},"./src/controller/level-controller.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return E});var C=c("./src/types/level.ts"),y=c("./src/events.ts"),v=c("./src/errors.ts"),k=c("./src/utils/codecs.ts"),D=c("./src/controller/level-helper.ts"),L=c("./src/controller/base-playlist-controller.ts"),f=c("./src/types/loader.ts");function T(){return(T=Object.assign||function(u){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(u[t]=n[t])}return u}).apply(this,arguments)}function h(u,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(u,t.key,t)}}function p(u,e){return(p=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(u,e)}var b=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),E=function(u){var e,n;function t(o){var d;return(d=u.call(this,o,"[level-controller]")||this)._levels=[],d._firstLevel=-1,d._startLevel=void 0,d.currentLevelIndex=-1,d.manualLevelIndex=-1,d.onParsedComplete=void 0,d._registerListeners(),d}n=u,(e=t).prototype=Object.create(n.prototype),e.prototype.constructor=e,p(e,n);var s,g,a=t.prototype;return a._registerListeners=function(){var o=this.hls;o.on(y.Events.MANIFEST_LOADED,this.onManifestLoaded,this),o.on(y.Events.LEVEL_LOADED,this.onLevelLoaded,this),o.on(y.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),o.on(y.Events.FRAG_LOADED,this.onFragLoaded,this),o.on(y.Events.ERROR,this.onError,this)},a._unregisterListeners=function(){var o=this.hls;o.off(y.Events.MANIFEST_LOADED,this.onManifestLoaded,this),o.off(y.Events.LEVEL_LOADED,this.onLevelLoaded,this),o.off(y.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),o.off(y.Events.FRAG_LOADED,this.onFragLoaded,this),o.off(y.Events.ERROR,this.onError,this)},a.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,u.prototype.destroy.call(this)},a.startLoad=function(){this._levels.forEach(function(o){o.loadError=0}),u.prototype.startLoad.call(this)},a.onManifestLoaded=function(o,d){var r,l,i=[],m=[],S=[],w={},x=!1,_=!1,I=!1;if(d.levels.forEach(function(M){var B=M.attrs;x=x||!(!M.width||!M.height),_=_||!!M.videoCodec,I=I||!!M.audioCodec,b&&M.audioCodec&&M.audioCodec.indexOf("mp4a.40.34")!==-1&&(M.audioCodec=void 0);var G=M.bitrate+"-"+M.attrs.RESOLUTION+"-"+M.attrs.CODECS;(l=w[G])?l.url.push(M.url):(l=new C.Level(M),w[G]=l,i.push(l)),B&&(B.AUDIO&&Object(D.addGroupId)(l,"audio",B.AUDIO),B.SUBTITLES&&Object(D.addGroupId)(l,"text",B.SUBTITLES))}),(x||_)&&I&&(i=i.filter(function(M){var B=M.videoCodec,G=M.width,K=M.height;return!!B||!(!G||!K)})),i=i.filter(function(M){var B=M.audioCodec,G=M.videoCodec;return(!B||Object(k.isCodecSupportedInMp4)(B,"audio"))&&(!G||Object(k.isCodecSupportedInMp4)(G,"video"))}),d.audioTracks&&(m=d.audioTracks.filter(function(M){return!M.audioCodec||Object(k.isCodecSupportedInMp4)(M.audioCodec,"audio")}),Object(D.assignTrackIdsByGroup)(m)),d.subtitles&&(S=d.subtitles,Object(D.assignTrackIdsByGroup)(S)),i.length>0){r=i[0].bitrate,i.sort(function(M,B){return M.bitrate-B.bitrate}),this._levels=i;for(var P=0;P<i.length;P++)if(i[P].bitrate===r){this._firstLevel=P,this.log("manifest loaded, "+i.length+" level(s) found, first bitrate: "+r);break}var N=I&&!_,U={levels:i,audioTracks:m,subtitleTracks:S,firstLevel:this._firstLevel,stats:d.stats,audio:I,video:_,altAudio:!N&&m.some(function(M){return!!M.url})};this.hls.trigger(y.Events.MANIFEST_PARSED,U),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(y.Events.ERROR,{type:v.ErrorTypes.MEDIA_ERROR,details:v.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:d.url,reason:"no level with compatible codecs found in manifest"})},a.onError=function(o,d){if(u.prototype.onError.call(this,o,d),!d.fatal){var r=d.context,l=this._levels[this.currentLevelIndex];if(r&&(r.type===f.PlaylistContextType.AUDIO_TRACK&&l.audioGroupIds&&r.groupId===l.audioGroupIds[l.urlId]||r.type===f.PlaylistContextType.SUBTITLE_TRACK&&l.textGroupIds&&r.groupId===l.textGroupIds[l.urlId]))this.redundantFailover(this.currentLevelIndex);else{var i,m=!1,S=!0;switch(d.details){case v.ErrorDetails.FRAG_LOAD_ERROR:case v.ErrorDetails.FRAG_LOAD_TIMEOUT:case v.ErrorDetails.KEY_LOAD_ERROR:case v.ErrorDetails.KEY_LOAD_TIMEOUT:if(d.frag){var w=this._levels[d.frag.level];w?(w.fragmentError++,w.fragmentError>this.hls.config.fragLoadingMaxRetry&&(i=d.frag.level)):i=d.frag.level}break;case v.ErrorDetails.LEVEL_LOAD_ERROR:case v.ErrorDetails.LEVEL_LOAD_TIMEOUT:r&&(r.deliveryDirectives&&(S=!1),i=r.level),m=!0;break;case v.ErrorDetails.REMUX_ALLOC_ERROR:i=d.level,m=!0}i!==void 0&&this.recoverLevel(d,i,m,S)}}},a.recoverLevel=function(o,d,r,l){var i=o.details,m=this._levels[d];if(m.loadError++,r){if(!this.retryLoadingOrFail(o))return void(this.currentLevelIndex=-1);o.levelRetry=!0}if(l){var S=m.url.length;if(S>1&&m.loadError<S)o.levelRetry=!0,this.redundantFailover(d);else if(this.manualLevelIndex===-1){var w=d===0?this._levels.length-1:d-1;this.currentLevelIndex!==w&&this._levels[w].loadError===0&&(this.warn(i+": switch to "+w),o.levelRetry=!0,this.hls.nextAutoLevel=w)}}},a.redundantFailover=function(o){var d=this._levels[o],r=d.url.length;if(r>1){var l=(d.urlId+1)%r;this.warn("Switching to redundant URL-id "+l),this._levels.forEach(function(i){i.urlId=l}),this.level=o}},a.onFragLoaded=function(o,d){var r=d.frag;if(r!==void 0&&r.type===f.PlaylistLevelType.MAIN){var l=this._levels[r.level];l!==void 0&&(l.fragmentError=0,l.loadError=0)}},a.onLevelLoaded=function(o,d){var r,l,i=d.level,m=d.details,S=this._levels[i];if(!S)return this.warn("Invalid level index "+i),void((l=d.deliveryDirectives)!==null&&l!==void 0&&l.skip&&(m.deltaUpdateFailed=!0));i===this.currentLevelIndex?(S.fragmentError===0&&(S.loadError=0,this.retryCount=0),this.playlistLoaded(i,d,S.details)):(r=d.deliveryDirectives)!==null&&r!==void 0&&r.skip&&(m.deltaUpdateFailed=!0)},a.onAudioTrackSwitched=function(o,d){var r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var l=-1,i=this.hls.audioTracks[d.id].groupId,m=0;m<r.audioGroupIds.length;m++)if(r.audioGroupIds[m]===i){l=m;break}l!==r.urlId&&(r.urlId=l,this.startLoad())}},a.loadPlaylist=function(o){var d=this.currentLevelIndex,r=this._levels[d];if(this.canLoad&&r&&r.url.length>0){var l=r.urlId,i=r.url[l];if(o)try{i=o.addDirectives(i)}catch(m){this.warn("Could not construct new URL with HLS Delivery Directives: "+m)}this.log("Attempt loading level index "+d+(o?" at sn "+o.msn+" part "+o.part:"")+" with URL-id "+l+" "+i),this.clearTimer(),this.hls.trigger(y.Events.LEVEL_LOADING,{url:i,level:d,id:l,deliveryDirectives:o||null})}},a.removeLevel=function(o,d){var r=function(i,m){return m!==d},l=this._levels.filter(function(i,m){return m!==o||i.url.length>1&&d!==void 0&&(i.url=i.url.filter(r),i.audioGroupIds&&(i.audioGroupIds=i.audioGroupIds.filter(r)),i.textGroupIds&&(i.textGroupIds=i.textGroupIds.filter(r)),i.urlId=0,!0)}).map(function(i,m){var S=i.details;return S!=null&&S.fragments&&S.fragments.forEach(function(w){w.level=m}),i});this._levels=l,this.hls.trigger(y.Events.LEVELS_UPDATED,{levels:l})},s=t,(g=[{key:"levels",get:function(){return this._levels.length===0?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(o){var d,r=this._levels;if(r.length!==0&&(this.currentLevelIndex!==o||(d=r[o])===null||d===void 0||!d.details)){if(o<0||o>=r.length){var l=o<0;if(this.hls.trigger(y.Events.ERROR,{type:v.ErrorTypes.OTHER_ERROR,details:v.ErrorDetails.LEVEL_SWITCH_ERROR,level:o,fatal:l,reason:"invalid level idx"}),l)return;o=Math.min(o,r.length-1)}this.clearTimer();var i=this.currentLevelIndex,m=r[i],S=r[o];this.log("switching to level "+o+" from "+i),this.currentLevelIndex=o;var w=T({},S,{level:o,maxBitrate:S.maxBitrate,uri:S.uri,urlId:S.urlId});delete w._urlId,this.hls.trigger(y.Events.LEVEL_SWITCHING,w);var x=S.details;if(!x||x.live){var _=this.switchParams(S.uri,m==null?void 0:m.details);this.loadPlaylist(_)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(o){this.manualLevelIndex=o,this._startLevel===void 0&&(this._startLevel=o),o!==-1&&(this.level=o)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(o){this._firstLevel=o}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var o=this.hls.config.startLevel;return o!==void 0?o:this._firstLevel}return this._startLevel},set:function(o){this._startLevel=o}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(o){this.level=o,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=o)}}])&&h(s.prototype,g),t}(L.default)},"./src/controller/level-helper.ts":function(R,A,c){c.r(A),c.d(A,"addGroupId",function(){return v}),c.d(A,"assignTrackIdsByGroup",function(){return k}),c.d(A,"updatePTS",function(){return D}),c.d(A,"updateFragPTSDTS",function(){return f}),c.d(A,"mergeDetails",function(){return T}),c.d(A,"mapPartIntersection",function(){return h}),c.d(A,"mapFragmentIntersection",function(){return p}),c.d(A,"adjustSliding",function(){return b}),c.d(A,"addSliding",function(){return E}),c.d(A,"computeReloadInterval",function(){return u}),c.d(A,"getFragmentWithSN",function(){return e}),c.d(A,"getPartWith",function(){return n});var C=c("./src/polyfills/number.ts"),y=c("./src/utils/logger.ts");function v(t,s,g){switch(s){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(g);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(g)}}function k(t){var s={};t.forEach(function(g){var a=g.groupId||"";g.id=s[a]=s[a]||0,s[a]++})}function D(t,s,g){L(t[s],t[g])}function L(t,s){var g=s.startPTS;if(Object(C.isFiniteNumber)(g)){var a,o=0;s.sn>t.sn?(o=g-t.start,a=t):(o=t.start-g,a=s),a.duration!==o&&(a.duration=o)}else s.sn>t.sn?t.cc===s.cc&&t.minEndPTS?s.start=t.start+(t.minEndPTS-t.start):s.start=t.start+t.duration:s.start=Math.max(t.start-s.duration,0)}function f(t,s,g,a,o,d){a-g<=0&&(y.logger.warn("Fragment should have a positive duration",s),a=g+s.duration,d=o+s.duration);var r=g,l=a,i=s.startPTS,m=s.endPTS;if(Object(C.isFiniteNumber)(i)){var S=Math.abs(i-g);Object(C.isFiniteNumber)(s.deltaPTS)?s.deltaPTS=Math.max(S,s.deltaPTS):s.deltaPTS=S,r=Math.max(g,i),g=Math.min(g,i),o=Math.min(o,s.startDTS),l=Math.min(a,m),a=Math.max(a,m),d=Math.max(d,s.endDTS)}s.duration=a-g;var w=g-s.start;s.appendedPTS=a,s.start=s.startPTS=g,s.maxStartPTS=r,s.startDTS=o,s.endPTS=a,s.minEndPTS=l,s.endDTS=d;var x,_=s.sn;if(!t||_<t.startSN||_>t.endSN)return 0;var I=_-t.startSN,P=t.fragments;for(P[I]=s,x=I;x>0;x--)L(P[x],P[x-1]);for(x=I;x<P.length-1;x++)L(P[x],P[x+1]);return t.fragmentHint&&L(P[P.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,w}function T(t,s){for(var g=null,a=t.fragments,o=a.length-1;o>=0;o--){var d=a[o].initSegment;if(d){g=d;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;var r,l=0;if(p(t,s,function(_,I){var P;_.relurl&&(l=_.cc-I.cc),Object(C.isFiniteNumber)(_.startPTS)&&Object(C.isFiniteNumber)(_.endPTS)&&(I.start=I.startPTS=_.startPTS,I.startDTS=_.startDTS,I.appendedPTS=_.appendedPTS,I.maxStartPTS=_.maxStartPTS,I.endPTS=_.endPTS,I.endDTS=_.endDTS,I.minEndPTS=_.minEndPTS,I.duration=_.endPTS-_.startPTS,I.duration&&(r=I),s.PTSKnown=s.alignedSliding=!0),I.elementaryStreams=_.elementaryStreams,I.loader=_.loader,I.stats=_.stats,I.urlId=_.urlId,_.initSegment?(I.initSegment=_.initSegment,g=_.initSegment):I.initSegment&&I.initSegment.relurl!=((P=g)===null||P===void 0?void 0:P.relurl)||(I.initSegment=g)}),s.skippedSegments&&(s.deltaUpdateFailed=s.fragments.some(function(_){return!_}),s.deltaUpdateFailed)){y.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var i=s.skippedSegments;i--;)s.fragments.shift();s.startSN=s.fragments[0].sn,s.startCC=s.fragments[0].cc}var m=s.fragments;if(l){y.logger.warn("discontinuity sliding from playlist, take drift into account");for(var S=0;S<m.length;S++)m[S].cc+=l}s.skippedSegments&&(s.startCC=s.fragments[0].cc),h(t.partList,s.partList,function(_,I){I.elementaryStreams=_.elementaryStreams,I.stats=_.stats}),r?f(s,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):b(t,s),m.length&&(s.totalduration=s.edge-m[0].start),s.driftStartTime=t.driftStartTime,s.driftStart=t.driftStart;var w=s.advancedDateTime;if(s.advanced&&w){var x=s.edge;s.driftStart||(s.driftStartTime=w,s.driftStart=x),s.driftEndTime=w,s.driftEnd=x}else s.driftEndTime=t.driftEndTime,s.driftEnd=t.driftEnd,s.advancedDateTime=t.advancedDateTime}function h(t,s,g){if(t&&s)for(var a=0,o=0,d=t.length;o<=d;o++){var r=t[o],l=s[o+a];r&&l&&r.index===l.index&&r.fragment.sn===l.fragment.sn?g(r,l):a--}}function p(t,s,g){for(var a=s.skippedSegments,o=Math.max(t.startSN,s.startSN)-s.startSN,d=(t.fragmentHint?1:0)+(a?s.endSN:Math.min(t.endSN,s.endSN))-s.startSN,r=s.startSN-t.startSN,l=s.fragmentHint?s.fragments.concat(s.fragmentHint):s.fragments,i=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,m=o;m<=d;m++){var S=i[r+m],w=l[m];a&&!w&&m<a&&(w=s.fragments[m]=S),S&&w&&g(S,w)}}function b(t,s){var g=s.startSN+s.skippedSegments-t.startSN,a=t.fragments;g<0||g>=a.length||E(s,a[g].start)}function E(t,s){if(s){for(var g=t.fragments,a=t.skippedSegments;a<g.length;a++)g[a].start+=s;t.fragmentHint&&(t.fragmentHint.start+=s)}}function u(t,s){var g,a=1e3*t.levelTargetDuration,o=a/2,d=t.age,r=d>0&&d<3*a,l=s.loading.end-s.loading.start,i=t.availabilityDelay;if(t.updated===!1)if(r){var m=333*t.misses;g=Math.max(Math.min(o,2*l),m),t.availabilityDelay=(t.availabilityDelay||0)+g}else g=o;else r?(i=Math.min(i||a/2,d),t.availabilityDelay=i,g=i+a-d):g=a-l;return Math.round(g)}function e(t,s,g){if(!t||!t.details)return null;var a=t.details,o=a.fragments[s-a.startSN];return o||((o=a.fragmentHint)&&o.sn===s?o:s<a.startSN&&g&&g.sn===s?g:null)}function n(t,s,g){if(!t||!t.details)return null;var a=t.details.partList;if(a)for(var o=a.length;o--;){var d=a[o];if(d.index===g&&d.fragment.sn===s)return d}return null}},"./src/controller/stream-controller.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return t});var C=c("./src/polyfills/number.ts"),y=c("./src/controller/base-stream-controller.ts"),v=c("./src/is-supported.ts"),k=c("./src/events.ts"),D=c("./src/utils/buffer-helper.ts"),L=c("./src/controller/fragment-tracker.ts"),f=c("./src/types/loader.ts"),T=c("./src/loader/fragment.ts"),h=c("./src/demux/transmuxer-interface.ts"),p=c("./src/types/transmuxer.ts"),b=c("./src/controller/gap-controller.ts"),E=c("./src/errors.ts"),u=c("./src/utils/logger.ts");function e(s,g){for(var a=0;a<g.length;a++){var o=g[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(s,o.key,o)}}function n(s,g){return(n=Object.setPrototypeOf||function(a,o){return a.__proto__=o,a})(s,g)}var t=function(s){var g,a;function o(i,m){var S;return(S=s.call(this,i,m,"[stream-controller]")||this).audioCodecSwap=!1,S.gapController=null,S.level=-1,S._forceStartLoad=!1,S.altAudio=!1,S.audioOnly=!1,S.fragPlaying=null,S.onvplaying=null,S.onvseeked=null,S.fragLastKbps=0,S.stalled=!1,S.couldBacktrack=!1,S.audioCodecSwitch=!1,S.videoBuffer=null,S._registerListeners(),S}a=s,(g=o).prototype=Object.create(a.prototype),g.prototype.constructor=g,n(g,a);var d,r,l=o.prototype;return l._registerListeners=function(){var i=this.hls;i.on(k.Events.MEDIA_ATTACHED,this.onMediaAttached,this),i.on(k.Events.MEDIA_DETACHING,this.onMediaDetaching,this),i.on(k.Events.MANIFEST_LOADING,this.onManifestLoading,this),i.on(k.Events.MANIFEST_PARSED,this.onManifestParsed,this),i.on(k.Events.LEVEL_LOADING,this.onLevelLoading,this),i.on(k.Events.LEVEL_LOADED,this.onLevelLoaded,this),i.on(k.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),i.on(k.Events.ERROR,this.onError,this),i.on(k.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),i.on(k.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),i.on(k.Events.BUFFER_CREATED,this.onBufferCreated,this),i.on(k.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),i.on(k.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),i.on(k.Events.FRAG_BUFFERED,this.onFragBuffered,this)},l._unregisterListeners=function(){var i=this.hls;i.off(k.Events.MEDIA_ATTACHED,this.onMediaAttached,this),i.off(k.Events.MEDIA_DETACHING,this.onMediaDetaching,this),i.off(k.Events.MANIFEST_LOADING,this.onManifestLoading,this),i.off(k.Events.MANIFEST_PARSED,this.onManifestParsed,this),i.off(k.Events.LEVEL_LOADED,this.onLevelLoaded,this),i.off(k.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),i.off(k.Events.ERROR,this.onError,this),i.off(k.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),i.off(k.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),i.off(k.Events.BUFFER_CREATED,this.onBufferCreated,this),i.off(k.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),i.off(k.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),i.off(k.Events.FRAG_BUFFERED,this.onFragBuffered,this)},l.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},l.startLoad=function(i){if(this.levels){var m=this.lastCurrentTime,S=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var w=S.startLevel;w===-1&&(S.config.testBandwidth?(w=0,this.bitrateTest=!0):w=S.nextAutoLevel),this.level=S.nextLoadLevel=w,this.loadedmetadata=!1}m>0&&i===-1&&(this.log("Override startPosition with lastCurrentTime @"+m.toFixed(3)),i=m),this.state=y.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=i,this.tick()}else this._forceStartLoad=!0,this.state=y.State.STOPPED},l.stopLoad=function(){this._forceStartLoad=!1,s.prototype.stopLoad.call(this)},l.doTick=function(){switch(this.state){case y.State.IDLE:this.doTickIdle();break;case y.State.WAITING_LEVEL:var i,m=this.levels,S=this.level,w=m==null||(i=m[S])===null||i===void 0?void 0:i.details;if(w&&(!w.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(w))break;this.state=y.State.IDLE;break}break;case y.State.FRAG_LOADING_WAITING_RETRY:var x,_=self.performance.now(),I=this.retryDate;(!I||_>=I||(x=this.media)!==null&&x!==void 0&&x.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=y.State.IDLE)}this.onTickEnd()},l.onTickEnd=function(){s.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},l.doTickIdle=function(){var i,m,S=this.hls,w=this.levelLastLoaded,x=this.levels,_=this.media,I=S.config,P=S.nextLoadLevel;if(w!==null&&(_||!this.startFragRequested&&I.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&x&&x[P]){var N=x[P];this.level=S.nextLoadLevel=P;var U=N.details;if(!U||this.state===y.State.WAITING_LEVEL||U.live&&this.levelLastLoaded!==P)this.state=y.State.WAITING_LEVEL;else{var M=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:_,f.PlaylistLevelType.MAIN);if(M!==null&&!(M.len>=this.getMaxBufferLength(N.maxBitrate))){if(this._streamEnded(M,U)){var B={};return this.altAudio&&(B.type="video"),this.hls.trigger(k.Events.BUFFER_EOS,B),void(this.state=y.State.ENDED)}var G=M.end,K=this.getNextFragment(G,U);if(this.couldBacktrack&&!this.fragPrevious&&K&&K.sn!=="initSegment"){var z=K.sn-U.startSN;z>1&&(K=U.fragments[z-1],this.fragmentTracker.removeFragment(K))}if(K&&this.fragmentTracker.getState(K)===L.FragmentState.OK&&this.nextLoadPosition>G){var Y=this.audioOnly&&!this.altAudio?T.ElementaryStreamTypes.AUDIO:T.ElementaryStreamTypes.VIDEO;this.afterBufferFlushed(_,Y,f.PlaylistLevelType.MAIN),K=this.getNextFragment(this.nextLoadPosition,U)}K&&(!K.initSegment||K.initSegment.data||this.bitrateTest||(K=K.initSegment),((i=K.decryptdata)===null||i===void 0?void 0:i.keyFormat)!=="identity"||(m=K.decryptdata)!==null&&m!==void 0&&m.key?this.loadFragment(K,U,G):this.loadKey(K,U))}}}},l.loadFragment=function(i,m,S){var w,x=this.fragmentTracker.getState(i);if(this.fragCurrent=i,x===L.FragmentState.BACKTRACKED){var _=this.fragmentTracker.getBacktrackData(i);if(_)return this._handleFragmentLoadProgress(_),void this._handleFragmentLoadComplete(_);x=L.FragmentState.NOT_LOADED}x===L.FragmentState.NOT_LOADED||x===L.FragmentState.PARTIAL?i.sn==="initSegment"?this._loadInitSegment(i):this.bitrateTest?(i.bitrateTest=!0,this.log("Fragment "+i.sn+" of level "+i.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(i)):(this.startFragRequested=!0,s.prototype.loadFragment.call(this,i,m,S)):x===L.FragmentState.APPENDING?this.reduceMaxBufferLength(i.duration)&&this.fragmentTracker.removeFragment(i):((w=this.media)===null||w===void 0?void 0:w.buffered.length)===0&&this.fragmentTracker.removeAllFragments()},l.getAppendedFrag=function(i){var m=this.fragmentTracker.getAppendedFrag(i,f.PlaylistLevelType.MAIN);return m&&"fragment"in m?m.fragment:m},l.getBufferedFrag=function(i){return this.fragmentTracker.getBufferedFrag(i,f.PlaylistLevelType.MAIN)},l.followingBufferedFrag=function(i){return i?this.getBufferedFrag(i.end+.5):null},l.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},l.nextLevelSwitch=function(){var i=this.levels,m=this.media;if(m!=null&&m.readyState){var S,w=this.getAppendedFrag(m.currentTime);if(w&&w.start>1&&this.flushMainBuffer(0,w.start-1),!m.paused&&i){var x=i[this.hls.nextLoadLevel],_=this.fragLastKbps;S=_&&this.fragCurrent?this.fragCurrent.duration*x.maxBitrate/(1e3*_)+1:0}else S=0;var I=this.getBufferedFrag(m.currentTime+S);if(I){var P=this.followingBufferedFrag(I);if(P){this.abortCurrentFrag();var N=P.maxStartPTS?P.maxStartPTS:P.start,U=P.duration,M=Math.max(I.end,N+Math.min(Math.max(U-this.config.maxFragLookUpTolerance,.5*U),.75*U));this.flushMainBuffer(M,Number.POSITIVE_INFINITY)}}}},l.abortCurrentFrag=function(){var i=this.fragCurrent;this.fragCurrent=null,i!=null&&i.loader&&i.loader.abort(),this.state===y.State.KEY_LOADING&&(this.state=y.State.IDLE),this.nextLoadPosition=this.getLoadPosition()},l.flushMainBuffer=function(i,m){s.prototype.flushMainBuffer.call(this,i,m,this.altAudio?"video":null)},l.onMediaAttached=function(i,m){s.prototype.onMediaAttached.call(this,i,m);var S=m.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),S.addEventListener("playing",this.onvplaying),S.addEventListener("seeked",this.onvseeked),this.gapController=new b.default(this.config,S,this.fragmentTracker,this.hls)},l.onMediaDetaching=function(){var i=this.media;i&&(i.removeEventListener("playing",this.onvplaying),i.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),s.prototype.onMediaDetaching.call(this)},l.onMediaPlaying=function(){this.tick()},l.onMediaSeeked=function(){var i=this.media,m=i?i.currentTime:null;Object(C.isFiniteNumber)(m)&&this.log("Media seeked to "+m.toFixed(3)),this.tick()},l.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(k.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},l.onManifestParsed=function(i,m){var S,w=!1,x=!1;m.levels.forEach(function(_){(S=_.audioCodec)&&(S.indexOf("mp4a.40.2")!==-1&&(w=!0),S.indexOf("mp4a.40.5")!==-1&&(x=!0))}),this.audioCodecSwitch=w&&x&&!Object(v.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=m.levels,this.startFragRequested=!1},l.onLevelLoading=function(i,m){var S=this.levels;if(S&&this.state===y.State.IDLE){var w=S[m.level];(!w.details||w.details.live&&this.levelLastLoaded!==m.level||this.waitForCdnTuneIn(w.details))&&(this.state=y.State.WAITING_LEVEL)}},l.onLevelLoaded=function(i,m){var S,w=this.levels,x=m.level,_=m.details,I=_.totalduration;if(w){this.log("Level "+x+" loaded ["+_.startSN+","+_.endSN+"], cc ["+_.startCC+", "+_.endCC+"] duration:"+I);var P=this.fragCurrent;!P||this.state!==y.State.FRAG_LOADING&&this.state!==y.State.FRAG_LOADING_WAITING_RETRY||P.level!==m.level&&P.loader&&(this.state=y.State.IDLE,P.loader.abort());var N=w[x],U=0;if(_.live||(S=N.details)!==null&&S!==void 0&&S.live){if(_.fragments[0]||(_.deltaUpdateFailed=!0),_.deltaUpdateFailed)return;U=this.alignPlaylists(_,N.details)}if(N.details=_,this.levelLastLoaded=x,this.hls.trigger(k.Events.LEVEL_UPDATED,{details:_,level:x}),this.state===y.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(_))return;this.state=y.State.IDLE}this.startFragRequested?_.live&&this.synchronizeToLiveEdge(_):this.setStartPosition(_,U),this.tick()}else this.warn("Levels were reset while loading level "+x)},l._handleFragmentLoadProgress=function(i){var m,S=i.frag,w=i.part,x=i.payload,_=this.levels;if(_){var I=_[S.level],P=I.details;if(P){var N=I.videoCodec,U=P.PTSKnown||!P.live,M=(m=S.initSegment)===null||m===void 0?void 0:m.data,B=this._getAudioCodec(I),G=this.transmuxer=this.transmuxer||new h.default(this.hls,f.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),K=w?w.index:-1,z=K!==-1,Y=new p.ChunkMetadata(S.level,S.sn,S.stats.chunkCount,x.byteLength,K,z),q=this.initPTS[S.cc];G.push(x,M,B,N,S,w,P.totalduration,U,Y,q)}else this.warn("Dropping fragment "+S.sn+" of level "+S.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+S.sn+" of level "+S.level+" will not be buffered")},l.onAudioTrackSwitching=function(i,m){var S=this.altAudio,w=!!m.url,x=m.id;if(!w){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var _=this.fragCurrent;_!=null&&_.loader&&(this.log("Switching to main audio track, cancel main fragment load"),_.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var I=this.hls;S&&I.trigger(k.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),I.trigger(k.Events.AUDIO_TRACK_SWITCHED,{id:x})}},l.onAudioTrackSwitched=function(i,m){var S=m.id,w=!!this.hls.audioTracks[S].url;if(w){var x=this.videoBuffer;x&&this.mediaBuffer!==x&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=x)}this.altAudio=w,this.tick()},l.onBufferCreated=function(i,m){var S,w,x=m.tracks,_=!1;for(var I in x){var P=x[I];if(P.id==="main"){if(w=I,S=P,I==="video"){var N=x[I];N&&(this.videoBuffer=N.buffer)}}else _=!0}_&&S?(this.log("Alternate track found, use "+w+".buffered to schedule main fragment loading"),this.mediaBuffer=S.buffer):this.mediaBuffer=this.media},l.onFragBuffered=function(i,m){var S=m.frag,w=m.part;if(!S||S.type===f.PlaylistLevelType.MAIN){if(this.fragContextChanged(S))return this.warn("Fragment "+S.sn+(w?" p: "+w.index:"")+" of level "+S.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===y.State.PARSED&&(this.state=y.State.IDLE));var x=w?w.stats:S.stats;this.fragLastKbps=Math.round(8*x.total/(x.buffering.end-x.loading.first)),S.sn!=="initSegment"&&(this.fragPrevious=S),this.fragBufferedComplete(S,w)}},l.onError=function(i,m){switch(m.details){case E.ErrorDetails.FRAG_LOAD_ERROR:case E.ErrorDetails.FRAG_LOAD_TIMEOUT:case E.ErrorDetails.KEY_LOAD_ERROR:case E.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(f.PlaylistLevelType.MAIN,m);break;case E.ErrorDetails.LEVEL_LOAD_ERROR:case E.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==y.State.ERROR&&(m.fatal?(this.warn(""+m.details),this.state=y.State.ERROR):m.levelRetry||this.state!==y.State.WAITING_LEVEL||(this.state=y.State.IDLE));break;case E.ErrorDetails.BUFFER_FULL_ERROR:if(m.parent==="main"&&(this.state===y.State.PARSING||this.state===y.State.PARSED)){var S=!0,w=this.getFwdBufferInfo(this.media,f.PlaylistLevelType.MAIN);w&&w.len>.5&&(S=!this.reduceMaxBufferLength(w.len)),S&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},l.checkBuffer=function(){var i=this.media,m=this.gapController;if(i&&m&&i.readyState){var S=D.BufferHelper.getBuffered(i);!this.loadedmetadata&&S.length?(this.loadedmetadata=!0,this.seekToStartPos()):m.poll(this.lastCurrentTime),this.lastCurrentTime=i.currentTime}},l.onFragLoadEmergencyAborted=function(){this.state=y.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},l.onBufferFlushed=function(i,m){var S=m.type;if(S!==T.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var w=(S===T.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(w,S,f.PlaylistLevelType.MAIN)}},l.onLevelsUpdated=function(i,m){this.levels=m.levels},l.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},l.seekToStartPos=function(){var i=this.media,m=i.currentTime,S=this.startPosition;if(S>=0&&m<S){if(i.seeking)return void u.logger.log("could not seek to "+S+", already seeking at "+m);var w=D.BufferHelper.getBuffered(i),x=(w.length?w.start(0):0)-S;x>0&&(x<this.config.maxBufferHole||x<this.config.maxFragLookUpTolerance)&&(u.logger.log("adjusting start position by "+x+" to match buffer start"),S+=x,this.startPosition=S),this.log("seek to target start position "+S+" from current time "+m),i.currentTime=S}},l._getAudioCodec=function(i){var m=this.config.defaultAudioCodec||i.audioCodec;return this.audioCodecSwap&&m&&(this.log("Swapping audio codec"),m=m.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),m},l._loadBitrateTestFrag=function(i){var m=this;this._doFragLoad(i).then(function(S){var w=m.hls;if(S&&!w.nextLoadLevel&&!m.fragContextChanged(i)){m.fragLoadError=0,m.state=y.State.IDLE,m.startFragRequested=!1,m.bitrateTest=!1;var x=i.stats;x.parsing.start=x.parsing.end=x.buffering.start=x.buffering.end=self.performance.now(),w.trigger(k.Events.FRAG_LOADED,S)}})},l._handleTransmuxComplete=function(i){var m,S="main",w=this.hls,x=i.remuxResult,_=i.chunkMeta,I=this.getCurrentContext(_);if(!I)return this.warn("The loading context changed while buffering fragment "+_.sn+" of level "+_.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(_.level);var P=I.frag,N=I.part,U=I.level,M=x.video,B=x.text,G=x.id3,K=x.initSegment,z=this.altAudio?void 0:x.audio;if(!this.fragContextChanged(P)){if(this.state=y.State.PARSING,K){K.tracks&&(this._bufferInitSegment(U,K.tracks,P,_),w.trigger(k.Events.FRAG_PARSING_INIT_SEGMENT,{frag:P,id:S,tracks:K.tracks}));var Y=K.initPTS,q=K.timescale;Object(C.isFiniteNumber)(Y)&&(this.initPTS[P.cc]=Y,w.trigger(k.Events.INIT_PTS_FOUND,{frag:P,id:S,initPTS:Y,timescale:q}))}if(M&&x.independent!==!1){if(U.details){var Z=M.startPTS,ee=M.endPTS,te=M.startDTS,ae=M.endDTS;if(N)N.elementaryStreams[M.type]={startPTS:Z,endPTS:ee,startDTS:te,endDTS:ae};else if(M.firstKeyFrame&&M.independent&&(this.couldBacktrack=!0),M.dropped&&M.independent){if(this.getLoadPosition()+this.config.maxBufferHole<Z)return void this.backtrack(P);P.setElementaryStreamInfo(M.type,P.start,ee,P.start,ae,!0)}P.setElementaryStreamInfo(M.type,Z,ee,te,ae),this.bufferFragmentData(M,P,N,_)}}else if(x.independent===!1)return void this.backtrack(P);if(z){var se=z.startPTS,pe=z.endPTS,ve=z.startDTS,we=z.endDTS;N&&(N.elementaryStreams[T.ElementaryStreamTypes.AUDIO]={startPTS:se,endPTS:pe,startDTS:ve,endDTS:we}),P.setElementaryStreamInfo(T.ElementaryStreamTypes.AUDIO,se,pe,ve,we),this.bufferFragmentData(z,P,N,_)}if(G!=null&&(m=G.samples)!==null&&m!==void 0&&m.length){var ue={frag:P,id:S,samples:G.samples};w.trigger(k.Events.FRAG_PARSING_METADATA,ue)}if(B){var Ee={frag:P,id:S,samples:B.samples};w.trigger(k.Events.FRAG_PARSING_USERDATA,Ee)}}},l._bufferInitSegment=function(i,m,S,w){var x=this;if(this.state===y.State.PARSING){this.audioOnly=!!m.audio&&!m.video,this.altAudio&&!this.audioOnly&&delete m.audio;var _=m.audio,I=m.video,P=m.audiovideo;if(_){var N=i.audioCodec,U=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(N&&(N=N.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),_.metadata.channelCount!==1&&U.indexOf("firefox")===-1&&(N="mp4a.40.5")),U.indexOf("android")!==-1&&_.container!=="audio/mpeg"&&(N="mp4a.40.2",this.log("Android: force audio codec to "+N)),i.audioCodec&&i.audioCodec!==N&&this.log('Swapping manifest audio codec "'+i.audioCodec+'" for "'+N+'"'),_.levelCodec=N,_.id="main",this.log("Init audio buffer, container:"+_.container+", codecs[selected/level/parsed]=["+(N||"")+"/"+(i.audioCodec||"")+"/"+_.codec+"]")}I&&(I.levelCodec=i.videoCodec,I.id="main",this.log("Init video buffer, container:"+I.container+", codecs[level/parsed]=["+(i.videoCodec||"")+"/"+I.codec+"]")),P&&this.log("Init audiovideo buffer, container:"+P.container+", codecs[level/parsed]=["+(i.attrs.CODECS||"")+"/"+P.codec+"]"),this.hls.trigger(k.Events.BUFFER_CODECS,m),Object.keys(m).forEach(function(M){var B=m[M].initSegment;B!=null&&B.byteLength&&x.hls.trigger(k.Events.BUFFER_APPENDING,{type:M,data:B,frag:S,part:null,chunkMeta:w,parent:S.type})}),this.tick()}},l.backtrack=function(i){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(i);var m=this.fragmentTracker.backtrack(i);this.fragPrevious=null,this.nextLoadPosition=i.start,m?this.resetFragmentLoading(i):this.state=y.State.BACKTRACKING},l.checkFragmentChanged=function(){var i=this.media,m=null;if(i&&i.readyState>1&&i.seeking===!1){var S=i.currentTime;if(D.BufferHelper.isBuffered(i,S)?m=this.getAppendedFrag(S):D.BufferHelper.isBuffered(i,S+.1)&&(m=this.getAppendedFrag(S+.1)),m){var w=this.fragPlaying,x=m.level;w&&m.sn===w.sn&&w.level===x&&m.urlId===w.urlId||(this.hls.trigger(k.Events.FRAG_CHANGED,{frag:m}),w&&w.level===x||this.hls.trigger(k.Events.LEVEL_SWITCHED,{level:x}),this.fragPlaying=m)}}},d=o,(r=[{key:"nextLevel",get:function(){var i=this.nextBufferedFrag;return i?i.level:-1}},{key:"currentLevel",get:function(){var i=this.media;if(i){var m=this.getAppendedFrag(i.currentTime);if(m)return m.level}return-1}},{key:"nextBufferedFrag",get:function(){var i=this.media;if(i){var m=this.getAppendedFrag(i.currentTime);return this.followingBufferedFrag(m)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&e(d.prototype,r),o}(y.default)},"./src/controller/subtitle-stream-controller.ts":function(R,A,c){c.r(A),c.d(A,"SubtitleStreamController",function(){return u});var C=c("./src/events.ts"),y=c("./src/utils/logger.ts"),v=c("./src/utils/buffer-helper.ts"),k=c("./src/controller/fragment-finders.ts"),D=c("./src/utils/discontinuities.ts"),L=c("./src/controller/level-helper.ts"),f=c("./src/controller/fragment-tracker.ts"),T=c("./src/controller/base-stream-controller.ts"),h=c("./src/types/loader.ts"),p=c("./src/types/level.ts");function b(e,n){for(var t=0;t<n.length;t++){var s=n[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function E(e,n){return(E=Object.setPrototypeOf||function(t,s){return t.__proto__=s,t})(e,n)}var u=function(e){var n,t;function s(d,r){var l;return(l=e.call(this,d,r,"[subtitle-stream-controller]")||this).levels=[],l.currentTrackId=-1,l.tracksBuffered=[],l.mainDetails=null,l._registerListeners(),l}t=e,(n=s).prototype=Object.create(t.prototype),n.prototype.constructor=n,E(n,t);var g,a,o=s.prototype;return o.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},o._registerListeners=function(){var d=this.hls;d.on(C.Events.MEDIA_ATTACHED,this.onMediaAttached,this),d.on(C.Events.MEDIA_DETACHING,this.onMediaDetaching,this),d.on(C.Events.MANIFEST_LOADING,this.onManifestLoading,this),d.on(C.Events.LEVEL_LOADED,this.onLevelLoaded,this),d.on(C.Events.ERROR,this.onError,this),d.on(C.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),d.on(C.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),d.on(C.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),d.on(C.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),d.on(C.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},o._unregisterListeners=function(){var d=this.hls;d.off(C.Events.MEDIA_ATTACHED,this.onMediaAttached,this),d.off(C.Events.MEDIA_DETACHING,this.onMediaDetaching,this),d.off(C.Events.MANIFEST_LOADING,this.onManifestLoading,this),d.off(C.Events.LEVEL_LOADED,this.onLevelLoaded,this),d.off(C.Events.ERROR,this.onError,this),d.off(C.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),d.off(C.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),d.off(C.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),d.off(C.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),d.off(C.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},o.startLoad=function(){this.stopLoad(),this.state=T.State.IDLE,this.setInterval(500),this.tick()},o.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},o.onLevelLoaded=function(d,r){this.mainDetails=r.details},o.onSubtitleFragProcessed=function(d,r){var l=r.frag,i=r.success;if(this.fragPrevious=l,this.state=T.State.IDLE,i){var m=this.tracksBuffered[this.currentTrackId];if(m){for(var S,w=l.start,x=0;x<m.length;x++)if(w>=m[x].start&&w<=m[x].end){S=m[x];break}var _=l.start+l.duration;S?S.end=_:(S={start:w,end:_},m.push(S)),this.fragmentTracker.fragBuffered(l)}}},o.onBufferFlushing=function(d,r){var l=r.startOffset,i=r.endOffset;if(l===0&&i!==Number.POSITIVE_INFINITY){var m=this.currentTrackId,S=this.levels;if(!S.length||!S[m]||!S[m].details)return;var w=i-S[m].details.targetduration;if(w<=0)return;r.endOffsetSubtitles=Math.max(0,w),this.tracksBuffered.forEach(function(x){for(var _=0;_<x.length;)if(x[_].end<=w)x.shift();else{if(!(x[_].start<w))break;x[_].start=w,_++}}),this.fragmentTracker.removeFragmentsInRange(l,w,h.PlaylistLevelType.SUBTITLE)}},o.onError=function(d,r){var l,i=r.frag;i&&i.type===h.PlaylistLevelType.SUBTITLE&&((l=this.fragCurrent)!==null&&l!==void 0&&l.loader&&this.fragCurrent.loader.abort(),this.state=T.State.IDLE)},o.onSubtitleTracksUpdated=function(d,r){var l=this,i=r.subtitleTracks;this.tracksBuffered=[],this.levels=i.map(function(m){return new p.Level(m)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(m){l.tracksBuffered[m.id]=[]}),this.mediaBuffer=null},o.onSubtitleTrackSwitch=function(d,r){if(this.currentTrackId=r.id,this.levels.length&&this.currentTrackId!==-1){var l=this.levels[this.currentTrackId];l!=null&&l.details?(this.mediaBuffer=this.mediaBufferTimeRanges,this.setInterval(500)):this.mediaBuffer=null}else this.clearInterval()},o.onSubtitleTrackLoaded=function(d,r){var l,i=r.details,m=r.id,S=this.currentTrackId,w=this.levels;if(w.length){var x=w[S];if(!(m>=w.length||m!==S)&&x){if(this.mediaBuffer=this.mediaBufferTimeRanges,i.live||(l=x.details)!==null&&l!==void 0&&l.live){var _=this.mainDetails;if(i.deltaUpdateFailed||!_)return;var I=_.fragments[0];x.details?this.alignPlaylists(i,x.details)===0&&I&&Object(L.addSliding)(i,I.start):i.hasProgramDateTime&&_.hasProgramDateTime?Object(D.alignMediaPlaylistByPDT)(i,_):I&&Object(L.addSliding)(i,I.start)}x.details=i,this.levelLastLoaded=m,this.tick(),i.live&&!this.fragCurrent&&this.media&&this.state===T.State.IDLE&&(Object(k.findFragmentByPTS)(null,i.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),x.details=void 0))}}},o._handleFragmentLoadComplete=function(d){var r=d.frag,l=d.payload,i=r.decryptdata,m=this.hls;if(!this.fragContextChanged(r)&&l&&l.byteLength>0&&i&&i.key&&i.iv&&i.method==="AES-128"){var S=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(l),i.key.buffer,i.iv.buffer).then(function(w){var x=performance.now();m.trigger(C.Events.FRAG_DECRYPTED,{frag:r,payload:w,stats:{tstart:S,tdecrypt:x}})})}},o.doTick=function(){if(this.media){if(this.state===T.State.IDLE){var d,r=this.currentTrackId,l=this.levels;if(!l.length||!l[r]||!l[r].details)return;var i=l[r].details,m=i.targetduration,S=this.config,w=this.media,x=v.BufferHelper.bufferedInfo(this.mediaBufferTimeRanges,w.currentTime-m,S.maxBufferHole),_=x.end;if(x.len>this.getMaxBufferLength()+m)return;console.assert(i,"Subtitle track details are defined on idle subtitle stream controller tick");var I,P=i.fragments,N=P.length,U=i.edge,M=this.fragPrevious;if(_<U){var B=S.maxFragLookUpTolerance;M&&i.hasProgramDateTime&&(I=Object(k.findFragmentByPDT)(P,M.endProgramDateTime,B)),I||!(I=Object(k.findFragmentByPTS)(M,P,_,B))&&M&&M.start<P[0].start&&(I=P[0])}else I=P[N-1];(d=I)!==null&&d!==void 0&&d.encrypted?(y.logger.log("Loading key for "+I.sn),this.state=T.State.KEY_LOADING,this.hls.trigger(C.Events.KEY_LOADING,{frag:I})):I&&this.fragmentTracker.getState(I)===f.FragmentState.NOT_LOADED&&this.loadFragment(I,i,_)}}else this.state=T.State.IDLE},o.loadFragment=function(d,r,l){this.fragCurrent=d,e.prototype.loadFragment.call(this,d,r,l)},g=s,(a=[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}])&&b(g.prototype,a),s}(T.default)},"./src/controller/subtitle-track-controller.ts":function(R,A,c){c.r(A);var C=c("./src/events.ts"),y=c("./src/utils/texttrack-utils.ts"),v=c("./src/controller/base-playlist-controller.ts"),k=c("./src/types/loader.ts");function D(h,p){for(var b=0;b<p.length;b++){var E=p[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(h,E.key,E)}}function L(h,p){return(L=Object.setPrototypeOf||function(b,E){return b.__proto__=E,b})(h,p)}var f=function(h){var p,b;function E(t){var s;return(s=h.call(this,t,"[subtitle-track-controller]")||this).media=null,s.tracks=[],s.groupId=null,s.tracksInGroup=[],s.trackId=-1,s.selectDefaultTrack=!0,s.queuedDefaultTrack=-1,s.trackChangeListener=function(){return s.onTextTracksChanged()},s.asyncPollTrackChange=function(){return s.pollTrackChange(0)},s.useTextTrackPolling=!1,s.subtitlePollingInterval=-1,s.subtitleDisplay=!0,s.registerListeners(),s}b=h,(p=E).prototype=Object.create(b.prototype),p.prototype.constructor=p,L(p,b);var u,e,n=E.prototype;return n.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,h.prototype.destroy.call(this)},n.registerListeners=function(){var t=this.hls;t.on(C.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(C.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(C.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(C.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(C.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(C.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(C.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(C.Events.ERROR,this.onError,this)},n.unregisterListeners=function(){var t=this.hls;t.off(C.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(C.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(C.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(C.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(C.Events.LEVEL_LOADING,this.onLevelLoading,this),t.off(C.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(C.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(C.Events.ERROR,this.onError,this)},n.onMediaAttached=function(t,s){this.media=s.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},n.pollTrackChange=function(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,t)},n.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),T(this.media.textTracks).forEach(function(t){Object(y.clearCurrentCues)(t)}),this.subtitleTrack=-1,this.media=null)},n.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},n.onManifestParsed=function(t,s){this.tracks=s.subtitleTracks},n.onSubtitleTrackLoaded=function(t,s){var g=s.id,a=s.details,o=this.trackId,d=this.tracksInGroup[o];if(d){var r=d.details;d.details=s.details,this.log("subtitle track "+g+" loaded ["+a.startSN+"-"+a.endSN+"]"),g===this.trackId&&(this.retryCount=0,this.playlistLoaded(g,s,r))}else this.warn("Invalid subtitle track id "+g)},n.onLevelLoading=function(t,s){this.switchLevel(s.level)},n.onLevelSwitching=function(t,s){this.switchLevel(s.level)},n.switchLevel=function(t){var s=this.hls.levels[t];if(s!=null&&s.textGroupIds){var g=s.textGroupIds[s.urlId];if(this.groupId!==g){var a=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,o=this.tracks.filter(function(l){return!g||l.groupId===g});this.tracksInGroup=o;var d=this.findTrackId(a==null?void 0:a.name)||this.findTrackId();this.groupId=g;var r={subtitleTracks:o};this.log("Updating subtitle tracks, "+o.length+' track(s) found in "'+g+'" group-id'),this.hls.trigger(C.Events.SUBTITLE_TRACKS_UPDATED,r),d!==-1&&this.setSubtitleTrack(d,a)}}},n.findTrackId=function(t){for(var s=this.tracksInGroup,g=0;g<s.length;g++){var a=s[g];if((!this.selectDefaultTrack||a.default)&&(!t||t===a.name))return a.id}return-1},n.onError=function(t,s){h.prototype.onError.call(this,t,s),!s.fatal&&s.context&&s.context.type===k.PlaylistContextType.SUBTITLE_TRACK&&s.context.id===this.trackId&&s.context.groupId===this.groupId&&this.retryLoadingOrFail(s)},n.loadPlaylist=function(t){var s=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(s)){var g=s.id,a=s.groupId,o=s.url;if(t)try{o=t.addDirectives(o)}catch(d){this.warn("Could not construct new URL with HLS Delivery Directives: "+d)}this.log("Loading subtitle playlist for id "+g),this.hls.trigger(C.Events.SUBTITLE_TRACK_LOADING,{url:o,id:g,groupId:a,deliveryDirectives:t||null})}},n.toggleTrackModes=function(t){var s=this,g=this.media,a=this.subtitleDisplay,o=this.trackId;if(g){var d=T(g.textTracks),r=d.filter(function(m){return m.groupId===s.groupId});if(t===-1)[].slice.call(d).forEach(function(m){m.mode="disabled"});else{var l=r[o];l&&(l.mode="disabled")}var i=r[t];i&&(i.mode=a?"showing":"hidden")}},n.setSubtitleTrack=function(t,s){var g,a=this.tracksInGroup;if(this.media){if(this.trackId!==t&&this.toggleTrackModes(t),!(this.trackId===t&&(t===-1||(g=a[t])!==null&&g!==void 0&&g.details)||t<-1||t>=a.length)){this.clearTimer();var o=a[t];if(this.log("Switching to subtitle track "+t),this.trackId=t,o){var d=o.id,r=o.groupId,l=r===void 0?"":r,i=o.name,m=o.type,S=o.url;this.hls.trigger(C.Events.SUBTITLE_TRACK_SWITCH,{id:d,groupId:l,name:i,type:m,url:S});var w=this.switchParams(o.url,s==null?void 0:s.details);this.loadPlaylist(w)}else this.hls.trigger(C.Events.SUBTITLE_TRACK_SWITCH,{id:t})}}else this.queuedDefaultTrack=t},n.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,s=T(this.media.textTracks),g=0;g<s.length;g++)if(s[g].mode==="hidden")t=g;else if(s[g].mode==="showing"){t=g;break}this.subtitleTrack!==t&&(this.subtitleTrack=t)}},u=E,(e=[{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1;var s=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(t,s)}}])&&D(u.prototype,e),E}(v.default);function T(h){for(var p=[],b=0;b<h.length;b++){var E=h[b];E.kind==="subtitles"&&E.label&&p.push(h[b])}return p}A.default=f},"./src/controller/timeline-controller.ts":function(R,A,c){c.r(A),c.d(A,"TimelineController",function(){return p});var C=c("./src/polyfills/number.ts"),y=c("./src/events.ts"),v=c("./src/utils/cea-608-parser.ts"),k=c("./src/utils/output-filter.ts"),D=c("./src/utils/webvtt-parser.ts"),L=c("./src/utils/texttrack-utils.ts"),f=c("./src/utils/imsc1-ttml-parser.ts"),T=c("./src/types/loader.ts"),h=c("./src/utils/logger.ts"),p=function(){function E(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var n=new k.default(this,"textTrack1"),t=new k.default(this,"textTrack2"),s=new k.default(this,"textTrack3"),g=new k.default(this,"textTrack4");this.cea608Parser1=new v.default(1,n,t),this.cea608Parser2=new v.default(3,s,g)}e.on(y.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(y.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(y.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(y.Events.FRAG_LOADING,this.onFragLoading,this),e.on(y.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(y.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(y.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(y.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(y.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(y.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var u=E.prototype;return u.destroy=function(){var e=this.hls;e.off(y.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(y.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(y.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(y.Events.FRAG_LOADING,this.onFragLoading,this),e.off(y.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(y.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(y.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(y.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(y.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(y.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},u.addCues=function(e,n,t,s,g){for(var a,o,d,r,l=!1,i=g.length;i--;){var m=g[i],S=(a=m[0],o=m[1],d=n,r=t,Math.min(o,r)-Math.max(a,d));if(S>=0&&(m[0]=Math.min(m[0],n),m[1]=Math.max(m[1],t),l=!0,S/(t-n)>.5))return}if(l||g.push([n,t]),this.config.renderTextTracksNatively){var w=this.captionsTracks[e];this.Cues.newCue(w,n,t,s)}else{var x=this.Cues.newCue(null,n,t,s);this.hls.trigger(y.Events.CUES_PARSED,{type:"captions",cues:x,track:e})}},u.onInitPtsFound=function(e,n){var t=this,s=n.frag,g=n.id,a=n.initPTS,o=n.timescale,d=this.unparsedVttFrags;g==="main"&&(this.initPTS[s.cc]=a,this.timescale[s.cc]=o),d.length&&(this.unparsedVttFrags=[],d.forEach(function(r){t.onFragLoaded(y.Events.FRAG_LOADED,r)}))},u.getExistingTrack=function(e){var n=this.media;if(n)for(var t=0;t<n.textTracks.length;t++){var s=n.textTracks[t];if(s[e])return s}return null},u.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},u.createNativeTrack=function(e){if(!this.captionsTracks[e]){var n=this.captionsProperties,t=this.captionsTracks,s=this.media,g=n[e],a=g.label,o=g.languageCode,d=this.getExistingTrack(e);if(d)t[e]=d,Object(L.clearCurrentCues)(t[e]),Object(L.sendAddTrackEvent)(t[e],s);else{var r=this.createTextTrack("captions",a,o);r&&(r[e]=!0,t[e]=r)}}},u.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var n=this.captionsProperties[e];if(n){var t={_id:e,label:n.label,kind:"captions",default:!!n.media&&!!n.media.default,closedCaptions:n.media};this.nonNativeCaptionsTracks[e]=t,this.hls.trigger(y.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[t]})}}},u.createTextTrack=function(e,n,t){var s=this.media;if(s)return s.addTextTrack(e,n,t)},u.onMediaAttaching=function(e,n){this.media=n.media,this._cleanTracks()},u.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach(function(n){Object(L.clearCurrentCues)(e[n]),delete e[n]}),this.nonNativeCaptionsTracks={}},u.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},u._cleanTracks=function(){var e=this.media;if(e){var n=e.textTracks;if(n)for(var t=0;t<n.length;t++)Object(L.clearCurrentCues)(n[t])}},u.onSubtitleTracksUpdated=function(e,n){var t=this;this.textTracks=[];var s=n.subtitleTracks||[],g=s.some(function(r){return r.textCodec===f.IMSC1_CODEC});if(this.config.enableWebVTT||g&&this.config.enableIMSC1){var a=this.tracks&&s&&this.tracks.length===s.length;if(this.tracks=s||[],this.config.renderTextTracksNatively){var o=this.media?this.media.textTracks:[];this.tracks.forEach(function(r,l){var i;if(l<o.length){for(var m=null,S=0;S<o.length;S++)if(b(o[S],r)){m=o[S];break}m&&(i=m)}i?Object(L.clearCurrentCues)(i):(i=t.createTextTrack("subtitles",r.name,r.lang))&&(i.mode="disabled"),i&&(i.groupId=r.groupId,t.textTracks.push(i))})}else if(!a&&this.tracks&&this.tracks.length){var d=this.tracks.map(function(r){return{label:r.name,kind:r.type.toLowerCase(),default:r.default,subtitleTrack:r}});this.hls.trigger(y.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:d})}}},u.onManifestLoaded=function(e,n){var t=this;this.config.enableCEA708Captions&&n.captions&&n.captions.forEach(function(s){var g=/(?:CC|SERVICE)([1-4])/.exec(s.instreamId);if(g){var a="textTrack"+g[1],o=t.captionsProperties[a];o&&(o.label=s.name,s.lang&&(o.languageCode=s.lang),o.media=s)}})},u.onFragLoading=function(e,n){var t=this.cea608Parser1,s=this.cea608Parser2,g=this.lastSn;if(this.enabled&&t&&s&&n.frag.type===T.PlaylistLevelType.MAIN){var a=n.frag.sn;a!==g+1&&(t.reset(),s.reset()),this.lastSn=a}},u.onFragLoaded=function(e,n){var t=n.frag,s=n.payload,g=this.initPTS,a=this.unparsedVttFrags;if(t.type===T.PlaylistLevelType.SUBTITLE)if(s.byteLength){if(!Object(C.isFiniteNumber)(g[t.cc]))return a.push(n),void(g.length&&this.hls.trigger(y.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:new Error("Missing initial subtitle PTS")}));var o=t.decryptdata;if(o==null||o.key==null||o.method!=="AES-128"){var d=this.tracks[t.level],r=this.vttCCs;r[t.cc]||(r[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc),d&&d.textCodec===f.IMSC1_CODEC?this._parseIMSC1(t,s):this._parseVTTs(t,s,r)}}else this.hls.trigger(y.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:new Error("Empty subtitle payload")})},u._parseIMSC1=function(e,n){var t=this,s=this.hls;Object(f.parseIMSC1)(n,this.initPTS[e.cc],this.timescale[e.cc],function(g){t._appendCues(g,e.level),s.trigger(y.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},function(g){h.logger.log("Failed to parse IMSC1: "+g),s.trigger(y.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:g})})},u._parseVTTs=function(e,n,t){var s=this,g=this.hls;Object(D.parseWebVTT)(n,this.initPTS[e.cc],this.timescale[e.cc],t,e.cc,e.start,function(a){s._appendCues(a,e.level),g.trigger(y.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},function(a){s._fallbackToIMSC1(e,n),h.logger.log("Failed to parse VTT cue: "+a),g.trigger(y.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:a})})},u._fallbackToIMSC1=function(e,n){var t=this,s=this.tracks[e.level];s.textCodec||Object(f.parseIMSC1)(n,this.initPTS[e.cc],this.timescale[e.cc],function(){s.textCodec=f.IMSC1_CODEC,t._parseIMSC1(e,n)},function(){s.textCodec="wvtt"})},u._appendCues=function(e,n){var t=this.hls;if(this.config.renderTextTracksNatively){var s=this.textTracks[n];if(s.mode==="disabled")return;e.forEach(function(a){return Object(L.addCueToTrack)(s,a)})}else{var g=this.tracks[n].default?"default":"subtitles"+n;t.trigger(y.Events.CUES_PARSED,{type:"subtitles",cues:e,track:g})}},u.onFragDecrypted=function(e,n){var t=n.frag;if(t.type===T.PlaylistLevelType.SUBTITLE){if(!Object(C.isFiniteNumber)(this.initPTS[t.cc]))return void this.unparsedVttFrags.push(n);this.onFragLoaded(y.Events.FRAG_LOADED,n)}},u.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},u.onFragParsingUserdata=function(e,n){var t=this.cea608Parser1,s=this.cea608Parser2;if(this.enabled&&t&&s)for(var g=0;g<n.samples.length;g++){var a=n.samples[g].bytes;if(a){var o=this.extractCea608Data(a);t.addData(n.samples[g].pts,o[0]),s.addData(n.samples[g].pts,o[1])}}},u.onBufferFlushing=function(e,n){var t=n.startOffset,s=n.endOffset,g=n.endOffsetSubtitles,a=n.type,o=this.media;if(o&&!(o.currentTime<s)){if(!a||a==="video"){var d=this.captionsTracks;Object.keys(d).forEach(function(l){return Object(L.removeCuesInRange)(d[l],t,s)})}if(this.config.renderTextTracksNatively&&t===0&&g!==void 0){var r=this.textTracks;Object.keys(r).forEach(function(l){return Object(L.removeCuesInRange)(r[l],t,g)})}}},u.extractCea608Data=function(e){for(var n=31&e[0],t=2,s=[[],[]],g=0;g<n;g++){var a=e[t++],o=127&e[t++],d=127&e[t++],r=3&a;o===0&&d===0||4&a&&(r!==0&&r!==1||(s[r].push(o),s[r].push(d)))}return s},E}();function b(E,u){return E&&E.label===u.name&&!(E.textTrack1||E.textTrack2)}},"./src/crypt/aes-crypto.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return C});var C=function(){function y(v,k){this.subtle=void 0,this.aesIV=void 0,this.subtle=v,this.aesIV=k}return y.prototype.decrypt=function(v,k){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},k,v)},y}()},"./src/crypt/aes-decryptor.ts":function(R,A,c){c.r(A),c.d(A,"removePadding",function(){return y}),c.d(A,"default",function(){return v});var C=c("./src/utils/typed-array.ts");function y(k){var D=k.byteLength,L=D&&new DataView(k.buffer).getUint8(D-1);return L?Object(C.sliceUint8)(k,0,D-L):k}var v=function(){function k(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var D=k.prototype;return D.uint8ArrayToUint32Array_=function(L){for(var f=new DataView(L),T=new Uint32Array(4),h=0;h<4;h++)T[h]=f.getUint32(4*h);return T},D.initTable=function(){var L=this.sBox,f=this.invSBox,T=this.subMix,h=T[0],p=T[1],b=T[2],E=T[3],u=this.invSubMix,e=u[0],n=u[1],t=u[2],s=u[3],g=new Uint32Array(256),a=0,o=0,d=0;for(d=0;d<256;d++)g[d]=d<128?d<<1:d<<1^283;for(d=0;d<256;d++){var r=o^o<<1^o<<2^o<<3^o<<4;r=r>>>8^255&r^99,L[a]=r,f[r]=a;var l=g[a],i=g[l],m=g[i],S=257*g[r]^16843008*r;h[a]=S<<24|S>>>8,p[a]=S<<16|S>>>16,b[a]=S<<8|S>>>24,E[a]=S,S=16843009*m^65537*i^257*l^16843008*a,e[r]=S<<24|S>>>8,n[r]=S<<16|S>>>16,t[r]=S<<8|S>>>24,s[r]=S,a?(a=l^g[g[g[m^l]]],o^=g[g[o]]):a=o=1}},D.expandKey=function(L){for(var f=this.uint8ArrayToUint32Array_(L),T=!0,h=0;h<f.length&&T;)T=f[h]===this.key[h],h++;if(!T){this.key=f;var p=this.keySize=f.length;if(p!==4&&p!==6&&p!==8)throw new Error("Invalid aes key size="+p);var b,E,u,e,n=this.ksRows=4*(p+6+1),t=this.keySchedule=new Uint32Array(n),s=this.invKeySchedule=new Uint32Array(n),g=this.sBox,a=this.rcon,o=this.invSubMix,d=o[0],r=o[1],l=o[2],i=o[3];for(b=0;b<n;b++)b<p?u=t[b]=f[b]:(e=u,b%p==0?(e=g[(e=e<<8|e>>>24)>>>24]<<24|g[e>>>16&255]<<16|g[e>>>8&255]<<8|g[255&e],e^=a[b/p|0]<<24):p>6&&b%p==4&&(e=g[e>>>24]<<24|g[e>>>16&255]<<16|g[e>>>8&255]<<8|g[255&e]),t[b]=u=(t[b-p]^e)>>>0);for(E=0;E<n;E++)b=n-E,e=3&E?t[b]:t[b-4],s[E]=E<4||b<=4?e:d[g[e>>>24]]^r[g[e>>>16&255]]^l[g[e>>>8&255]]^i[g[255&e]],s[E]=s[E]>>>0}},D.networkToHostOrderSwap=function(L){return L<<24|(65280&L)<<8|(16711680&L)>>8|L>>>24},D.decrypt=function(L,f,T){for(var h,p,b,E,u,e,n,t,s,g,a,o,d,r,l=this.keySize+6,i=this.invKeySchedule,m=this.invSBox,S=this.invSubMix,w=S[0],x=S[1],_=S[2],I=S[3],P=this.uint8ArrayToUint32Array_(T),N=P[0],U=P[1],M=P[2],B=P[3],G=new Int32Array(L),K=new Int32Array(G.length),z=this.networkToHostOrderSwap;f<G.length;){for(s=z(G[f]),g=z(G[f+1]),a=z(G[f+2]),o=z(G[f+3]),u=s^i[0],e=o^i[1],n=a^i[2],t=g^i[3],d=4,r=1;r<l;r++)h=w[u>>>24]^x[e>>16&255]^_[n>>8&255]^I[255&t]^i[d],p=w[e>>>24]^x[n>>16&255]^_[t>>8&255]^I[255&u]^i[d+1],b=w[n>>>24]^x[t>>16&255]^_[u>>8&255]^I[255&e]^i[d+2],E=w[t>>>24]^x[u>>16&255]^_[e>>8&255]^I[255&n]^i[d+3],u=h,e=p,n=b,t=E,d+=4;h=m[u>>>24]<<24^m[e>>16&255]<<16^m[n>>8&255]<<8^m[255&t]^i[d],p=m[e>>>24]<<24^m[n>>16&255]<<16^m[t>>8&255]<<8^m[255&u]^i[d+1],b=m[n>>>24]<<24^m[t>>16&255]<<16^m[u>>8&255]<<8^m[255&e]^i[d+2],E=m[t>>>24]<<24^m[u>>16&255]<<16^m[e>>8&255]<<8^m[255&n]^i[d+3],K[f]=z(h^N),K[f+1]=z(E^U),K[f+2]=z(b^M),K[f+3]=z(p^B),N=s,U=g,M=a,B=o,f+=4}return K.buffer},k}()},"./src/crypt/decrypter.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return f});var C=c("./src/crypt/aes-crypto.ts"),y=c("./src/crypt/fast-aes-key.ts"),v=c("./src/crypt/aes-decryptor.ts"),k=c("./src/utils/logger.ts"),D=c("./src/utils/mp4-tools.ts"),L=c("./src/utils/typed-array.ts"),f=function(){function T(p,b,E){var u=(E===void 0?{}:E).removePKCS7Padding,e=u===void 0||u;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=p,this.config=b,this.removePKCS7Padding=e,e)try{var n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.subtle===null&&(this.config.enableSoftwareAES=!0)}var h=T.prototype;return h.destroy=function(){this.observer=null},h.isSync=function(){return this.config.enableSoftwareAES},h.flush=function(){var p=this.currentResult;if(p){var b=new Uint8Array(p);return this.reset(),this.removePKCS7Padding?Object(v.removePadding)(b):b}this.reset()},h.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},h.decrypt=function(p,b,E,u){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(p),b,E);var e=this.flush();e&&u(e.buffer)}else this.webCryptoDecrypt(new Uint8Array(p),b,E).then(u)},h.softwareDecrypt=function(p,b,E){var u=this.currentIV,e=this.currentResult,n=this.remainderData;this.logOnce("JS AES decrypt"),n&&(p=Object(D.appendUint8Array)(n,p),this.remainderData=null);var t=this.getValidChunk(p);if(!t.length)return null;u&&(E=u);var s=this.softwareDecrypter;s||(s=this.softwareDecrypter=new v.default),s.expandKey(b);var g=e;return this.currentResult=s.decrypt(t.buffer,0,E),this.currentIV=Object(L.sliceUint8)(t,-16).buffer,g||null},h.webCryptoDecrypt=function(p,b,E){var u=this,e=this.subtle;return this.key===b&&this.fastAesKey||(this.key=b,this.fastAesKey=new y.default(e,b)),this.fastAesKey.expandKey().then(function(n){return e?new C.default(e,E).decrypt(p.buffer,n):Promise.reject(new Error("web crypto not initialized"))}).catch(function(n){return u.onWebCryptoError(n,p,b,E)})},h.onWebCryptoError=function(p,b,E,u){return k.logger.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",p),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(b,E,u)},h.getValidChunk=function(p){var b=p,E=p.length-p.length%16;return E!==p.length&&(b=Object(L.sliceUint8)(p,0,E),this.remainderData=Object(L.sliceUint8)(p,E)),b},h.logOnce=function(p){this.logEnabled&&(k.logger.log("[decrypter.ts]: "+p),this.logEnabled=!1)},T}()},"./src/crypt/fast-aes-key.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return C});var C=function(){function y(v,k){this.subtle=void 0,this.key=void 0,this.subtle=v,this.key=k}return y.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},y}()},"./src/demux/aacdemuxer.ts":function(R,A,c){c.r(A);var C=c("./src/demux/base-audio-demuxer.ts"),y=c("./src/demux/adts.ts"),v=c("./src/utils/logger.ts"),k=c("./src/demux/id3.ts");function D(f,T){return(D=Object.setPrototypeOf||function(h,p){return h.__proto__=p,h})(f,T)}var L=function(f){var T,h;function p(E,u){var e;return(e=f.call(this)||this).observer=void 0,e.config=void 0,e.observer=E,e.config=u,e}h=f,(T=p).prototype=Object.create(h.prototype),T.prototype.constructor=T,D(T,h);var b=p.prototype;return b.resetInitSegment=function(E,u,e){f.prototype.resetInitSegment.call(this,E,u,e),this._audioTrack={container:"audio/adts",type:"audio",id:0,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:E,duration:e,inputTimeScale:9e4,dropped:0}},p.probe=function(E){if(!E)return!1;for(var u=(k.getID3Data(E,0)||[]).length,e=E.length;u<e;u++)if(y.probe(E,u))return v.logger.log("ADTS sync word found !"),!0;return!1},b.canParse=function(E,u){return y.canParse(E,u)},b.appendFrame=function(E,u,e){y.initTrackConfig(E,this.observer,u,e,E.manifestCodec);var n=y.appendFrame(E,u,e,this.initPTS,this.frameIndex);if(n&&n.missing===0)return n},p}(C.default);L.minProbeByteLength=9,A.default=L},"./src/demux/adts.ts":function(R,A,c){c.r(A),c.d(A,"getAudioConfig",function(){return k}),c.d(A,"isHeaderPattern",function(){return D}),c.d(A,"getHeaderLength",function(){return L}),c.d(A,"getFullFrameLength",function(){return f}),c.d(A,"canGetFrameLength",function(){return T}),c.d(A,"isHeader",function(){return h}),c.d(A,"canParse",function(){return p}),c.d(A,"probe",function(){return b}),c.d(A,"initTrackConfig",function(){return E}),c.d(A,"getFrameDuration",function(){return u}),c.d(A,"parseFrameHeader",function(){return e}),c.d(A,"appendFrame",function(){return n});var C=c("./src/utils/logger.ts"),y=c("./src/errors.ts"),v=c("./src/events.ts");function k(t,s,g,a){var o,d,r,l,i=navigator.userAgent.toLowerCase(),m=a,S=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];o=1+((192&s[g+2])>>>6);var w=(60&s[g+2])>>>2;if(!(w>S.length-1))return r=(1&s[g+2])<<2,r|=(192&s[g+3])>>>6,C.logger.log("manifest codec:"+a+", ADTS type:"+o+", samplingIndex:"+w),/firefox/i.test(i)?w>=6?(o=5,l=new Array(4),d=w-3):(o=2,l=new Array(2),d=w):i.indexOf("android")!==-1?(o=2,l=new Array(2),d=w):(o=5,l=new Array(4),a&&(a.indexOf("mp4a.40.29")!==-1||a.indexOf("mp4a.40.5")!==-1)||!a&&w>=6?d=w-3:((a&&a.indexOf("mp4a.40.2")!==-1&&(w>=6&&r===1||/vivaldi/i.test(i))||!a&&r===1)&&(o=2,l=new Array(2)),d=w)),l[0]=o<<3,l[0]|=(14&w)>>1,l[1]|=(1&w)<<7,l[1]|=r<<3,o===5&&(l[1]|=(14&d)>>1,l[2]=(1&d)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:S[w],channelCount:r,codec:"mp4a.40."+o,manifestCodec:m};t.trigger(v.Events.ERROR,{type:y.ErrorTypes.MEDIA_ERROR,details:y.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+w})}function D(t,s){return t[s]===255&&(246&t[s+1])==240}function L(t,s){return 1&t[s+1]?7:9}function f(t,s){return(3&t[s+3])<<11|t[s+4]<<3|(224&t[s+5])>>>5}function T(t,s){return s+5<t.length}function h(t,s){return s+1<t.length&&D(t,s)}function p(t,s){return T(t,s)&&D(t,s)&&f(t,s)<=t.length-s}function b(t,s){if(h(t,s)){var g=L(t,s);if(s+g>=t.length)return!1;var a=f(t,s);if(a<=g)return!1;var o=s+a;return o===t.length||h(t,o)}return!1}function E(t,s,g,a,o){if(!t.samplerate){var d=k(s,g,a,o);if(!d)return;t.config=d.config,t.samplerate=d.samplerate,t.channelCount=d.channelCount,t.codec=d.codec,t.manifestCodec=d.manifestCodec,C.logger.log("parsed codec:"+t.codec+", rate:"+d.samplerate+", channels:"+d.channelCount)}}function u(t){return 9216e4/t}function e(t,s,g,a,o){var d=L(t,s),r=f(t,s);if((r-=d)>0)return{headerLength:d,frameLength:r,stamp:g+a*o}}function n(t,s,g,a,o){var d=e(s,g,a,o,u(t.samplerate));if(d){var r,l=d.frameLength,i=d.headerLength,m=d.stamp,S=i+l,w=Math.max(0,g+S-s.length);w?(r=new Uint8Array(S-i)).set(s.subarray(g+i,s.length),0):r=s.subarray(g+i,g+S);var x={unit:r,pts:m};return w||t.samples.push(x),{sample:x,length:S,missing:w}}}},"./src/demux/base-audio-demuxer.ts":function(R,A,c){c.r(A),c.d(A,"initPTSFn",function(){return f});var C=c("./src/polyfills/number.ts"),y=c("./src/demux/id3.ts"),v=c("./src/demux/dummy-demuxed-track.ts"),k=c("./src/utils/mp4-tools.ts"),D=c("./src/utils/typed-array.ts"),L=function(){function T(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var h=T.prototype;return h.resetInitSegment=function(p,b,E){this._id3Track={type:"id3",id:0,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},h.resetTimeStamp=function(){},h.resetContiguity=function(){},h.canParse=function(p,b){return!1},h.appendFrame=function(p,b,E){},h.demux=function(p,b){this.cachedData&&(p=Object(k.appendUint8Array)(this.cachedData,p),this.cachedData=null);var E,u,e=y.getID3Data(p,0),n=e?e.length:0,t=this._audioTrack,s=this._id3Track,g=e?y.getTimeStamp(e):void 0,a=p.length;for(this.frameIndex!==0&&this.initPTS!==null||(this.initPTS=f(g,b)),e&&e.length>0&&s.samples.push({pts:this.initPTS,dts:this.initPTS,data:e}),u=this.initPTS;n<a;){if(this.canParse(p,n)){var o=this.appendFrame(t,p,n);o?(this.frameIndex++,u=o.sample.pts,E=n+=o.length):n=a}else y.canParse(p,n)?(e=y.getID3Data(p,n),s.samples.push({pts:u,dts:u,data:e}),E=n+=e.length):n++;if(n===a&&E!==a){var d=Object(D.sliceUint8)(p,E);this.cachedData?this.cachedData=Object(k.appendUint8Array)(this.cachedData,d):this.cachedData=d}}return{audioTrack:t,avcTrack:Object(v.dummyTrack)(),id3Track:s,textTrack:Object(v.dummyTrack)()}},h.demuxSampleAes=function(p,b,E){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},h.flush=function(p){var b=this.cachedData;return b&&(this.cachedData=null,this.demux(b,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:Object(v.dummyTrack)(),id3Track:this._id3Track,textTrack:Object(v.dummyTrack)()}},h.destroy=function(){},T}(),f=function(T,h){return Object(C.isFiniteNumber)(T)?90*T:9e4*h};A.default=L},"./src/demux/chunk-cache.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return C});var C=function(){function y(){this.chunks=[],this.dataLength=0}var v=y.prototype;return v.push=function(k){this.chunks.push(k),this.dataLength+=k.length},v.flush=function(){var k,D=this.chunks,L=this.dataLength;return D.length?(k=D.length===1?D[0]:function(f,T){for(var h=new Uint8Array(T),p=0,b=0;b<f.length;b++){var E=f[b];h.set(E,p),p+=E.length}return h}(D,L),this.reset(),k):new Uint8Array(0)},v.reset=function(){this.chunks.length=0,this.dataLength=0},y}()},"./src/demux/dummy-demuxed-track.ts":function(R,A,c){function C(){return{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}c.r(A),c.d(A,"dummyTrack",function(){return C})},"./src/demux/exp-golomb.ts":function(R,A,c){c.r(A);var C=c("./src/utils/logger.ts"),y=function(){function v(D){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=D,this.bytesAvailable=D.byteLength,this.word=0,this.bitsAvailable=0}var k=v.prototype;return k.loadWord=function(){var D=this.data,L=this.bytesAvailable,f=D.byteLength-L,T=new Uint8Array(4),h=Math.min(4,L);if(h===0)throw new Error("no bytes available");T.set(D.subarray(f,f+h)),this.word=new DataView(T.buffer).getUint32(0),this.bitsAvailable=8*h,this.bytesAvailable-=h},k.skipBits=function(D){var L;this.bitsAvailable>D?(this.word<<=D,this.bitsAvailable-=D):(D-=this.bitsAvailable,D-=(L=D>>3)>>3,this.bytesAvailable-=L,this.loadWord(),this.word<<=D,this.bitsAvailable-=D)},k.readBits=function(D){var L=Math.min(this.bitsAvailable,D),f=this.word>>>32-L;return D>32&&C.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=L,this.bitsAvailable>0?this.word<<=L:this.bytesAvailable>0&&this.loadWord(),(L=D-L)>0&&this.bitsAvailable?f<<L|this.readBits(L):f},k.skipLZ=function(){var D;for(D=0;D<this.bitsAvailable;++D)if(this.word&2147483648>>>D)return this.word<<=D,this.bitsAvailable-=D,D;return this.loadWord(),D+this.skipLZ()},k.skipUEG=function(){this.skipBits(1+this.skipLZ())},k.skipEG=function(){this.skipBits(1+this.skipLZ())},k.readUEG=function(){var D=this.skipLZ();return this.readBits(D+1)-1},k.readEG=function(){var D=this.readUEG();return 1&D?1+D>>>1:-1*(D>>>1)},k.readBoolean=function(){return this.readBits(1)===1},k.readUByte=function(){return this.readBits(8)},k.readUShort=function(){return this.readBits(16)},k.readUInt=function(){return this.readBits(32)},k.skipScalingList=function(D){for(var L=8,f=8,T=0;T<D;T++)f!==0&&(f=(L+this.readEG()+256)%256),L=f===0?L:f},k.readSPS=function(){var D,L,f,T=0,h=0,p=0,b=0,E=this.readUByte.bind(this),u=this.readBits.bind(this),e=this.readUEG.bind(this),n=this.readBoolean.bind(this),t=this.skipBits.bind(this),s=this.skipEG.bind(this),g=this.skipUEG.bind(this),a=this.skipScalingList.bind(this);E();var o=E();if(u(5),t(3),E(),g(),o===100||o===110||o===122||o===244||o===44||o===83||o===86||o===118||o===128){var d=e();if(d===3&&t(1),g(),g(),t(1),n())for(L=d!==3?8:12,f=0;f<L;f++)n()&&a(f<6?16:64)}g();var r=e();if(r===0)e();else if(r===1)for(t(1),s(),s(),D=e(),f=0;f<D;f++)s();g(),t(1);var l=e(),i=e(),m=u(1);m===0&&t(1),t(1),n()&&(T=e(),h=e(),p=e(),b=e());var S=[1,1];if(n()&&n())switch(E()){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[E()<<8|E(),E()<<8|E()]}return{width:Math.ceil(16*(l+1)-2*T-2*h),height:(2-m)*(i+1)*16-(m?2:4)*(p+b),pixelRatio:S}},k.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},v}();A.default=y},"./src/demux/id3.ts":function(R,A,c){c.r(A),c.d(A,"isHeader",function(){return y}),c.d(A,"isFooter",function(){return v}),c.d(A,"getID3Data",function(){return k}),c.d(A,"canParse",function(){return L}),c.d(A,"getTimeStamp",function(){return f}),c.d(A,"isTimeStampFrame",function(){return T}),c.d(A,"getID3Frames",function(){return p}),c.d(A,"decodeFrame",function(){return b}),c.d(A,"utf8ArrayToStr",function(){return t}),c.d(A,"testables",function(){return s});var C,y=function(a,o){return o+10<=a.length&&a[o]===73&&a[o+1]===68&&a[o+2]===51&&a[o+3]<255&&a[o+4]<255&&a[o+6]<128&&a[o+7]<128&&a[o+8]<128&&a[o+9]<128},v=function(a,o){return o+10<=a.length&&a[o]===51&&a[o+1]===68&&a[o+2]===73&&a[o+3]<255&&a[o+4]<255&&a[o+6]<128&&a[o+7]<128&&a[o+8]<128&&a[o+9]<128},k=function(a,o){for(var d=o,r=0;y(a,o);)r+=10,r+=D(a,o+6),v(a,o+10)&&(r+=10),o+=r;if(r>0)return a.subarray(d,d+r)},D=function(a,o){var d=0;return d=(127&a[o])<<21,d|=(127&a[o+1])<<14,d|=(127&a[o+2])<<7,d|=127&a[o+3]},L=function(a,o){return y(a,o)&&D(a,o+6)+10<=a.length-o},f=function(a){for(var o=p(a),d=0;d<o.length;d++){var r=o[d];if(T(r))return n(r)}},T=function(a){return a&&a.key==="PRIV"&&a.info==="com.apple.streaming.transportStreamTimestamp"},h=function(a){var o=String.fromCharCode(a[0],a[1],a[2],a[3]),d=D(a,4);return{type:o,size:d,data:a.subarray(10,10+d)}},p=function(a){for(var o=0,d=[];y(a,o);){for(var r=D(a,o+6),l=(o+=10)+r;o+8<l;){var i=h(a.subarray(o)),m=b(i);m&&d.push(m),o+=i.size+10}v(a,o)&&(o+=10)}return d},b=function(a){return a.type==="PRIV"?E(a):a.type[0]==="W"?e(a):u(a)},E=function(a){if(!(a.size<2)){var o=t(a.data,!0),d=new Uint8Array(a.data.subarray(o.length+1));return{key:a.type,info:o,data:d.buffer}}},u=function(a){if(!(a.size<2)){if(a.type==="TXXX"){var o=1,d=t(a.data.subarray(o),!0);o+=d.length+1;var r=t(a.data.subarray(o));return{key:a.type,info:d,data:r}}var l=t(a.data.subarray(1));return{key:a.type,data:l}}},e=function(a){if(a.type==="WXXX"){if(a.size<2)return;var o=1,d=t(a.data.subarray(o),!0);o+=d.length+1;var r=t(a.data.subarray(o));return{key:a.type,info:d,data:r}}var l=t(a.data);return{key:a.type,data:l}},n=function(a){if(a.data.byteLength===8){var o=new Uint8Array(a.data),d=1&o[3],r=(o[4]<<23)+(o[5]<<15)+(o[6]<<7)+o[7];return r/=45,d&&(r+=4772185884e-2),Math.round(r)}},t=function(a,o){o===void 0&&(o=!1);var d=g();if(d){var r=d.decode(a);if(o){var l=r.indexOf("\0");return l!==-1?r.substring(0,l):r}return r.replace(/\0/g,"")}for(var i,m,S,w=a.length,x="",_=0;_<w;){if((i=a[_++])===0&&o)return x;if(i!==0&&i!==3)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:x+=String.fromCharCode(i);break;case 12:case 13:m=a[_++],x+=String.fromCharCode((31&i)<<6|63&m);break;case 14:m=a[_++],S=a[_++],x+=String.fromCharCode((15&i)<<12|(63&m)<<6|(63&S)<<0)}}return x},s={decodeTextFrame:u};function g(){return C||self.TextDecoder===void 0||(C=new self.TextDecoder("utf-8")),C}},"./src/demux/mp3demuxer.ts":function(R,A,c){c.r(A);var C=c("./src/demux/base-audio-demuxer.ts"),y=c("./src/demux/id3.ts"),v=c("./src/utils/logger.ts"),k=c("./src/demux/mpegaudio.ts");function D(f,T){return(D=Object.setPrototypeOf||function(h,p){return h.__proto__=p,h})(f,T)}var L=function(f){var T,h;function p(){return f.apply(this,arguments)||this}h=f,(T=p).prototype=Object.create(h.prototype),T.prototype.constructor=T,D(T,h);var b=p.prototype;return b.resetInitSegment=function(E,u,e){f.prototype.resetInitSegment.call(this,E,u,e),this._audioTrack={container:"audio/mpeg",type:"audio",id:0,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:E,duration:e,inputTimeScale:9e4,dropped:0}},p.probe=function(E){if(!E)return!1;for(var u=(y.getID3Data(E,0)||[]).length,e=E.length;u<e;u++)if(k.probe(E,u))return v.logger.log("MPEG Audio sync word found !"),!0;return!1},b.canParse=function(E,u){return k.canParse(E,u)},b.appendFrame=function(E,u,e){if(this.initPTS!==null)return k.appendFrame(E,u,e,this.initPTS,this.frameIndex)},p}(C.default);L.minProbeByteLength=4,A.default=L},"./src/demux/mp4demuxer.ts":function(R,A,c){c.r(A);var C=c("./src/utils/mp4-tools.ts"),y=c("./src/demux/dummy-demuxed-track.ts"),v=function(){function k(L,f){this.remainderData=null,this.config=void 0,this.config=f}var D=k.prototype;return D.resetTimeStamp=function(){},D.resetInitSegment=function(){},D.resetContiguity=function(){},k.probe=function(L){return Object(C.findBox)({data:L,start:0,end:Math.min(L.length,16384)},["moof"]).length>0},D.demux=function(L){var f=L,T=Object(y.dummyTrack)();if(this.config.progressive){this.remainderData&&(f=Object(C.appendUint8Array)(this.remainderData,L));var h=Object(C.segmentValidRange)(f);this.remainderData=h.remainder,T.samples=h.valid||new Uint8Array}else T.samples=f;return{audioTrack:Object(y.dummyTrack)(),avcTrack:T,id3Track:Object(y.dummyTrack)(),textTrack:Object(y.dummyTrack)()}},D.flush=function(){var L=Object(y.dummyTrack)();return L.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:Object(y.dummyTrack)(),avcTrack:L,id3Track:Object(y.dummyTrack)(),textTrack:Object(y.dummyTrack)()}},D.demuxSampleAes=function(L,f,T){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},D.destroy=function(){},k}();v.minProbeByteLength=1024,A.default=v},"./src/demux/mpegaudio.ts":function(R,A,c){c.r(A),c.d(A,"appendFrame",function(){return L}),c.d(A,"parseHeader",function(){return f}),c.d(A,"isHeaderPattern",function(){return T}),c.d(A,"isHeader",function(){return h}),c.d(A,"canParse",function(){return p}),c.d(A,"probe",function(){return b});var C=null,y=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],v=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],k=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],D=[0,1,1,4];function L(E,u,e,n,t){if(!(e+24>u.length)){var s=f(u,e);if(s&&e+s.frameLength<=u.length){var g=n+t*(9e4*s.samplesPerFrame/s.sampleRate),a={unit:u.subarray(e,e+s.frameLength),pts:g,dts:g};return E.config=[],E.channelCount=s.channelCount,E.samplerate=s.sampleRate,E.samples.push(a),{sample:a,length:s.frameLength,missing:0}}}}function f(E,u){var e=E[u+1]>>3&3,n=E[u+1]>>1&3,t=E[u+2]>>4&15,s=E[u+2]>>2&3;if(e!==1&&t!==0&&t!==15&&s!==3){var g=E[u+2]>>1&1,a=E[u+3]>>6,o=1e3*y[14*(e===3?3-n:n===3?3:4)+t-1],d=v[3*(e===3?0:e===2?1:2)+s],r=a===3?1:2,l=k[e][n],i=D[n],m=8*l*i,S=Math.floor(l*o/d+g)*i;if(C===null){var w=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);C=w?parseInt(w[1]):0}return C&&C<=87&&n===2&&o>=224e3&&a===0&&(E[u+3]=128|E[u+3]),{sampleRate:d,channelCount:r,frameLength:S,samplesPerFrame:m}}}function T(E,u){return E[u]===255&&(224&E[u+1])==224&&(6&E[u+1])!=0}function h(E,u){return u+1<E.length&&T(E,u)}function p(E,u){return T(E,u)&&4<=E.length-u}function b(E,u){if(u+1<E.length&&T(E,u)){var e=f(E,u),n=4;e!=null&&e.frameLength&&(n=e.frameLength);var t=u+n;return t===E.length||h(E,t)}return!1}},"./src/demux/sample-aes.ts":function(R,A,c){c.r(A);var C=c("./src/crypt/decrypter.ts"),y=c("./src/demux/tsdemuxer.ts"),v=function(){function k(L,f,T){this.keyData=void 0,this.decrypter=void 0,this.keyData=T,this.decrypter=new C.default(L,f,{removePKCS7Padding:!1})}var D=k.prototype;return D.decryptBuffer=function(L,f){this.decrypter.decrypt(L,this.keyData.key.buffer,this.keyData.iv.buffer,f)},D.decryptAacSample=function(L,f,T,h){var p=L[f].unit,b=p.subarray(16,p.length-p.length%16),E=b.buffer.slice(b.byteOffset,b.byteOffset+b.length),u=this;this.decryptBuffer(E,function(e){var n=new Uint8Array(e);p.set(n,16),h||u.decryptAacSamples(L,f+1,T)})},D.decryptAacSamples=function(L,f,T){for(;;f++){if(f>=L.length)return void T();if(!(L[f].unit.length<32)){var h=this.decrypter.isSync();if(this.decryptAacSample(L,f,T,h),!h)return}}},D.getAvcEncryptedData=function(L){for(var f=16*Math.floor((L.length-48)/160)+16,T=new Int8Array(f),h=0,p=32;p<=L.length-16;p+=160,h+=16)T.set(L.subarray(p,p+16),h);return T},D.getAvcDecryptedUnit=function(L,f){for(var T=new Uint8Array(f),h=0,p=32;p<=L.length-16;p+=160,h+=16)L.set(T.subarray(h,h+16),p);return L},D.decryptAvcSample=function(L,f,T,h,p,b){var E=Object(y.discardEPB)(p.data),u=this.getAvcEncryptedData(E),e=this;this.decryptBuffer(u.buffer,function(n){p.data=e.getAvcDecryptedUnit(E,n),b||e.decryptAvcSamples(L,f,T+1,h)})},D.decryptAvcSamples=function(L,f,T,h){if(L instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;f++,T=0){if(f>=L.length)return void h();for(var p=L[f].units;!(T>=p.length);T++){var b=p[T];if(!(b.data.length<=48||b.type!==1&&b.type!==5)){var E=this.decrypter.isSync();if(this.decryptAvcSample(L,f,T,h,b,E),!E)return}}}},k}();A.default=v},"./src/demux/transmuxer-interface.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return h});var C=c("./node_modules/webworkify-webpack/index.js"),y=c("./src/events.ts"),v=c("./src/demux/transmuxer.ts"),k=c("./src/utils/logger.ts"),D=c("./src/errors.ts"),L=c("./src/utils/mediasource-helper.ts"),f=c("./node_modules/eventemitter3/index.js"),T=Object(L.getMediaSource)()||{isTypeSupported:function(){return!1}},h=function(){function p(E,u,e,n){var t=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=E,this.id=u,this.onTransmuxComplete=e,this.onFlush=n;var s=E.config,g=function(r,l){(l=l||{}).frag=t.frag,l.id=t.id,E.trigger(r,l)};this.observer=new f.EventEmitter,this.observer.on(y.Events.FRAG_DECRYPTED,g),this.observer.on(y.Events.ERROR,g);var a={mp4:T.isTypeSupported("video/mp4"),mpeg:T.isTypeSupported("audio/mpeg"),mp3:T.isTypeSupported('audio/mp4; codecs="mp3"')},o=navigator.vendor;if(s.enableWorker&&typeof Worker<"u"){var d;k.logger.log("demuxing in webworker");try{d=this.worker=C("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=function(r){E.trigger(y.Events.ERROR,{type:D.ErrorTypes.OTHER_ERROR,details:D.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(r.message+"  ("+r.filename+":"+r.lineno+")")})},d.postMessage({cmd:"init",typeSupported:a,vendor:o,id:u,config:JSON.stringify(s)})}catch(r){k.logger.warn("Error in worker:",r),k.logger.error("Error while initializing DemuxerWorker, fallback to inline"),d&&self.URL.revokeObjectURL(d.objectURL),this.transmuxer=new v.default(this.observer,a,s,o,u),this.worker=null}}else this.transmuxer=new v.default(this.observer,a,s,o,u)}var b=p.prototype;return b.destroy=function(){var E=this.worker;if(E)E.removeEventListener("message",this.onwmsg),E.terminate(),this.worker=null;else{var u=this.transmuxer;u&&(u.destroy(),this.transmuxer=null)}var e=this.observer;e&&e.removeAllListeners(),this.observer=null},b.push=function(E,u,e,n,t,s,g,a,o,d){var r=this;o.transmuxing.start=self.performance.now();var l=this.transmuxer,i=this.worker,m=s?s.start:t.start,S=t.decryptdata,w=this.frag,x=!(w&&t.cc===w.cc),_=!(w&&o.level===w.level),I=w?o.sn-w.sn:-1,P=this.part?o.part-this.part.index:1,N=!_&&(I===1||I===0&&P===1),U=self.performance.now();(_||I||t.stats.parsing.start===0)&&(t.stats.parsing.start=U),!s||!P&&N||(s.stats.parsing.start=U);var M=new v.TransmuxState(x,N,a,_,m);if(!N||x){k.logger.log("[transmuxer-interface, "+t.type+"]: Starting new transmux session for sn: "+o.sn+" p: "+o.part+" level: "+o.level+" id: "+o.id+`
        discontinuity: `+x+`
        trackSwitch: `+_+`
        contiguous: `+N+`
        accurateTimeOffset: `+a+`
        timeOffset: `+m);var B=new v.TransmuxConfig(e,n,u,g,d);this.configureTransmuxer(B)}if(this.frag=t,this.part=s,i)i.postMessage({cmd:"demux",data:E,decryptdata:S,chunkMeta:o,state:M},E instanceof ArrayBuffer?[E]:[]);else if(l){var G=l.push(E,S,o,M);Object(v.isPromise)(G)?G.then(function(K){r.handleTransmuxComplete(K)}):this.handleTransmuxComplete(G)}},b.flush=function(E){var u=this;E.transmuxing.start=self.performance.now();var e=this.transmuxer,n=this.worker;if(n)n.postMessage({cmd:"flush",chunkMeta:E});else if(e){var t=e.flush(E);Object(v.isPromise)(t)?t.then(function(s){u.handleFlushResult(s,E)}):this.handleFlushResult(t,E)}},b.handleFlushResult=function(E,u){var e=this;E.forEach(function(n){e.handleTransmuxComplete(n)}),this.onFlush(u)},b.onWorkerMessage=function(E){var u=E.data,e=this.hls;switch(u.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(u.data);break;case"flush":this.onFlush(u.data);break;default:u.data=u.data||{},u.data.frag=this.frag,u.data.id=this.id,e.trigger(u.event,u.data)}},b.configureTransmuxer=function(E){var u=this.worker,e=this.transmuxer;u?u.postMessage({cmd:"configure",config:E}):e&&e.configure(E)},b.handleTransmuxComplete=function(E){E.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(E)},p}()},"./src/demux/transmuxer-worker.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return D});var C=c("./src/demux/transmuxer.ts"),y=c("./src/events.ts"),v=c("./src/utils/logger.ts"),k=c("./node_modules/eventemitter3/index.js");function D(h){var p=new k.EventEmitter,b=function(E,u){h.postMessage({event:E,data:u})};p.on(y.Events.FRAG_DECRYPTED,b),p.on(y.Events.ERROR,b),h.addEventListener("message",function(E){var u=E.data;switch(u.cmd){case"init":var e=JSON.parse(u.config);h.transmuxer=new C.default(p,u.typeSupported,e,u.vendor,u.id),Object(v.enableLogs)(e.debug),b("init",null);break;case"configure":h.transmuxer.configure(u.config);break;case"demux":var n=h.transmuxer.push(u.data,u.decryptdata,u.chunkMeta,u.state);Object(C.isPromise)(n)?n.then(function(g){L(h,g)}):L(h,n);break;case"flush":var t=u.chunkMeta,s=h.transmuxer.flush(t);Object(C.isPromise)(s)?s.then(function(g){T(h,g,t)}):T(h,s,t)}})}function L(h,p){if((b=p.remuxResult).audio||b.video||b.text||b.id3||b.initSegment){var b,E=[],u=p.remuxResult,e=u.audio,n=u.video;e&&f(E,e),n&&f(E,n),h.postMessage({event:"transmuxComplete",data:p},E)}}function f(h,p){p.data1&&h.push(p.data1.buffer),p.data2&&h.push(p.data2.buffer)}function T(h,p,b){p.forEach(function(E){L(h,E)}),h.postMessage({event:"flush",data:b})}},"./src/demux/transmuxer.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return t}),c.d(A,"isPromise",function(){return g}),c.d(A,"TransmuxConfig",function(){return a}),c.d(A,"TransmuxState",function(){return o});var C,y=c("./src/events.ts"),v=c("./src/errors.ts"),k=c("./src/crypt/decrypter.ts"),D=c("./src/demux/aacdemuxer.ts"),L=c("./src/demux/mp4demuxer.ts"),f=c("./src/demux/tsdemuxer.ts"),T=c("./src/demux/mp3demuxer.ts"),h=c("./src/remux/mp4-remuxer.ts"),p=c("./src/remux/passthrough-remuxer.ts"),b=c("./src/demux/chunk-cache.ts"),E=c("./src/utils/mp4-tools.ts"),u=c("./src/utils/logger.ts");try{C=self.performance.now.bind(self.performance)}catch{u.logger.debug("Unable to use Performance API on this environment"),C=self.Date.now}var e=[{demux:f.default,remux:h.default},{demux:L.default,remux:p.default},{demux:D.default,remux:h.default},{demux:T.default,remux:h.default}],n=1024;e.forEach(function(d){var r=d.demux;n=Math.max(n,r.minProbeByteLength)});var t=function(){function d(l,i,m,S,w){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new b.default,this.observer=l,this.typeSupported=i,this.config=m,this.vendor=S,this.id=w}var r=d.prototype;return r.configure=function(l){this.transmuxConfig=l,this.decrypter&&this.decrypter.reset()},r.push=function(l,i,m,S){var w=this,x=m.transmuxing;x.executeStart=C();var _=new Uint8Array(l),I=this.cache,P=this.config,N=this.currentTransmuxState,U=this.transmuxConfig;S&&(this.currentTransmuxState=S);var M=function(Ce,Re){var Ne=null;return Ce.byteLength>0&&Re!=null&&Re.key!=null&&Re.iv!==null&&Re.method!=null&&(Ne=Re),Ne}(_,i);if(M&&M.method==="AES-128"){var B=this.getDecrypter();if(!P.enableSoftwareAES)return this.decryptionPromise=B.webCryptoDecrypt(_,M.key.buffer,M.iv.buffer).then(function(Ce){var Re=w.push(Ce,null,m);return w.decryptionPromise=null,Re}),this.decryptionPromise;var G=B.softwareDecrypt(_,M.key.buffer,M.iv.buffer);if(!G)return x.executeEnd=C(),s(m);_=new Uint8Array(G)}var K=S||N,z=K.contiguous,Y=K.discontinuity,q=K.trackSwitch,Z=K.accurateTimeOffset,ee=K.timeOffset,te=U.audioCodec,ae=U.videoCodec,se=U.defaultInitPts,pe=U.duration,ve=U.initSegmentData;if((Y||q)&&this.resetInitSegment(ve,te,ae,pe),Y&&this.resetInitialTimestamp(se),z||this.resetContiguity(),this.needsProbing(_,Y,q)){if(I.dataLength){var we=I.flush();_=Object(E.appendUint8Array)(we,_)}this.configureTransmuxer(_,U)}var ue=this.transmux(_,M,ee,Z,m),Ee=this.currentTransmuxState;return Ee.contiguous=!0,Ee.discontinuity=!1,Ee.trackSwitch=!1,x.executeEnd=C(),ue},r.flush=function(l){var i=this,m=l.transmuxing;m.executeStart=C();var S=this.decrypter,w=this.cache,x=this.currentTransmuxState,_=this.decryptionPromise;if(_)return _.then(function(){return i.flush(l)});var I=[],P=x.timeOffset;if(S){var N=S.flush();N&&I.push(this.push(N,null,l))}var U=w.dataLength;w.reset();var M=this.demuxer,B=this.remuxer;if(!M||!B)return U>=n&&this.observer.emit(y.Events.ERROR,y.Events.ERROR,{type:v.ErrorTypes.MEDIA_ERROR,details:v.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),m.executeEnd=C(),[s(l)];var G=M.flush(P);return g(G)?G.then(function(K){return i.flushRemux(I,K,l),I}):(this.flushRemux(I,G,l),I)},r.flushRemux=function(l,i,m){var S=i.audioTrack,w=i.avcTrack,x=i.id3Track,_=i.textTrack,I=this.currentTransmuxState,P=I.accurateTimeOffset,N=I.timeOffset;u.logger.log("[transmuxer.ts]: Flushed fragment "+m.sn+(m.part>-1?" p: "+m.part:"")+" of level "+m.level);var U=this.remuxer.remux(S,w,x,_,N,P,!0,this.id);l.push({remuxResult:U,chunkMeta:m}),m.transmuxing.executeEnd=C()},r.resetInitialTimestamp=function(l){var i=this.demuxer,m=this.remuxer;i&&m&&(i.resetTimeStamp(l),m.resetTimeStamp(l))},r.resetContiguity=function(){var l=this.demuxer,i=this.remuxer;l&&i&&(l.resetContiguity(),i.resetNextTimestamp())},r.resetInitSegment=function(l,i,m,S){var w=this.demuxer,x=this.remuxer;w&&x&&(w.resetInitSegment(i,m,S),x.resetInitSegment(l,i,m))},r.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},r.transmux=function(l,i,m,S,w){return i&&i.method==="SAMPLE-AES"?this.transmuxSampleAes(l,i,m,S,w):this.transmuxUnencrypted(l,m,S,w)},r.transmuxUnencrypted=function(l,i,m,S){var w=this.demuxer.demux(l,i,!1,!this.config.progressive),x=w.audioTrack,_=w.avcTrack,I=w.id3Track,P=w.textTrack;return{remuxResult:this.remuxer.remux(x,_,I,P,i,m,!1,this.id),chunkMeta:S}},r.transmuxSampleAes=function(l,i,m,S,w){var x=this;return this.demuxer.demuxSampleAes(l,i,m).then(function(_){return{remuxResult:x.remuxer.remux(_.audioTrack,_.avcTrack,_.id3Track,_.textTrack,m,S,!1,x.id),chunkMeta:w}})},r.configureTransmuxer=function(l,i){for(var m,S=this.config,w=this.observer,x=this.typeSupported,_=this.vendor,I=i.audioCodec,P=i.defaultInitPts,N=i.duration,U=i.initSegmentData,M=i.videoCodec,B=0,G=e.length;B<G;B++)if(e[B].demux.probe(l)){m=e[B];break}m||(u.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),m={demux:L.default,remux:p.default});var K=this.demuxer,z=this.remuxer,Y=m.remux,q=m.demux;z&&z instanceof Y||(this.remuxer=new Y(w,S,x,_)),K&&K instanceof q||(this.demuxer=new q(w,S,x),this.probe=q.probe),this.resetInitSegment(U,I,M,N),this.resetInitialTimestamp(P)},r.needsProbing=function(l,i,m){return!this.demuxer||!this.remuxer||i||m},r.getDecrypter=function(){var l=this.decrypter;return l||(l=this.decrypter=new k.default(this.observer,this.config)),l},d}(),s=function(d){return{remuxResult:{},chunkMeta:d}};function g(d){return"then"in d&&d.then instanceof Function}var a=function(d,r,l,i,m){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=d,this.videoCodec=r,this.initSegmentData=l,this.duration=i,this.defaultInitPts=m},o=function(d,r,l,i,m){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.discontinuity=d,this.contiguous=r,this.accurateTimeOffset=l,this.trackSwitch=i,this.timeOffset=m}},"./src/demux/tsdemuxer.ts":function(R,A,c){c.r(A),c.d(A,"discardEPB",function(){return g});var C=c("./src/demux/adts.ts"),y=c("./src/demux/mpegaudio.ts"),v=c("./src/demux/exp-golomb.ts"),k=c("./src/demux/id3.ts"),D=c("./src/demux/sample-aes.ts"),L=c("./src/events.ts"),f=c("./src/utils/mp4-tools.ts"),T=c("./src/utils/logger.ts"),h=c("./src/errors.ts"),p={video:1,audio:2,id3:3,text:4},b=function(){function a(d,r,l){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=d,this.config=r,this.typeSupported=l}a.probe=function(d){var r=a.syncOffset(d);return!(r<0||(r&&T.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),0))},a.syncOffset=function(d){for(var r=Math.min(1e3,d.length-564),l=0;l<r;){if(d[l]===71&&d[l+188]===71&&d[l+376]===71)return l;l++}return-1},a.createTrack=function(d,r){return{container:d==="video"||d==="audio"?"video/mp2t":void 0,type:d,id:p[d],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:d==="audio"?r:void 0}};var o=a.prototype;return o.resetInitSegment=function(d,r,l){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=a.createTrack("video",l),this._audioTrack=a.createTrack("audio",l),this._id3Track=a.createTrack("id3",l),this._txtTrack=a.createTrack("text",l),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=d,this.videoCodec=r,this._duration=l},o.resetTimeStamp=function(){},o.resetContiguity=function(){var d=this._audioTrack,r=this._avcTrack,l=this._id3Track;d&&(d.pesData=null),r&&(r.pesData=null),l&&(l.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},o.demux=function(d,r,l,i){var m;l===void 0&&(l=!1),i===void 0&&(i=!1),l||(this.sampleAes=null);var S=this._avcTrack,w=this._audioTrack,x=this._id3Track,_=S.pid,I=S.pesData,P=w.pid,N=x.pid,U=w.pesData,M=x.pesData,B=!1,G=this.pmtParsed,K=this._pmtId,z=d.length;if(this.remainderData&&(z=(d=Object(f.appendUint8Array)(this.remainderData,d)).length,this.remainderData=null),z<188&&!i)return this.remainderData=d,{audioTrack:w,avcTrack:S,id3Track:x,textTrack:this._txtTrack};var Y=Math.max(0,a.syncOffset(d));(z-=(z+Y)%188)<d.byteLength&&!i&&(this.remainderData=new Uint8Array(d.buffer,z,d.buffer.byteLength-z));for(var q=Y;q<z;q+=188)if(d[q]===71){var Z=!!(64&d[q+1]),ee=((31&d[q+1])<<8)+d[q+2],te=void 0;if((48&d[q+3])>>4>1){if((te=q+5+d[q+4])===q+188)continue}else te=q+4;switch(ee){case _:Z&&(I&&(m=n(I))&&this.parseAVCPES(m,!1),I={data:[],size:0}),I&&(I.data.push(d.subarray(te,q+188)),I.size+=q+188-te);break;case P:Z&&(U&&(m=n(U))&&(w.isAAC?this.parseAACPES(m):this.parseMPEGPES(m)),U={data:[],size:0}),U&&(U.data.push(d.subarray(te,q+188)),U.size+=q+188-te);break;case N:Z&&(M&&(m=n(M))&&this.parseID3PES(m),M={data:[],size:0}),M&&(M.data.push(d.subarray(te,q+188)),M.size+=q+188-te);break;case 0:Z&&(te+=d[te]+1),K=this._pmtId=u(d,te);break;case K:Z&&(te+=d[te]+1);var ae=e(d,te,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,l);(_=ae.avc)>0&&(S.pid=_),(P=ae.audio)>0&&(w.pid=P,w.isAAC=ae.isAAC),(N=ae.id3)>0&&(x.pid=N),B&&!G&&(T.logger.log("reparse from beginning"),B=!1,q=Y-188),G=this.pmtParsed=!0;break;case 17:case 8191:break;default:B=!0}}else this.observer.emit(L.Events.ERROR,L.Events.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});S.pesData=I,w.pesData=U,x.pesData=M;var se={audioTrack:w,avcTrack:S,id3Track:x,textTrack:this._txtTrack};return i&&this.extractRemainingSamples(se),se},o.flush=function(){var d,r=this.remainderData;return this.remainderData=null,d=r?this.demux(r,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(d),this.sampleAes?this.decrypt(d,this.sampleAes):d},o.extractRemainingSamples=function(d){var r,l=d.audioTrack,i=d.avcTrack,m=d.id3Track,S=i.pesData,w=l.pesData,x=m.pesData;S&&(r=n(S))?(this.parseAVCPES(r,!0),i.pesData=null):i.pesData=S,w&&(r=n(w))?(l.isAAC?this.parseAACPES(r):this.parseMPEGPES(r),l.pesData=null):(w!=null&&w.size&&T.logger.log("last AAC PES packet truncated,might overlap between fragments"),l.pesData=w),x&&(r=n(x))?(this.parseID3PES(r),m.pesData=null):m.pesData=x},o.demuxSampleAes=function(d,r,l){var i=this.demux(d,l,!0,!this.config.progressive),m=this.sampleAes=new D.default(this.observer,this.config,r);return this.decrypt(i,m)},o.decrypt=function(d,r){return new Promise(function(l){var i=d.audioTrack,m=d.avcTrack;i.samples&&i.isAAC?r.decryptAacSamples(i.samples,0,function(){m.samples?r.decryptAvcSamples(m.samples,0,0,function(){l(d)}):l(d)}):m.samples&&r.decryptAvcSamples(m.samples,0,0,function(){l(d)})})},o.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},o.parseAVCPES=function(d,r){var l,i=this,m=this._avcTrack,S=this.parseAVCNALu(d.data),w=this.avcSample,x=!1;d.data=null,w&&S.length&&!m.audFound&&(t(w,m),w=this.avcSample=E(!1,d.pts,d.dts,"")),S.forEach(function(_){switch(_.type){case 1:l=!0,w||(w=i.avcSample=E(!0,d.pts,d.dts,"")),w.frame=!0;var I=_.data;if(x&&I.length>4){var P=new v.default(I).readSliceType();P!==2&&P!==4&&P!==7&&P!==9||(w.key=!0)}break;case 5:l=!0,w||(w=i.avcSample=E(!0,d.pts,d.dts,"")),w.key=!0,w.frame=!0;break;case 6:l=!0;var N=new v.default(g(_.data));N.readUByte();for(var U=0,M=0,B=!1,G=0;!B&&N.bytesAvailable>1;){U=0;do U+=G=N.readUByte();while(G===255);M=0;do M+=G=N.readUByte();while(G===255);if(U===4&&N.bytesAvailable!==0){if(B=!0,N.readUByte()===181&&N.readUShort()===49&&N.readUInt()===1195456820&&N.readUByte()===3){for(var K=N.readUByte(),z=31&K,Y=[K,N.readUByte()],q=0;q<z;q++)Y.push(N.readUByte()),Y.push(N.readUByte()),Y.push(N.readUByte());s(i._txtTrack.samples,{type:3,pts:d.pts,bytes:Y})}}else if(U===5&&N.bytesAvailable!==0){if(B=!0,M>16){for(var Z=[],ee=0;ee<16;ee++)Z.push(N.readUByte().toString(16)),ee!==3&&ee!==5&&ee!==7&&ee!==9||Z.push("-");for(var te=M-16,ae=new Uint8Array(te),se=0;se<te;se++)ae[se]=N.readUByte();s(i._txtTrack.samples,{pts:d.pts,payloadType:U,uuid:Z.join(""),userData:Object(k.utf8ArrayToStr)(ae),userDataBytes:ae})}}else if(M<N.bytesAvailable)for(var pe=0;pe<M;pe++)N.readUByte()}break;case 7:if(l=!0,x=!0,!m.sps){var ve=new v.default(_.data).readSPS();m.width=ve.width,m.height=ve.height,m.pixelRatio=ve.pixelRatio,m.sps=[_.data],m.duration=i._duration;for(var we=_.data.subarray(1,4),ue="avc1.",Ee=0;Ee<3;Ee++){var Ce=we[Ee].toString(16);Ce.length<2&&(Ce="0"+Ce),ue+=Ce}m.codec=ue}break;case 8:l=!0,m.pps||(m.pps=[_.data]);break;case 9:l=!1,m.audFound=!0,w&&t(w,m),w=i.avcSample=E(!1,d.pts,d.dts,"");break;case 12:l=!1;break;default:l=!1,w&&(w.debug+="unknown NAL "+_.type+" ")}w&&l&&w.units.push(_)}),r&&w&&(t(w,m),this.avcSample=null)},o.getLastNalUnit=function(){var d,r,l=this.avcSample;if(!l||l.units.length===0){var i=this._avcTrack.samples;l=i[i.length-1]}if((d=l)!==null&&d!==void 0&&d.units){var m=l.units;r=m[m.length-1]}return r},o.parseAVCNALu=function(d){var r,l,i=d.byteLength,m=this._avcTrack,S=m.naluState||0,w=S,x=[],_=0,I=-1,P=0;for(S===-1&&(I=0,P=31&d[0],S=0,_=1);_<i;)if(r=d[_++],S)if(S!==1)if(r)if(r===1){if(I>=0){var N={data:d.subarray(I,_-S-1),type:P};x.push(N)}else{var U=this.getLastNalUnit();if(U&&(w&&_<=4-w&&U.state&&(U.data=U.data.subarray(0,U.data.byteLength-w)),(l=_-S-1)>0)){var M=new Uint8Array(U.data.byteLength+l);M.set(U.data,0),M.set(d.subarray(0,l),U.data.byteLength),U.data=M}}_<i?(I=_,P=31&d[_],S=0):S=-1}else S=0;else S=3;else S=r?0:2;else S=r?0:1;if(I>=0&&S>=0){var B={data:d.subarray(I,i),type:P,state:S};x.push(B)}if(x.length===0){var G=this.getLastNalUnit();if(G){var K=new Uint8Array(G.data.byteLength+d.byteLength);K.set(G.data,0),K.set(d,G.data.byteLength),G.data=K}}return m.naluState=S,x},o.parseAACPES=function(d){var r,l,i,m,S,w=0,x=this._audioTrack,_=this.aacOverFlow,I=d.data;if(_){this.aacOverFlow=null;var P=_.sample.unit.byteLength,N=Math.min(_.missing,P),U=P-N;_.sample.unit.set(I.subarray(0,N),U),x.samples.push(_.sample),w=_.missing}for(r=w,l=I.length;r<l-1&&!C.isHeader(I,r);r++);if(r===w||(r<l-1?(i="AAC PES did not start with ADTS header,offset:"+r,m=!1):(i="no ADTS header found in AAC PES",m=!0),T.logger.warn("parsing error:"+i),this.observer.emit(L.Events.ERROR,L.Events.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:m,reason:i}),!m)){if(C.initTrackConfig(x,this.observer,I,r,this.audioCodec),d.pts!==void 0)S=d.pts;else{if(!_)return void T.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var M=C.getFrameDuration(x.samplerate);S=_.sample.pts+M}for(var B=0;r<l;){if(C.isHeader(I,r)){if(r+5<l){var G=C.appendFrame(x,I,r,S,B);if(G){if(!G.missing){r+=G.length,B++;continue}this.aacOverFlow=G}}break}r++}}},o.parseMPEGPES=function(d){var r=d.data,l=r.length,i=0,m=0,S=d.pts;if(S!==void 0)for(;m<l;)if(y.isHeader(r,m)){var w=y.appendFrame(this._audioTrack,r,m,S,i);if(!w)break;m+=w.length,i++}else m++;else T.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},o.parseID3PES=function(d){d.pts!==void 0?this._id3Track.samples.push(d):T.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},a}();function E(a,o,d,r){return{key:a,frame:!1,pts:o,dts:d,units:[],debug:r,length:0}}function u(a,o){return(31&a[o+10])<<8|a[o+11]}function e(a,o,d,r){var l={audio:-1,avc:-1,id3:-1,isAAC:!0},i=o+3+((15&a[o+1])<<8|a[o+2])-4;for(o+=12+((15&a[o+10])<<8|a[o+11]);o<i;){var m=(31&a[o+1])<<8|a[o+2];switch(a[o]){case 207:if(!r){T.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:l.audio===-1&&(l.audio=m);break;case 21:l.id3===-1&&(l.id3=m);break;case 219:if(!r){T.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:l.avc===-1&&(l.avc=m);break;case 3:case 4:d?l.audio===-1&&(l.audio=m,l.isAAC=!1):T.logger.log("MPEG audio found, not supported in this browser");break;case 36:T.logger.warn("Unsupported HEVC stream type found")}o+=5+((15&a[o+3])<<8|a[o+4])}return l}function n(a){var o,d,r,l,i,m=0,S=a.data;if(!a||a.size===0)return null;for(;S[0].length<19&&S.length>1;){var w=new Uint8Array(S[0].length+S[1].length);w.set(S[0]),w.set(S[1],S[0].length),S[0]=w,S.splice(1,1)}if(((o=S[0])[0]<<16)+(o[1]<<8)+o[2]===1){if((d=(o[4]<<8)+o[5])&&d>a.size-6)return null;var x=o[7];192&x&&(l=536870912*(14&o[9])+4194304*(255&o[10])+16384*(254&o[11])+128*(255&o[12])+(254&o[13])/2,64&x?l-(i=536870912*(14&o[14])+4194304*(255&o[15])+16384*(254&o[16])+128*(255&o[17])+(254&o[18])/2)>54e5&&(T.logger.warn(Math.round((l-i)/9e4)+"s delta between PTS and DTS, align them"),l=i):i=l);var _=(r=o[8])+9;if(a.size<=_)return null;a.size-=_;for(var I=new Uint8Array(a.size),P=0,N=S.length;P<N;P++){var U=(o=S[P]).byteLength;if(_){if(_>U){_-=U;continue}o=o.subarray(_),U-=_,_=0}I.set(o,m),m+=U}return d&&(d-=r+3),{data:I,pts:l,dts:i,len:d}}return null}function t(a,o){if(a.units.length&&a.frame){if(a.pts===void 0){var d=o.samples,r=d.length;if(!r)return void o.dropped++;var l=d[r-1];a.pts=l.pts,a.dts=l.dts}o.samples.push(a)}a.debug.length&&T.logger.log(a.pts+"/"+a.dts+":"+a.debug)}function s(a,o){var d=a.length;if(d>0){if(o.pts>=a[d-1].pts)a.push(o);else for(var r=d-1;r>=0;r--)if(o.pts<a[r].pts){a.splice(r,0,o);break}}else a.push(o)}function g(a){for(var o=a.byteLength,d=[],r=1;r<o-2;)a[r]===0&&a[r+1]===0&&a[r+2]===3?(d.push(r+2),r+=2):r++;if(d.length===0)return a;var l=o-d.length,i=new Uint8Array(l),m=0;for(r=0;r<l;m++,r++)m===d[0]&&(m++,d.shift()),i[r]=a[m];return i}b.minProbeByteLength=188,A.default=b},"./src/errors.ts":function(R,A,c){var C,y;c.r(A),c.d(A,"ErrorTypes",function(){return C}),c.d(A,"ErrorDetails",function(){return y}),function(v){v.NETWORK_ERROR="networkError",v.MEDIA_ERROR="mediaError",v.KEY_SYSTEM_ERROR="keySystemError",v.MUX_ERROR="muxError",v.OTHER_ERROR="otherError"}(C||(C={})),function(v){v.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",v.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",v.KEY_SYSTEM_NO_SESSION="keySystemNoSession",v.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",v.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",v.MANIFEST_LOAD_ERROR="manifestLoadError",v.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",v.MANIFEST_PARSING_ERROR="manifestParsingError",v.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",v.LEVEL_EMPTY_ERROR="levelEmptyError",v.LEVEL_LOAD_ERROR="levelLoadError",v.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",v.LEVEL_SWITCH_ERROR="levelSwitchError",v.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",v.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",v.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",v.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",v.FRAG_LOAD_ERROR="fragLoadError",v.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",v.FRAG_DECRYPT_ERROR="fragDecryptError",v.FRAG_PARSING_ERROR="fragParsingError",v.REMUX_ALLOC_ERROR="remuxAllocError",v.KEY_LOAD_ERROR="keyLoadError",v.KEY_LOAD_TIMEOUT="keyLoadTimeOut",v.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",v.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",v.BUFFER_APPEND_ERROR="bufferAppendError",v.BUFFER_APPENDING_ERROR="bufferAppendingError",v.BUFFER_STALLED_ERROR="bufferStalledError",v.BUFFER_FULL_ERROR="bufferFullError",v.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",v.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",v.INTERNAL_EXCEPTION="internalException",v.INTERNAL_ABORTED="aborted",v.UNKNOWN="unknown"}(y||(y={}))},"./src/events.ts":function(R,A,c){var C;c.r(A),c.d(A,"Events",function(){return C}),function(y){y.MEDIA_ATTACHING="hlsMediaAttaching",y.MEDIA_ATTACHED="hlsMediaAttached",y.MEDIA_DETACHING="hlsMediaDetaching",y.MEDIA_DETACHED="hlsMediaDetached",y.BUFFER_RESET="hlsBufferReset",y.BUFFER_CODECS="hlsBufferCodecs",y.BUFFER_CREATED="hlsBufferCreated",y.BUFFER_APPENDING="hlsBufferAppending",y.BUFFER_APPENDED="hlsBufferAppended",y.BUFFER_EOS="hlsBufferEos",y.BUFFER_FLUSHING="hlsBufferFlushing",y.BUFFER_FLUSHED="hlsBufferFlushed",y.MANIFEST_LOADING="hlsManifestLoading",y.MANIFEST_LOADED="hlsManifestLoaded",y.MANIFEST_PARSED="hlsManifestParsed",y.LEVEL_SWITCHING="hlsLevelSwitching",y.LEVEL_SWITCHED="hlsLevelSwitched",y.LEVEL_LOADING="hlsLevelLoading",y.LEVEL_LOADED="hlsLevelLoaded",y.LEVEL_UPDATED="hlsLevelUpdated",y.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",y.LEVELS_UPDATED="hlsLevelsUpdated",y.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",y.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",y.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",y.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",y.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",y.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",y.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",y.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",y.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",y.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",y.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",y.CUES_PARSED="hlsCuesParsed",y.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",y.INIT_PTS_FOUND="hlsInitPtsFound",y.FRAG_LOADING="hlsFragLoading",y.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",y.FRAG_LOADED="hlsFragLoaded",y.FRAG_DECRYPTED="hlsFragDecrypted",y.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",y.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",y.FRAG_PARSING_METADATA="hlsFragParsingMetadata",y.FRAG_PARSED="hlsFragParsed",y.FRAG_BUFFERED="hlsFragBuffered",y.FRAG_CHANGED="hlsFragChanged",y.FPS_DROP="hlsFpsDrop",y.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",y.ERROR="hlsError",y.DESTROYING="hlsDestroying",y.KEY_LOADING="hlsKeyLoading",y.KEY_LOADED="hlsKeyLoaded",y.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",y.BACK_BUFFER_REACHED="hlsBackBufferReached"}(C||(C={}))},"./src/hls.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return t});var C=c("./node_modules/url-toolkit/src/url-toolkit.js"),y=c("./src/loader/playlist-loader.ts"),v=c("./src/loader/key-loader.ts"),k=c("./src/controller/id3-track-controller.ts"),D=c("./src/controller/latency-controller.ts"),L=c("./src/controller/level-controller.ts"),f=c("./src/controller/fragment-tracker.ts"),T=c("./src/controller/stream-controller.ts"),h=c("./src/is-supported.ts"),p=c("./src/utils/logger.ts"),b=c("./src/config.ts"),E=c("./node_modules/eventemitter3/index.js"),u=c("./src/events.ts"),e=c("./src/errors.ts");function n(s,g){for(var a=0;a<g.length;a++){var o=g[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(s,o.key,o)}}var t=function(){function s(r){r===void 0&&(r={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new E.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this._media=null,this.url=null;var l=this.config=Object(b.mergeConfig)(s.DefaultConfig,r);this.userConfig=r,Object(p.enableLogs)(l.debug),this._autoLevelCapping=-1,l.progressive&&Object(b.enableStreamingMode)(l);var i=l.abrController,m=l.bufferController,S=l.capLevelController,w=l.fpsController,x=this.abrController=new i(this),_=this.bufferController=new m(this),I=this.capLevelController=new S(this),P=new w(this),N=new y.default(this),U=new v.default(this),M=new k.default(this),B=this.levelController=new L.default(this),G=new f.FragmentTracker(this),K=this.streamController=new T.default(this,G);I.setStreamController(K),P.setStreamController(K);var z=[B,K];this.networkControllers=z;var Y=[N,U,x,_,I,P,M,G];this.audioTrackController=this.createController(l.audioTrackController,null,z),this.createController(l.audioStreamController,G,z),this.subtitleTrackController=this.createController(l.subtitleTrackController,null,z),this.createController(l.subtitleStreamController,G,z),this.createController(l.timelineController,null,Y),this.emeController=this.createController(l.emeController,null,Y),this.latencyController=this.createController(D.default,null,Y),this.coreComponents=Y}s.isSupported=function(){return Object(h.isSupported)()};var g,a,o,d=s.prototype;return d.createController=function(r,l,i){if(r){var m=l?new r(this,l):new r(this);return i&&i.push(m),m}return null},d.on=function(r,l,i){i===void 0&&(i=this),this._emitter.on(r,l,i)},d.once=function(r,l,i){i===void 0&&(i=this),this._emitter.once(r,l,i)},d.removeAllListeners=function(r){this._emitter.removeAllListeners(r)},d.off=function(r,l,i,m){i===void 0&&(i=this),this._emitter.off(r,l,i,m)},d.listeners=function(r){return this._emitter.listeners(r)},d.emit=function(r,l,i){return this._emitter.emit(r,l,i)},d.trigger=function(r,l){if(this.config.debug)return this.emit(r,r,l);try{return this.emit(r,r,l)}catch(i){p.logger.error("An internal error happened while handling event "+r+'. Error message: "'+i.message+'". Here is a stacktrace:',i),this.trigger(u.Events.ERROR,{type:e.ErrorTypes.OTHER_ERROR,details:e.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:r,error:i})}return!1},d.listenerCount=function(r){return this._emitter.listenerCount(r)},d.destroy=function(){p.logger.log("destroy"),this.trigger(u.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(r){return r.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(r){return r.destroy()}),this.coreComponents.length=0},d.attachMedia=function(r){p.logger.log("attachMedia"),this._media=r,this.trigger(u.Events.MEDIA_ATTACHING,{media:r})},d.detachMedia=function(){p.logger.log("detachMedia"),this.trigger(u.Events.MEDIA_DETACHING,void 0),this._media=null},d.loadSource=function(r){this.stopLoad();var l=this.media,i=this.url,m=this.url=C.buildAbsoluteURL(self.location.href,r,{alwaysNormalize:!0});p.logger.log("loadSource:"+m),l&&i&&i!==m&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(l)),this.trigger(u.Events.MANIFEST_LOADING,{url:r})},d.startLoad=function(r){r===void 0&&(r=-1),p.logger.log("startLoad("+r+")"),this.networkControllers.forEach(function(l){l.startLoad(r)})},d.stopLoad=function(){p.logger.log("stopLoad"),this.networkControllers.forEach(function(r){r.stopLoad()})},d.swapAudioCodec=function(){p.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},d.recoverMediaError=function(){p.logger.log("recoverMediaError");var r=this._media;this.detachMedia(),r&&this.attachMedia(r)},d.removeLevel=function(r,l){l===void 0&&(l=0),this.levelController.removeLevel(r,l)},g=s,o=[{key:"version",get:function(){return"1.0.11"}},{key:"Events",get:function(){return u.Events}},{key:"ErrorTypes",get:function(){return e.ErrorTypes}},{key:"ErrorDetails",get:function(){return e.ErrorDetails}},{key:"DefaultConfig",get:function(){return s.defaultConfig?s.defaultConfig:b.hlsDefaultConfig},set:function(r){s.defaultConfig=r}}],(a=[{key:"levels",get:function(){var r=this.levelController.levels;return r||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(r){p.logger.log("set currentLevel:"+r),this.loadLevel=r,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(r){p.logger.log("set nextLevel:"+r),this.levelController.manualLevel=r,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(r){p.logger.log("set loadLevel:"+r),this.levelController.manualLevel=r}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(r){this.levelController.nextLoadLevel=r}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(r){p.logger.log("set firstLevel:"+r),this.levelController.firstLevel=r}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(r){p.logger.log("set startLevel:"+r),r!==-1&&(r=Math.max(r,this.minAutoLevel)),this.levelController.startLevel=r}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(r){var l=!!r;l!==this.config.capLevelToPlayerSize&&(l?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=l)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(r){this._autoLevelCapping!==r&&(p.logger.log("set autoLevelCapping:"+r),this._autoLevelCapping=r)}},{key:"bandwidthEstimate",get:function(){var r=this.abrController.bwEstimator;return r?r.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var r=this.levels,l=this.config.minAutoBitrate;if(!r)return 0;for(var i=r.length,m=0;m<i;m++)if(r[m].maxBitrate>l)return m;return 0}},{key:"maxAutoLevel",get:function(){var r=this.levels,l=this.autoLevelCapping;return l===-1&&r&&r.length?r.length-1:l}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(r){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,r)}},{key:"audioTracks",get:function(){var r=this.audioTrackController;return r?r.audioTracks:[]}},{key:"audioTrack",get:function(){var r=this.audioTrackController;return r?r.audioTrack:-1},set:function(r){var l=this.audioTrackController;l&&(l.audioTrack=r)}},{key:"subtitleTracks",get:function(){var r=this.subtitleTrackController;return r?r.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var r=this.subtitleTrackController;return r?r.subtitleTrack:-1},set:function(r){var l=this.subtitleTrackController;l&&(l.subtitleTrack=r)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var r=this.subtitleTrackController;return!!r&&r.subtitleDisplay},set:function(r){var l=this.subtitleTrackController;l&&(l.subtitleDisplay=r)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(r){this.config.lowLatencyMode=r}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}])&&n(g.prototype,a),o&&n(g,o),s}();t.defaultConfig=void 0},"./src/is-supported.ts":function(R,A,c){c.r(A),c.d(A,"isSupported",function(){return v}),c.d(A,"changeTypeSupported",function(){return k});var C=c("./src/utils/mediasource-helper.ts");function y(){return self.SourceBuffer||self.WebKitSourceBuffer}function v(){var D=Object(C.getMediaSource)();if(!D)return!1;var L=y(),f=D&&typeof D.isTypeSupported=="function"&&D.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),T=!L||L.prototype&&typeof L.prototype.appendBuffer=="function"&&typeof L.prototype.remove=="function";return!!f&&!!T}function k(){var D,L=y();return typeof(L==null||(D=L.prototype)===null||D===void 0?void 0:D.changeType)=="function"}},"./src/loader/fragment-loader.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return h}),c.d(A,"LoadError",function(){return b});var C=c("./src/polyfills/number.ts"),y=c("./src/errors.ts");function v(E){var u=typeof Map=="function"?new Map:void 0;return(v=function(e){if(e===null||(n=e,Function.toString.call(n).indexOf("[native code]")===-1))return e;var n;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(u!==void 0){if(u.has(e))return u.get(e);u.set(e,t)}function t(){return k(e,arguments,f(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),L(t,e)})(E)}function k(E,u,e){return(k=D()?Reflect.construct:function(n,t,s){var g=[null];g.push.apply(g,t);var a=new(Function.bind.apply(n,g));return s&&L(a,s.prototype),a}).apply(null,arguments)}function D(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L(E,u){return(L=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(E,u)}function f(E){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(E)}var T=Math.pow(2,17),h=function(){function E(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}var u=E.prototype;return u.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},u.abort=function(){this.loader&&this.loader.abort()},u.load=function(e,n){var t=this,s=e.url;if(!s)return Promise.reject(new b({type:y.ErrorTypes.NETWORK_ERROR,details:y.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,networkDetails:null},"Fragment does not have a "+(s?"part list":"url")));this.abort();var g=this.config,a=g.fLoader,o=g.loader;return new Promise(function(d,r){t.loader&&t.loader.destroy();var l=t.loader=e.loader=a?new a(g):new o(g),i=p(e),m={timeout:g.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:g.fragLoadingMaxRetryTimeout,highWaterMark:T};e.stats=l.stats,l.load(i,m,{onSuccess:function(S,w,x,_){t.resetLoader(e,l),d({frag:e,part:null,payload:S.data,networkDetails:_})},onError:function(S,w,x){t.resetLoader(e,l),r(new b({type:y.ErrorTypes.NETWORK_ERROR,details:y.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:S,networkDetails:x}))},onAbort:function(S,w,x){t.resetLoader(e,l),r(new b({type:y.ErrorTypes.NETWORK_ERROR,details:y.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,networkDetails:x}))},onTimeout:function(S,w,x){t.resetLoader(e,l),r(new b({type:y.ErrorTypes.NETWORK_ERROR,details:y.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,networkDetails:x}))},onProgress:function(S,w,x,_){n&&n({frag:e,part:null,payload:x,networkDetails:_})}})})},u.loadPart=function(e,n,t){var s=this;this.abort();var g=this.config,a=g.fLoader,o=g.loader;return new Promise(function(d,r){s.loader&&s.loader.destroy();var l=s.loader=e.loader=a?new a(g):new o(g),i=p(e,n),m={timeout:g.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:g.fragLoadingMaxRetryTimeout,highWaterMark:T};n.stats=l.stats,l.load(i,m,{onSuccess:function(S,w,x,_){s.resetLoader(e,l),s.updateStatsFromPart(e,n);var I={frag:e,part:n,payload:S.data,networkDetails:_};t(I),d(I)},onError:function(S,w,x){s.resetLoader(e,l),r(new b({type:y.ErrorTypes.NETWORK_ERROR,details:y.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:n,response:S,networkDetails:x}))},onAbort:function(S,w,x){e.stats.aborted=n.stats.aborted,s.resetLoader(e,l),r(new b({type:y.ErrorTypes.NETWORK_ERROR,details:y.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,part:n,networkDetails:x}))},onTimeout:function(S,w,x){s.resetLoader(e,l),r(new b({type:y.ErrorTypes.NETWORK_ERROR,details:y.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:n,networkDetails:x}))}})})},u.updateStatsFromPart=function(e,n){var t=e.stats,s=n.stats,g=s.total;if(t.loaded+=s.loaded,g){var a=Math.round(e.duration/n.duration),o=Math.min(Math.round(t.loaded/g),a),d=(a-o)*Math.round(t.loaded/o);t.total=t.loaded+d}else t.total=Math.max(t.loaded,t.total);var r=t.loading,l=s.loading;r.start?r.first+=l.first-l.start:(r.start=l.start,r.first=l.first),r.end=l.end},u.resetLoader=function(e,n){e.loader=null,this.loader===n&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),n.destroy()},E}();function p(E,u){u===void 0&&(u=null);var e=u||E,n={frag:E,part:u,responseType:"arraybuffer",url:e.url,rangeStart:0,rangeEnd:0},t=e.byteRangeStartOffset,s=e.byteRangeEndOffset;return Object(C.isFiniteNumber)(t)&&Object(C.isFiniteNumber)(s)&&(n.rangeStart=t,n.rangeEnd=s),n}var b=function(E){var u,e;function n(t){for(var s,g=arguments.length,a=new Array(g>1?g-1:0),o=1;o<g;o++)a[o-1]=arguments[o];return(s=E.call.apply(E,[this].concat(a))||this).data=void 0,s.data=t,s}return e=E,(u=n).prototype=Object.create(e.prototype),u.prototype.constructor=u,L(u,e),n}(v(Error))},"./src/loader/fragment.ts":function(R,A,c){c.r(A),c.d(A,"ElementaryStreamTypes",function(){return C}),c.d(A,"BaseSegment",function(){return b}),c.d(A,"Fragment",function(){return E}),c.d(A,"Part",function(){return u});var C,y=c("./src/polyfills/number.ts"),v=c("./node_modules/url-toolkit/src/url-toolkit.js"),k=c("./src/utils/logger.ts"),D=c("./src/loader/level-key.ts"),L=c("./src/loader/load-stats.ts");function f(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,T(e,n)}function T(e,n){return(T=Object.setPrototypeOf||function(t,s){return t.__proto__=s,t})(e,n)}function h(e,n){for(var t=0;t<n.length;t++){var s=n[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function p(e,n,t){return n&&h(e.prototype,n),t&&h(e,t),e}(function(e){e.AUDIO="audio",e.VIDEO="video",e.AUDIOVIDEO="audiovideo"})(C||(C={}));var b=function(){function e(n){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[C.AUDIO]=null,t[C.VIDEO]=null,t[C.AUDIOVIDEO]=null,t),this.baseurl=n}return e.prototype.setByteRange=function(n,t){var s=n.split("@",2),g=[];s.length===1?g[0]=t?t.byteRangeEndOffset:0:g[0]=parseInt(s[1]),g[1]=parseInt(s[0])+g[0],this._byteRange=g},p(e,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(v.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(n){this._url=n}}]),e}(),E=function(e){function n(s,g){var a;return(a=e.call(this,g)||this)._decryptdata=null,a.rawProgramDateTime=null,a.programDateTime=null,a.tagList=[],a.duration=0,a.sn=0,a.levelkey=void 0,a.type=void 0,a.loader=null,a.level=-1,a.cc=0,a.startPTS=void 0,a.endPTS=void 0,a.appendedPTS=void 0,a.startDTS=void 0,a.endDTS=void 0,a.start=0,a.deltaPTS=void 0,a.maxStartPTS=void 0,a.minEndPTS=void 0,a.stats=new L.LoadStats,a.urlId=0,a.data=void 0,a.bitrateTest=!1,a.title=null,a.initSegment=null,a.type=s,a}f(n,e);var t=n.prototype;return t.createInitializationVector=function(s){for(var g=new Uint8Array(16),a=12;a<16;a++)g[a]=s>>8*(15-a)&255;return g},t.setDecryptDataFromLevelKey=function(s,g){var a=s;return(s==null?void 0:s.method)==="AES-128"&&s.uri&&!s.iv&&((a=D.LevelKey.fromURI(s.uri)).method=s.method,a.iv=this.createInitializationVector(g),a.keyFormat="identity"),a},t.setElementaryStreamInfo=function(s,g,a,o,d,r){r===void 0&&(r=!1);var l=this.elementaryStreams,i=l[s];i?(i.startPTS=Math.min(i.startPTS,g),i.endPTS=Math.max(i.endPTS,a),i.startDTS=Math.min(i.startDTS,o),i.endDTS=Math.max(i.endDTS,d)):l[s]={startPTS:g,endPTS:a,startDTS:o,endDTS:d,partial:r}},t.clearElementaryStreamInfo=function(){var s=this.elementaryStreams;s[C.AUDIO]=null,s[C.VIDEO]=null,s[C.AUDIOVIDEO]=null},p(n,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var s=this.sn;typeof s!="number"&&(this.levelkey&&this.levelkey.method==="AES-128"&&!this.levelkey.iv&&k.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),s=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,s)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!Object(y.isFiniteNumber)(this.programDateTime))return null;var s=Object(y.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*s}},{key:"encrypted",get:function(){var s;return!((s=this.decryptdata)===null||s===void 0||!s.keyFormat||!this.decryptdata.uri)}}]),n}(b),u=function(e){function n(t,s,g,a,o){var d;(d=e.call(this,g)||this).fragOffset=0,d.duration=0,d.gap=!1,d.independent=!1,d.relurl=void 0,d.fragment=void 0,d.index=void 0,d.stats=new L.LoadStats,d.duration=t.decimalFloatingPoint("DURATION"),d.gap=t.bool("GAP"),d.independent=t.bool("INDEPENDENT"),d.relurl=t.enumeratedString("URI"),d.fragment=s,d.index=a;var r=t.enumeratedString("BYTERANGE");return r&&d.setByteRange(r,o),o&&(d.fragOffset=o.fragOffset+o.duration),d}return f(n,e),p(n,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var t=this.elementaryStreams;return!!(t.audio||t.video||t.audiovideo)}}]),n}(b)},"./src/loader/key-loader.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return k});var C=c("./src/events.ts"),y=c("./src/errors.ts"),v=c("./src/utils/logger.ts"),k=function(){function D(f){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=f,this._registerListeners()}var L=D.prototype;return L._registerListeners=function(){this.hls.on(C.Events.KEY_LOADING,this.onKeyLoading,this)},L._unregisterListeners=function(){this.hls.off(C.Events.KEY_LOADING,this.onKeyLoading)},L.destroy=function(){for(var f in this._unregisterListeners(),this.loaders){var T=this.loaders[f];T&&T.destroy()}this.loaders={}},L.onKeyLoading=function(f,T){var h=T.frag,p=h.type,b=this.loaders[p];if(h.decryptdata){var E=h.decryptdata.uri;if(E!==this.decrypturl||this.decryptkey===null){var u=this.hls.config;if(b&&(v.logger.warn("abort previous key loader for type:"+p),b.abort()),!E)return void v.logger.warn("key uri is falsy");var e=u.loader,n=h.loader=this.loaders[p]=new e(u);this.decrypturl=E,this.decryptkey=null;var t={url:E,frag:h,responseType:"arraybuffer"},s={timeout:u.fragLoadingTimeOut,maxRetry:0,retryDelay:u.fragLoadingRetryDelay,maxRetryDelay:u.fragLoadingMaxRetryTimeout,highWaterMark:0},g={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};n.load(t,s,g)}else this.decryptkey&&(h.decryptdata.key=this.decryptkey,this.hls.trigger(C.Events.KEY_LOADED,{frag:h}))}else v.logger.warn("Missing decryption data on fragment in onKeyLoading")},L.loadsuccess=function(f,T,h){var p=h.frag;p.decryptdata?(this.decryptkey=p.decryptdata.key=new Uint8Array(f.data),p.loader=null,delete this.loaders[p.type],this.hls.trigger(C.Events.KEY_LOADED,{frag:p})):v.logger.error("after key load, decryptdata unset")},L.loaderror=function(f,T){var h=T.frag,p=h.loader;p&&p.abort(),delete this.loaders[h.type],this.hls.trigger(C.Events.ERROR,{type:y.ErrorTypes.NETWORK_ERROR,details:y.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:h,response:f})},L.loadtimeout=function(f,T){var h=T.frag,p=h.loader;p&&p.abort(),delete this.loaders[h.type],this.hls.trigger(C.Events.ERROR,{type:y.ErrorTypes.NETWORK_ERROR,details:y.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:h})},D}()},"./src/loader/level-details.ts":function(R,A,c){c.r(A),c.d(A,"LevelDetails",function(){return v});var C=c("./src/polyfills/number.ts");function y(k,D){for(var L=0;L<D.length;L++){var f=D[L];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(k,f.key,f)}}var v=function(){function k(f){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=f}var D,L;return k.prototype.reloaded=function(f){if(!f)return this.advanced=!0,void(this.updated=!0);var T=this.lastPartSn-f.lastPartSn,h=this.lastPartIndex-f.lastPartIndex;this.updated=this.endSN!==f.endSN||!!h||!!T,this.advanced=this.endSN>f.endSN||T>0||T===0&&h>0,this.updated||this.advanced?this.misses=Math.floor(.6*f.misses):this.misses=f.misses+1,this.availabilityDelay=f.availabilityDelay},D=k,(L=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(C.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var f=this.driftEndTime-this.driftStartTime;return f>0?1e3*(this.driftEnd-this.driftStart)/f:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var f;return(f=this.partList)!==null&&f!==void 0&&f.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var f;return(f=this.fragments)!==null&&f!==void 0&&f.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var f;return(f=this.partList)!==null&&f!==void 0&&f.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var f;return(f=this.partList)!==null&&f!==void 0&&f.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&y(D.prototype,L),k}()},"./src/loader/level-key.ts":function(R,A,c){c.r(A),c.d(A,"LevelKey",function(){return v});var C=c("./node_modules/url-toolkit/src/url-toolkit.js");function y(k,D){for(var L=0;L<D.length;L++){var f=D[L];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(k,f.key,f)}}var v=function(){function k(f,T){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=T?Object(C.buildAbsoluteURL)(f,T,{alwaysNormalize:!0}):f}var D,L;return k.fromURL=function(f,T){return new k(f,T)},k.fromURI=function(f){return new k(f)},D=k,(L=[{key:"uri",get:function(){return this._uri}}])&&y(D.prototype,L),k}()},"./src/loader/load-stats.ts":function(R,A,c){c.r(A),c.d(A,"LoadStats",function(){return C});var C=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return e});var C=c("./src/polyfills/number.ts"),y=c("./node_modules/url-toolkit/src/url-toolkit.js"),v=c("./src/loader/fragment.ts"),k=c("./src/loader/level-details.ts"),D=c("./src/loader/level-key.ts"),L=c("./src/utils/attr-list.ts"),f=c("./src/utils/logger.ts"),T=c("./src/utils/codecs.ts"),h=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,p=/#EXT-X-MEDIA:(.*)/g,b=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),E=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),u=/\.(mp4|m4s|m4v|m4a)$/i,e=function(){function g(){}return g.findGroup=function(a,o){for(var d=0;d<a.length;d++){var r=a[d];if(r.id===o)return r}},g.convertAVC1ToAVCOTI=function(a){var o=a.split(".");if(o.length>2){var d=o.shift()+".";return d+=parseInt(o.shift()).toString(16),d+=("000"+parseInt(o.shift()).toString(16)).substr(-4)}return a},g.resolve=function(a,o){return y.buildAbsoluteURL(o,a,{alwaysNormalize:!0})},g.parseMasterPlaylist=function(a,o){var d,r=[],l={},i=!1;for(h.lastIndex=0;(d=h.exec(a))!=null;)if(d[1]){var m=new L.AttrList(d[1]),S={attrs:m,bitrate:m.decimalInteger("AVERAGE-BANDWIDTH")||m.decimalInteger("BANDWIDTH"),name:m.NAME,url:g.resolve(d[2],o)},w=m.decimalResolution("RESOLUTION");w&&(S.width=w.width,S.height=w.height),n((m.CODECS||"").split(/[ ,]+/).filter(function(_){return _}),S),S.videoCodec&&S.videoCodec.indexOf("avc1")!==-1&&(S.videoCodec=g.convertAVC1ToAVCOTI(S.videoCodec)),r.push(S)}else if(d[3]){var x=new L.AttrList(d[3]);x["DATA-ID"]&&(i=!0,l[x["DATA-ID"]]=x)}return{levels:r,sessionData:i?l:null}},g.parseMasterPlaylistMedia=function(a,o,d,r){var l;r===void 0&&(r=[]);var i=[],m=0;for(p.lastIndex=0;(l=p.exec(a))!==null;){var S=new L.AttrList(l[1]);if(S.TYPE===d){var w={attrs:S,bitrate:0,id:m++,groupId:S["GROUP-ID"],instreamId:S["INSTREAM-ID"],name:S.NAME||S.LANGUAGE||"",type:d,default:S.bool("DEFAULT"),autoselect:S.bool("AUTOSELECT"),forced:S.bool("FORCED"),lang:S.LANGUAGE,url:S.URI?g.resolve(S.URI,o):""};if(r.length){var x=g.findGroup(r,w.groupId)||r[0];t(w,x,"audioCodec"),t(w,x,"textCodec")}i.push(w)}}return i},g.parseLevelPlaylist=function(a,o,d,r,l){var i,m,S,w=new k.LevelDetails(o),x=w.fragments,_=null,I=0,P=0,N=0,U=0,M=null,B=new v.Fragment(r,o),G=-1,K=!1;for(b.lastIndex=0,w.m3u8=a;(i=b.exec(a))!==null;){K&&(K=!1,(B=new v.Fragment(r,o)).start=N,B.sn=I,B.cc=U,B.level=d,_&&(B.initSegment=_,B.rawProgramDateTime=_.rawProgramDateTime));var z=i[1];if(z){B.duration=parseFloat(z);var Y=(" "+i[2]).slice(1);B.title=Y||null,B.tagList.push(Y?["INF",z,Y]:["INF",z])}else if(i[3])Object(C.isFiniteNumber)(B.duration)&&(B.start=N,S&&(B.levelkey=S),B.sn=I,B.level=d,B.cc=U,B.urlId=l,x.push(B),B.relurl=(" "+i[3]).slice(1),s(B,M),M=B,N+=B.duration,I++,P=0,K=!0);else if(i[4]){var q=(" "+i[4]).slice(1);M?B.setByteRange(q,M):B.setByteRange(q)}else if(i[5])B.rawProgramDateTime=(" "+i[5]).slice(1),B.tagList.push(["PROGRAM-DATE-TIME",B.rawProgramDateTime]),G===-1&&(G=x.length);else{if(!(i=i[0].match(E))){f.logger.warn("No matches on slow regex match for level playlist!");continue}for(m=1;m<i.length&&i[m]===void 0;m++);var Z=(" "+i[m]).slice(1),ee=(" "+i[m+1]).slice(1),te=i[m+2]?(" "+i[m+2]).slice(1):"";switch(Z){case"PLAYLIST-TYPE":w.type=ee.toUpperCase();break;case"MEDIA-SEQUENCE":I=w.startSN=parseInt(ee);break;case"SKIP":var ae=new L.AttrList(ee),se=ae.decimalInteger("SKIPPED-SEGMENTS");if(Object(C.isFiniteNumber)(se)){w.skippedSegments=se;for(var pe=se;pe--;)x.unshift(null);I+=se}var ve=ae.enumeratedString("RECENTLY-REMOVED-DATERANGES");ve&&(w.recentlyRemovedDateranges=ve.split("	"));break;case"TARGETDURATION":w.targetduration=parseFloat(ee);break;case"VERSION":w.version=parseInt(ee);break;case"EXTM3U":break;case"ENDLIST":w.live=!1;break;case"#":(ee||te)&&B.tagList.push(te?[ee,te]:[ee]);break;case"DIS":U++;case"GAP":B.tagList.push([Z]);break;case"BITRATE":B.tagList.push([Z,ee]);break;case"DISCONTINUITY-SEQ":U=parseInt(ee);break;case"KEY":var we,ue=new L.AttrList(ee),Ee=ue.enumeratedString("METHOD"),Ce=ue.URI,Re=ue.hexadecimalInteger("IV"),Ne=ue.enumeratedString("KEYFORMATVERSIONS"),Q=ue.enumeratedString("KEYID"),re=(we=ue.enumeratedString("KEYFORMAT"))!=null?we:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(re)>-1){f.logger.warn("Keyformat "+re+" is not supported from the manifest");continue}if(re!=="identity")continue;Ee&&(S=D.LevelKey.fromURL(o,Ce),Ce&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(Ee)>=0&&(S.method=Ee,S.keyFormat=re,Q&&(S.keyID=Q),Ne&&(S.keyFormatVersions=Ne),S.iv=Re));break;case"START":var fe=new L.AttrList(ee).decimalFloatingPoint("TIME-OFFSET");Object(C.isFiniteNumber)(fe)&&(w.startTimeOffset=fe);break;case"MAP":var Te=new L.AttrList(ee);B.relurl=Te.URI,Te.BYTERANGE&&B.setByteRange(Te.BYTERANGE),B.level=d,B.sn="initSegment",S&&(B.levelkey=S),B.initSegment=null,_=B,K=!0;break;case"SERVER-CONTROL":var xe=new L.AttrList(ee);w.canBlockReload=xe.bool("CAN-BLOCK-RELOAD"),w.canSkipUntil=xe.optionalFloat("CAN-SKIP-UNTIL",0),w.canSkipDateRanges=w.canSkipUntil>0&&xe.bool("CAN-SKIP-DATERANGES"),w.partHoldBack=xe.optionalFloat("PART-HOLD-BACK",0),w.holdBack=xe.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var Be=new L.AttrList(ee);w.partTarget=Be.decimalFloatingPoint("PART-TARGET");break;case"PART":var Ue=w.partList;Ue||(Ue=w.partList=[]);var V=P>0?Ue[Ue.length-1]:void 0,W=P++,J=new v.Part(new L.AttrList(ee),B,o,W,V);Ue.push(J),B.duration+=J.duration;break;case"PRELOAD-HINT":var X=new L.AttrList(ee);w.preloadHint=X;break;case"RENDITION-REPORT":var ne=new L.AttrList(ee);w.renditionReports=w.renditionReports||[],w.renditionReports.push(ne);break;default:f.logger.warn("line parsed but not handled: "+i)}}}M&&!M.relurl?(x.pop(),N-=M.duration,w.partList&&(w.fragmentHint=M)):w.partList&&(s(B,M),B.cc=U,w.fragmentHint=B);var $=x.length,le=x[0],ie=x[$-1];if((N+=w.skippedSegments*w.targetduration)>0&&$&&ie){w.averagetargetduration=N/$;var be=ie.sn;w.endSN=be!=="initSegment"?be:0,le&&(w.startCC=le.cc,le.initSegment||w.fragments.every(function(ge){return ge.relurl&&(he=ge.relurl,u.test((Se=(ce=y.parseURL(he))===null||ce===void 0?void 0:ce.path)!=null?Se:""));var he,Se,ce})&&(f.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(B=new v.Fragment(r,o)).relurl=ie.relurl,B.level=d,B.sn="initSegment",le.initSegment=B,w.needSidxRanges=!0))}else w.endSN=0,w.startCC=0;return w.fragmentHint&&(N+=w.fragmentHint.duration),w.totalduration=N,w.endCC=U,G>0&&function(ge,he){for(var Se=ge[he],ce=he;ce--;){var de=ge[ce];if(!de)return;de.programDateTime=Se.programDateTime-1e3*de.duration,Se=de}}(x,G),w},g}();function n(g,a){["video","audio","text"].forEach(function(o){var d=g.filter(function(l){return Object(T.isCodecType)(l,o)});if(d.length){var r=d.filter(function(l){return l.lastIndexOf("avc1",0)===0||l.lastIndexOf("mp4a",0)===0});a[o+"Codec"]=r.length>0?r[0]:d[0],g=g.filter(function(l){return d.indexOf(l)===-1})}}),a.unknownCodecs=g}function t(g,a,o){var d=a[o];d&&(g[o]=d)}function s(g,a){g.rawProgramDateTime?g.programDateTime=Date.parse(g.rawProgramDateTime):a!=null&&a.programDateTime&&(g.programDateTime=a.endProgramDateTime),Object(C.isFiniteNumber)(g.programDateTime)||(g.programDateTime=null,g.rawProgramDateTime=null)}},"./src/loader/playlist-loader.ts":function(R,A,c){c.r(A);var C=c("./src/polyfills/number.ts"),y=c("./src/events.ts"),v=c("./src/errors.ts"),k=c("./src/utils/logger.ts"),D=c("./src/utils/mp4-tools.ts"),L=c("./src/loader/m3u8-parser.ts"),f=c("./src/types/loader.ts"),T=c("./src/utils/attr-list.ts");function h(b,E){var u=b.url;return u!==void 0&&u.indexOf("data:")!==0||(u=E.url),u}var p=function(){function b(u){this.hls=void 0,this.loaders=Object.create(null),this.hls=u,this.registerListeners()}var E=b.prototype;return E.registerListeners=function(){var u=this.hls;u.on(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.on(y.Events.LEVEL_LOADING,this.onLevelLoading,this),u.on(y.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),u.on(y.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},E.unregisterListeners=function(){var u=this.hls;u.off(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.off(y.Events.LEVEL_LOADING,this.onLevelLoading,this),u.off(y.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),u.off(y.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},E.createInternalLoader=function(u){var e=this.hls.config,n=e.pLoader,t=e.loader,s=new(n||t)(e);return u.loader=s,this.loaders[u.type]=s,s},E.getInternalLoader=function(u){return this.loaders[u.type]},E.resetInternalLoader=function(u){this.loaders[u]&&delete this.loaders[u]},E.destroyInternalLoaders=function(){for(var u in this.loaders){var e=this.loaders[u];e&&e.destroy(),this.resetInternalLoader(u)}},E.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},E.onManifestLoading=function(u,e){var n=e.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:f.PlaylistContextType.MANIFEST,url:n,deliveryDirectives:null})},E.onLevelLoading=function(u,e){var n=e.id,t=e.level,s=e.url,g=e.deliveryDirectives;this.load({id:n,groupId:null,level:t,responseType:"text",type:f.PlaylistContextType.LEVEL,url:s,deliveryDirectives:g})},E.onAudioTrackLoading=function(u,e){var n=e.id,t=e.groupId,s=e.url,g=e.deliveryDirectives;this.load({id:n,groupId:t,level:null,responseType:"text",type:f.PlaylistContextType.AUDIO_TRACK,url:s,deliveryDirectives:g})},E.onSubtitleTrackLoading=function(u,e){var n=e.id,t=e.groupId,s=e.url,g=e.deliveryDirectives;this.load({id:n,groupId:t,level:null,responseType:"text",type:f.PlaylistContextType.SUBTITLE_TRACK,url:s,deliveryDirectives:g})},E.load=function(u){var e,n,t,s,g,a,o=this.hls.config,d=this.getInternalLoader(u);if(d){var r=d.context;if(r&&r.url===u.url)return void k.logger.trace("[playlist-loader]: playlist request ongoing");k.logger.log("[playlist-loader]: aborting previous loader for type: "+u.type),d.abort()}switch(u.type){case f.PlaylistContextType.MANIFEST:n=o.manifestLoadingMaxRetry,t=o.manifestLoadingTimeOut,s=o.manifestLoadingRetryDelay,g=o.manifestLoadingMaxRetryTimeout;break;case f.PlaylistContextType.LEVEL:case f.PlaylistContextType.AUDIO_TRACK:case f.PlaylistContextType.SUBTITLE_TRACK:n=0,t=o.levelLoadingTimeOut;break;default:n=o.levelLoadingMaxRetry,t=o.levelLoadingTimeOut,s=o.levelLoadingRetryDelay,g=o.levelLoadingMaxRetryTimeout}if(d=this.createInternalLoader(u),(e=u.deliveryDirectives)!==null&&e!==void 0&&e.part&&(u.type===f.PlaylistContextType.LEVEL&&u.level!==null?a=this.hls.levels[u.level].details:u.type===f.PlaylistContextType.AUDIO_TRACK&&u.id!==null?a=this.hls.audioTracks[u.id].details:u.type===f.PlaylistContextType.SUBTITLE_TRACK&&u.id!==null&&(a=this.hls.subtitleTracks[u.id].details),a)){var l=a.partTarget,i=a.targetduration;l&&i&&(t=Math.min(1e3*Math.max(3*l,.8*i),t))}var m={timeout:t,maxRetry:n,retryDelay:s,maxRetryDelay:g,highWaterMark:0},S={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};d.load(u,m,S)},E.loadsuccess=function(u,e,n,t){if(t===void 0&&(t=null),n.isSidxRequest)return this.handleSidxRequest(u,n),void this.handlePlaylistLoaded(u,e,n,t);this.resetInternalLoader(n.type);var s=u.data;s.indexOf("#EXTM3U")===0?(e.parsing.start=performance.now(),s.indexOf("#EXTINF:")>0||s.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(u,e,n,t):this.handleMasterPlaylist(u,e,n,t)):this.handleManifestParsingError(u,n,"no EXTM3U delimiter",t)},E.loaderror=function(u,e,n){n===void 0&&(n=null),this.handleNetworkError(e,n,!1,u)},E.loadtimeout=function(u,e,n){n===void 0&&(n=null),this.handleNetworkError(e,n,!0)},E.handleMasterPlaylist=function(u,e,n,t){var s=this.hls,g=u.data,a=h(u,n),o=L.default.parseMasterPlaylist(g,a),d=o.levels,r=o.sessionData;if(d.length){var l=d.map(function(x){return{id:x.attrs.AUDIO,audioCodec:x.audioCodec}}),i=d.map(function(x){return{id:x.attrs.SUBTITLES,textCodec:x.textCodec}}),m=L.default.parseMasterPlaylistMedia(g,a,"AUDIO",l),S=L.default.parseMasterPlaylistMedia(g,a,"SUBTITLES",i),w=L.default.parseMasterPlaylistMedia(g,a,"CLOSED-CAPTIONS");m.length&&(m.some(function(x){return!x.url})||!d[0].audioCodec||d[0].attrs.AUDIO||(k.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new T.AttrList({}),bitrate:0,url:""}))),s.trigger(y.Events.MANIFEST_LOADED,{levels:d,audioTracks:m,subtitles:S,captions:w,url:a,stats:e,networkDetails:t,sessionData:r})}else this.handleManifestParsingError(u,n,"no level found in manifest",t)},E.handleTrackOrLevelPlaylist=function(u,e,n,t){var s=this.hls,g=n.id,a=n.level,o=n.type,d=h(u,n),r=Object(C.isFiniteNumber)(g)?g:0,l=Object(C.isFiniteNumber)(a)?a:r,i=function(_){switch(_.type){case f.PlaylistContextType.AUDIO_TRACK:return f.PlaylistLevelType.AUDIO;case f.PlaylistContextType.SUBTITLE_TRACK:return f.PlaylistLevelType.SUBTITLE;default:return f.PlaylistLevelType.MAIN}}(n),m=L.default.parseLevelPlaylist(u.data,d,l,i,r);if(m.fragments.length){if(o===f.PlaylistContextType.MANIFEST){var S={attrs:new T.AttrList({}),bitrate:0,details:m,name:"",url:d};s.trigger(y.Events.MANIFEST_LOADED,{levels:[S],audioTracks:[],url:d,stats:e,networkDetails:t,sessionData:null})}if(e.parsing.end=performance.now(),m.needSidxRanges){var w,x=(w=m.fragments[0].initSegment)===null||w===void 0?void 0:w.url;this.load({url:x,isSidxRequest:!0,type:o,level:a,levelDetails:m,id:g,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else n.levelDetails=m,this.handlePlaylistLoaded(u,e,n,t)}else s.trigger(y.Events.ERROR,{type:v.ErrorTypes.NETWORK_ERROR,details:v.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:d,reason:"no fragments found in level",level:typeof n.level=="number"?n.level:void 0})},E.handleSidxRequest=function(u,e){var n=Object(D.parseSegmentIndex)(new Uint8Array(u.data));if(n){var t=n.references,s=e.levelDetails;t.forEach(function(g,a){var o=g.info,d=s.fragments[a];d.byteRange.length===0&&d.setByteRange(String(1+o.end-o.start)+"@"+String(o.start)),d.initSegment&&d.initSegment.setByteRange(String(n.moovEndOffset)+"@0")})}},E.handleManifestParsingError=function(u,e,n,t){this.hls.trigger(y.Events.ERROR,{type:v.ErrorTypes.NETWORK_ERROR,details:v.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:e.type===f.PlaylistContextType.MANIFEST,url:u.url,reason:n,response:u,context:e,networkDetails:t})},E.handleNetworkError=function(u,e,n,t){n===void 0&&(n=!1),k.logger.warn("[playlist-loader]: A network "+(n?"timeout":"error")+" occurred while loading "+u.type+" level: "+u.level+" id: "+u.id+' group-id: "'+u.groupId+'"');var s=v.ErrorDetails.UNKNOWN,g=!1,a=this.getInternalLoader(u);switch(u.type){case f.PlaylistContextType.MANIFEST:s=n?v.ErrorDetails.MANIFEST_LOAD_TIMEOUT:v.ErrorDetails.MANIFEST_LOAD_ERROR,g=!0;break;case f.PlaylistContextType.LEVEL:s=n?v.ErrorDetails.LEVEL_LOAD_TIMEOUT:v.ErrorDetails.LEVEL_LOAD_ERROR,g=!1;break;case f.PlaylistContextType.AUDIO_TRACK:s=n?v.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:v.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,g=!1;break;case f.PlaylistContextType.SUBTITLE_TRACK:s=n?v.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:v.ErrorDetails.SUBTITLE_LOAD_ERROR,g=!1}a&&this.resetInternalLoader(u.type);var o={type:v.ErrorTypes.NETWORK_ERROR,details:s,fatal:g,url:u.url,loader:a,context:u,networkDetails:e};t&&(o.response=t),this.hls.trigger(y.Events.ERROR,o)},E.handlePlaylistLoaded=function(u,e,n,t){var s=n.type,g=n.level,a=n.id,o=n.groupId,d=n.loader,r=n.levelDetails,l=n.deliveryDirectives;if(r!=null&&r.targetduration){if(d)switch(r.live&&(d.getCacheAge&&(r.ageHeader=d.getCacheAge()||0),d.getCacheAge&&!isNaN(r.ageHeader)||(r.ageHeader=0)),s){case f.PlaylistContextType.MANIFEST:case f.PlaylistContextType.LEVEL:this.hls.trigger(y.Events.LEVEL_LOADED,{details:r,level:g||0,id:a||0,stats:e,networkDetails:t,deliveryDirectives:l});break;case f.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(y.Events.AUDIO_TRACK_LOADED,{details:r,id:a||0,groupId:o||"",stats:e,networkDetails:t,deliveryDirectives:l});break;case f.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(y.Events.SUBTITLE_TRACK_LOADED,{details:r,id:a||0,groupId:o||"",stats:e,networkDetails:t,deliveryDirectives:l})}}else this.handleManifestParsingError(u,n,"invalid target duration",t)},b}();A.default=p},"./src/polyfills/number.ts":function(R,A,c){c.r(A),c.d(A,"isFiniteNumber",function(){return C}),c.d(A,"MAX_SAFE_INTEGER",function(){return y});var C=Number.isFinite||function(v){return typeof v=="number"&&isFinite(v)},y=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":function(R,A,c){c.r(A);var C=function(){function y(){}return y.getSilentFrame=function(v,k){switch(v){case"mp4a.40.2":if(k===1)return new Uint8Array([0,200,0,128,35,128]);if(k===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(k===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(k===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(k===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(k===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(k===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(k===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(k===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},y}();A.default=C},"./src/remux/mp4-generator.ts":function(R,A,c){c.r(A);var C=Math.pow(2,32)-1,y=function(){function v(){}return v.init=function(){var k;for(k in v.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},v.types)v.types.hasOwnProperty(k)&&(v.types[k]=[k.charCodeAt(0),k.charCodeAt(1),k.charCodeAt(2),k.charCodeAt(3)]);var D=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),L=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);v.HDLR_TYPES={video:D,audio:L};var f=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),T=new Uint8Array([0,0,0,0,0,0,0,0]);v.STTS=v.STSC=v.STCO=T,v.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),v.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),v.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),v.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var h=new Uint8Array([105,115,111,109]),p=new Uint8Array([97,118,99,49]),b=new Uint8Array([0,0,0,1]);v.FTYP=v.box(v.types.ftyp,h,b,h,p),v.DINF=v.box(v.types.dinf,v.box(v.types.dref,f))},v.box=function(k){for(var D=8,L=arguments.length,f=new Array(L>1?L-1:0),T=1;T<L;T++)f[T-1]=arguments[T];for(var h=f.length,p=h;h--;)D+=f[h].byteLength;var b=new Uint8Array(D);for(b[0]=D>>24&255,b[1]=D>>16&255,b[2]=D>>8&255,b[3]=255&D,b.set(k,4),h=0,D=8;h<p;h++)b.set(f[h],D),D+=f[h].byteLength;return b},v.hdlr=function(k){return v.box(v.types.hdlr,v.HDLR_TYPES[k])},v.mdat=function(k){return v.box(v.types.mdat,k)},v.mdhd=function(k,D){D*=k;var L=Math.floor(D/(C+1)),f=Math.floor(D%(C+1));return v.box(v.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,k>>24&255,k>>16&255,k>>8&255,255&k,L>>24,L>>16&255,L>>8&255,255&L,f>>24,f>>16&255,f>>8&255,255&f,85,196,0,0]))},v.mdia=function(k){return v.box(v.types.mdia,v.mdhd(k.timescale,k.duration),v.hdlr(k.type),v.minf(k))},v.mfhd=function(k){return v.box(v.types.mfhd,new Uint8Array([0,0,0,0,k>>24,k>>16&255,k>>8&255,255&k]))},v.minf=function(k){return k.type==="audio"?v.box(v.types.minf,v.box(v.types.smhd,v.SMHD),v.DINF,v.stbl(k)):v.box(v.types.minf,v.box(v.types.vmhd,v.VMHD),v.DINF,v.stbl(k))},v.moof=function(k,D,L){return v.box(v.types.moof,v.mfhd(k),v.traf(L,D))},v.moov=function(k){for(var D=k.length,L=[];D--;)L[D]=v.trak(k[D]);return v.box.apply(null,[v.types.moov,v.mvhd(k[0].timescale,k[0].duration)].concat(L).concat(v.mvex(k)))},v.mvex=function(k){for(var D=k.length,L=[];D--;)L[D]=v.trex(k[D]);return v.box.apply(null,[v.types.mvex].concat(L))},v.mvhd=function(k,D){D*=k;var L=Math.floor(D/(C+1)),f=Math.floor(D%(C+1)),T=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,k>>24&255,k>>16&255,k>>8&255,255&k,L>>24,L>>16&255,L>>8&255,255&L,f>>24,f>>16&255,f>>8&255,255&f,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return v.box(v.types.mvhd,T)},v.sdtp=function(k){var D,L,f=k.samples||[],T=new Uint8Array(4+f.length);for(D=0;D<f.length;D++)L=f[D].flags,T[D+4]=L.dependsOn<<4|L.isDependedOn<<2|L.hasRedundancy;return v.box(v.types.sdtp,T)},v.stbl=function(k){return v.box(v.types.stbl,v.stsd(k),v.box(v.types.stts,v.STTS),v.box(v.types.stsc,v.STSC),v.box(v.types.stsz,v.STSZ),v.box(v.types.stco,v.STCO))},v.avc1=function(k){var D,L,f,T=[],h=[];for(D=0;D<k.sps.length;D++)f=(L=k.sps[D]).byteLength,T.push(f>>>8&255),T.push(255&f),T=T.concat(Array.prototype.slice.call(L));for(D=0;D<k.pps.length;D++)f=(L=k.pps[D]).byteLength,h.push(f>>>8&255),h.push(255&f),h=h.concat(Array.prototype.slice.call(L));var p=v.box(v.types.avcC,new Uint8Array([1,T[3],T[4],T[5],255,224|k.sps.length].concat(T).concat([k.pps.length]).concat(h))),b=k.width,E=k.height,u=k.pixelRatio[0],e=k.pixelRatio[1];return v.box(v.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,b>>8&255,255&b,E>>8&255,255&E,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),p,v.box(v.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),v.box(v.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,e>>24,e>>16&255,e>>8&255,255&e])))},v.esds=function(k){var D=k.config.length;return new Uint8Array([0,0,0,0,3,23+D,0,1,0,4,15+D,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([D]).concat(k.config).concat([6,1,2]))},v.mp4a=function(k){var D=k.samplerate;return v.box(v.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,k.channelCount,0,16,0,0,0,0,D>>8&255,255&D,0,0]),v.box(v.types.esds,v.esds(k)))},v.mp3=function(k){var D=k.samplerate;return v.box(v.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,k.channelCount,0,16,0,0,0,0,D>>8&255,255&D,0,0]))},v.stsd=function(k){return k.type==="audio"?k.isAAC||k.codec!=="mp3"?v.box(v.types.stsd,v.STSD,v.mp4a(k)):v.box(v.types.stsd,v.STSD,v.mp3(k)):v.box(v.types.stsd,v.STSD,v.avc1(k))},v.tkhd=function(k){var D=k.id,L=k.duration*k.timescale,f=k.width,T=k.height,h=Math.floor(L/(C+1)),p=Math.floor(L%(C+1));return v.box(v.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,D>>24&255,D>>16&255,D>>8&255,255&D,0,0,0,0,h>>24,h>>16&255,h>>8&255,255&h,p>>24,p>>16&255,p>>8&255,255&p,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,f>>8&255,255&f,0,0,T>>8&255,255&T,0,0]))},v.traf=function(k,D){var L=v.sdtp(k),f=k.id,T=Math.floor(D/(C+1)),h=Math.floor(D%(C+1));return v.box(v.types.traf,v.box(v.types.tfhd,new Uint8Array([0,0,0,0,f>>24,f>>16&255,f>>8&255,255&f])),v.box(v.types.tfdt,new Uint8Array([1,0,0,0,T>>24,T>>16&255,T>>8&255,255&T,h>>24,h>>16&255,h>>8&255,255&h])),v.trun(k,L.length+16+20+8+16+8+8),L)},v.trak=function(k){return k.duration=k.duration||4294967295,v.box(v.types.trak,v.tkhd(k),v.mdia(k))},v.trex=function(k){var D=k.id;return v.box(v.types.trex,new Uint8Array([0,0,0,0,D>>24,D>>16&255,D>>8&255,255&D,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},v.trun=function(k,D){var L,f,T,h,p,b,E=k.samples||[],u=E.length,e=12+16*u,n=new Uint8Array(e);for(D+=8+e,n.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,D>>>24&255,D>>>16&255,D>>>8&255,255&D],0),L=0;L<u;L++)T=(f=E[L]).duration,h=f.size,p=f.flags,b=f.cts,n.set([T>>>24&255,T>>>16&255,T>>>8&255,255&T,h>>>24&255,h>>>16&255,h>>>8&255,255&h,p.isLeading<<2|p.dependsOn,p.isDependedOn<<6|p.hasRedundancy<<4|p.paddingValue<<1|p.isNonSync,61440&p.degradPrio,15&p.degradPrio,b>>>24&255,b>>>16&255,b>>>8&255,255&b],12+16*L);return v.box(v.types.trun,n)},v.initSegment=function(k){v.types||v.init();var D=v.moov(k),L=new Uint8Array(v.FTYP.byteLength+D.byteLength);return L.set(v.FTYP),L.set(D,v.FTYP.byteLength),L},v}();y.types=void 0,y.HDLR_TYPES=void 0,y.STTS=void 0,y.STSC=void 0,y.STCO=void 0,y.STSZ=void 0,y.VMHD=void 0,y.SMHD=void 0,y.STSD=void 0,y.FTYP=void 0,y.DINF=void 0,A.default=y},"./src/remux/mp4-remuxer.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return u}),c.d(A,"normalizePts",function(){return e});var C=c("./src/polyfills/number.ts"),y=c("./src/remux/aac-helper.ts"),v=c("./src/remux/mp4-generator.ts"),k=c("./src/events.ts"),D=c("./src/errors.ts"),L=c("./src/utils/logger.ts"),f=c("./src/types/loader.ts"),T=c("./src/utils/timescale-conversion.ts");function h(){return(h=Object.assign||function(s){for(var g=1;g<arguments.length;g++){var a=arguments[g];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(s[o]=a[o])}return s}).apply(this,arguments)}var p=null,b=null,E=!1,u=function(){function s(a,o,d,r){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=a,this.config=o,this.typeSupported=d,this.ISGenerated=!1,p===null){var l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);p=l?parseInt(l[1]):0}if(b===null){var i=navigator.userAgent.match(/Safari\/(\d+)/i);b=i?parseInt(i[1]):0}E=!!p&&p<75||!!b&&b<600}var g=s.prototype;return g.destroy=function(){},g.resetTimeStamp=function(a){L.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=a},g.resetNextTimestamp=function(){L.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},g.resetInitSegment=function(){L.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},g.getVideoStartPts=function(a){var o=!1,d=a.reduce(function(r,l){var i=l.pts-r;return i<-4294967296?(o=!0,e(r,l.pts)):i>0?r:l.pts},a[0].pts);return o&&L.logger.debug("PTS rollover detected"),d},g.remux=function(a,o,d,r,l,i,m,S){var w,x,_,I,P,N,U=l,M=l,B=a.pid>-1,G=o.pid>-1,K=o.samples.length,z=a.samples.length>0,Y=K>1;if((!B||z)&&(!G||Y)||this.ISGenerated||m){this.ISGenerated||(_=this.generateIS(a,o,l));var q=this.isVideoContiguous,Z=-1;if(Y&&(Z=function(pe){for(var ve=0;ve<pe.length;ve++)if(pe[ve].key)return ve;return-1}(o.samples),!q&&this.config.forceKeyFrameOnDiscontinuity))if(N=!0,Z>0){L.logger.warn("[mp4-remuxer]: Dropped "+Z+" out of "+K+" video samples due to a missing keyframe");var ee=this.getVideoStartPts(o.samples);o.samples=o.samples.slice(Z),o.dropped+=Z,M+=(o.samples[0].pts-ee)/(o.timescale||9e4)}else Z===-1&&(L.logger.warn("[mp4-remuxer]: No keyframe found out of "+K+" video samples"),N=!1);if(this.ISGenerated){if(z&&Y){var te=this.getVideoStartPts(o.samples),ae=(e(a.samples[0].pts,te)-te)/o.inputTimeScale;U+=Math.max(0,ae),M+=Math.max(0,-ae)}if(z){if(a.samplerate||(L.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),_=this.generateIS(a,o,l)),x=this.remuxAudio(a,U,this.isAudioContiguous,i,G||Y||S===f.PlaylistLevelType.AUDIO?M:void 0),Y){var se=x?x.endPTS-x.startPTS:0;o.inputTimeScale||(L.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),_=this.generateIS(a,o,l)),w=this.remuxVideo(o,M,q,se)}}else Y&&(w=this.remuxVideo(o,M,q,0));w&&(w.firstKeyFrame=Z,w.independent=Z!==-1)}}return this.ISGenerated&&(d.samples.length&&(P=this.remuxID3(d,l)),r.samples.length&&(I=this.remuxText(r,l))),{audio:x,video:w,initSegment:_,independent:N,text:I,id3:P}},g.generateIS=function(a,o,d){var r,l,i,m=a.samples,S=o.samples,w=this.typeSupported,x={},_=!Object(C.isFiniteNumber)(this._initPTS),I="audio/mp4";if(_&&(r=l=1/0),a.config&&m.length&&(a.timescale=a.samplerate,a.isAAC||(w.mpeg?(I="audio/mpeg",a.codec=""):w.mp3&&(a.codec="mp3")),x.audio={id:"audio",container:I,codec:a.codec,initSegment:!a.isAAC&&w.mpeg?new Uint8Array(0):v.default.initSegment([a]),metadata:{channelCount:a.channelCount}},_&&(i=a.inputTimeScale,r=l=m[0].pts-Math.round(i*d))),o.sps&&o.pps&&S.length&&(o.timescale=o.inputTimeScale,x.video={id:"main",container:"video/mp4",codec:o.codec,initSegment:v.default.initSegment([o]),metadata:{width:o.width,height:o.height}},_)){i=o.inputTimeScale;var P=this.getVideoStartPts(S),N=Math.round(i*d);l=Math.min(l,e(S[0].dts,P)-N),r=Math.min(r,P-N)}if(Object.keys(x).length)return this.ISGenerated=!0,_&&(this._initPTS=r,this._initDTS=l),{tracks:x,initPTS:r,timescale:i}},g.remuxVideo=function(a,o,d,r){var l,i,m,S=a.inputTimeScale,w=a.samples,x=[],_=w.length,I=this._initPTS,P=this.nextAvcDts,N=8,U=Number.POSITIVE_INFINITY,M=Number.NEGATIVE_INFINITY,B=0,G=!1;d&&P!==null||(P=o*S-(w[0].pts-e(w[0].dts,w[0].pts)));for(var K=0;K<_;K++){var z=w[K];z.pts=e(z.pts-I,P),z.dts=e(z.dts-I,P),z.dts>z.pts&&(B=Math.max(Math.min(B,z.pts-z.dts),-18e3)),z.dts<w[K>0?K-1:K].dts&&(G=!0)}G&&w.sort(function(ce,de){var oe=ce.dts-de.dts,me=ce.pts-de.pts;return oe||me}),i=w[0].dts,m=w[w.length-1].dts;var Y=Math.round((m-i)/(_-1));if(B<0){if(B<-2*Y){L.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(T.toMsFromMpegTsClock)(-Y,!0)+" ms");for(var q=B,Z=0;Z<_;Z++)w[Z].dts=q=Math.max(q,w[Z].pts-Y),w[Z].pts=Math.max(q,w[Z].pts)}else{L.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(T.toMsFromMpegTsClock)(B,!0)+" ms to overcome this issue");for(var ee=0;ee<_;ee++)w[ee].dts=w[ee].dts+B}i=w[0].dts}if(d){var te=i-P,ae=te>Y;if(ae||te<-1){ae?L.logger.warn("AVC: "+Object(T.toMsFromMpegTsClock)(te,!0)+" ms ("+te+"dts) hole between fragments detected, filling it"):L.logger.warn("AVC: "+Object(T.toMsFromMpegTsClock)(-te,!0)+" ms ("+te+"dts) overlapping between fragments detected"),i=P;var se=w[0].pts-te;w[0].dts=i,w[0].pts=se,L.logger.log("Video: First PTS/DTS adjusted: "+Object(T.toMsFromMpegTsClock)(se,!0)+"/"+Object(T.toMsFromMpegTsClock)(i,!0)+", delta: "+Object(T.toMsFromMpegTsClock)(te,!0)+" ms")}}E&&(i=Math.max(0,i));for(var pe=0,ve=0,we=0;we<_;we++){for(var ue=w[we],Ee=ue.units,Ce=Ee.length,Re=0,Ne=0;Ne<Ce;Ne++)Re+=Ee[Ne].data.length;ve+=Re,pe+=Ce,ue.length=Re,ue.dts=Math.max(ue.dts,i),ue.pts=Math.max(ue.pts,ue.dts,0),U=Math.min(ue.pts,U),M=Math.max(ue.pts,M)}m=w[_-1].dts;var Q,re=ve+4*pe+8;try{Q=new Uint8Array(re)}catch{return void this.observer.emit(k.Events.ERROR,k.Events.ERROR,{type:D.ErrorTypes.MUX_ERROR,details:D.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:re,reason:"fail allocating video mdat "+re})}var fe=new DataView(Q.buffer);fe.setUint32(0,re),Q.set(v.default.types.mdat,4);for(var Te=0;Te<_;Te++){for(var xe=w[Te],Be=xe.units,Ue=0,V=0,W=Be.length;V<W;V++){var J=Be[V],X=J.data,ne=J.data.byteLength;fe.setUint32(N,ne),N+=4,Q.set(X,N),N+=ne,Ue+=4+ne}if(Te<_-1)l=w[Te+1].dts-xe.dts;else{var $=this.config,le=xe.dts-w[Te>0?Te-1:Te].dts;if($.stretchShortVideoTrack&&this.nextAudioPts!==null){var ie=Math.floor($.maxBufferHole*S),be=(r?U+r*S:this.nextAudioPts)-xe.pts;be>ie?((l=be-le)<0&&(l=le),L.logger.log("[mp4-remuxer]: It is approximately "+be/90+" ms to the next segment; using duration "+l/90+" ms for the last video frame.")):l=le}else l=le}var ge=Math.round(xe.pts-xe.dts);x.push(new n(xe.key,l,Ue,ge))}if(x.length&&p&&p<70){var he=x[0].flags;he.dependsOn=2,he.isNonSync=0}console.assert(l!==void 0,"mp4SampleDuration must be computed"),this.nextAvcDts=P=m+l,this.isVideoContiguous=!0;var Se={data1:v.default.moof(a.sequenceNumber++,i,h({},a,{samples:x})),data2:Q,startPTS:U/S,endPTS:(M+l)/S,startDTS:i/S,endDTS:P/S,type:"video",hasAudio:!1,hasVideo:!0,nb:x.length,dropped:a.dropped};return a.samples=[],a.dropped=0,console.assert(Q.length,"MDAT length must not be zero"),Se},g.remuxAudio=function(a,o,d,r,l){var i=a.inputTimeScale,m=i/(a.samplerate?a.samplerate:i),S=a.isAAC?1024:1152,w=S*m,x=this._initPTS,_=!a.isAAC&&this.typeSupported.mpeg,I=[],P=a.samples,N=_?0:8,U=this.nextAudioPts||-1,M=o*i;if(this.isAudioContiguous=d=d||P.length&&U>0&&(r&&Math.abs(M-U)<9e3||Math.abs(e(P[0].pts-x,M)-U)<20*w),P.forEach(function(X){X.pts=e(X.pts-x,M)}),!d||U<0){if(!(P=P.filter(function(X){return X.pts>=0})).length)return;U=l===0?0:r?Math.max(0,M):P[0].pts}if(a.isAAC)for(var B=l!==void 0,G=this.config.maxAudioFramesDrift,K=0,z=U;K<P.length;K++){var Y=P[K],q=Y.pts,Z=q-z,ee=Math.abs(1e3*Z/i);if(Z<=-G*w&&B)K===0&&(L.logger.warn("Audio frame @ "+(q/i).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*Z/i)+" ms."),this.nextAudioPts=U=z=q);else if(Z>=G*w&&ee<1e4&&B){var te=Math.round(Z/w);(z=q-te*w)<0&&(te--,z+=w),K===0&&(this.nextAudioPts=U=z),L.logger.warn("[mp4-remuxer]: Injecting "+te+" audio frame @ "+(z/i).toFixed(3)+"s due to "+Math.round(1e3*Z/i)+" ms gap.");for(var ae=0;ae<te;ae++){var se=Math.max(z,0),pe=y.default.getSilentFrame(a.manifestCodec||a.codec,a.channelCount);pe||(L.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),pe=Y.unit.subarray()),P.splice(K,0,{unit:pe,pts:se}),z+=w,K++}}Y.pts=z,z+=w}for(var ve,we=null,ue=null,Ee=0,Ce=P.length;Ce--;)Ee+=P[Ce].unit.byteLength;for(var Re=0,Ne=P.length;Re<Ne;Re++){var Q=P[Re],re=Q.unit,fe=Q.pts;if(ue!==null)I[Re-1].duration=Math.round((fe-ue)/m);else{if(d&&a.isAAC&&(fe=U),we=fe,!(Ee>0))return;Ee+=N;try{ve=new Uint8Array(Ee)}catch{return void this.observer.emit(k.Events.ERROR,k.Events.ERROR,{type:D.ErrorTypes.MUX_ERROR,details:D.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:Ee,reason:"fail allocating audio mdat "+Ee})}_||(new DataView(ve.buffer).setUint32(0,Ee),ve.set(v.default.types.mdat,4))}ve.set(re,N);var Te=re.byteLength;N+=Te,I.push(new n(!0,S,Te,0)),ue=fe}var xe=I.length;if(xe){var Be=I[I.length-1];this.nextAudioPts=U=ue+m*Be.duration;var Ue=_?new Uint8Array(0):v.default.moof(a.sequenceNumber++,we/m,h({},a,{samples:I}));a.samples=[];var V=we/i,W=U/i,J={data1:Ue,data2:ve,startPTS:V,endPTS:W,startDTS:V,endDTS:W,type:"audio",hasAudio:!0,hasVideo:!1,nb:xe};return this.isAudioContiguous=!0,console.assert(ve.length,"MDAT length must not be zero"),J}},g.remuxEmptyAudio=function(a,o,d,r){var l=a.inputTimeScale,i=l/(a.samplerate?a.samplerate:l),m=this.nextAudioPts,S=(m!==null?m:r.startDTS*l)+this._initDTS,w=r.endDTS*l+this._initDTS,x=1024*i,_=Math.ceil((w-S)/x),I=y.default.getSilentFrame(a.manifestCodec||a.codec,a.channelCount);if(L.logger.warn("[mp4-remuxer]: remux empty Audio"),I){for(var P=[],N=0;N<_;N++){var U=S+N*x;P.push({unit:I,pts:U,dts:U})}return a.samples=P,this.remuxAudio(a,o,d,!1)}L.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},g.remuxID3=function(a,o){var d=a.samples.length;if(d){for(var r=a.inputTimeScale,l=this._initPTS,i=this._initDTS,m=0;m<d;m++){var S=a.samples[m];S.pts=e(S.pts-l,o*r)/r,S.dts=e(S.dts-i,o*r)/r}var w=a.samples;return a.samples=[],{samples:w}}},g.remuxText=function(a,o){var d=a.samples.length;if(d){for(var r=a.inputTimeScale,l=this._initPTS,i=0;i<d;i++){var m=a.samples[i];m.pts=e(m.pts-l,o*r)/r}a.samples.sort(function(w,x){return w.pts-x.pts});var S=a.samples;return a.samples=[],{samples:S}}},s}();function e(s,g){var a;if(g===null)return s;for(a=g<s?-8589934592:8589934592;Math.abs(s-g)>4294967296;)s+=a;return s}var n=function(s,g,a,o){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=g,this.size=a,this.cts=o,this.flags=new t(s)},t=function(s){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=s?2:1,this.isNonSync=s?0:1}},"./src/remux/passthrough-remuxer.ts":function(R,A,c){c.r(A);var C=c("./src/polyfills/number.ts"),y=c("./src/utils/mp4-tools.ts"),v=c("./src/loader/fragment.ts"),k=c("./src/utils/logger.ts"),D=function(){function T(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var h=T.prototype;return h.destroy=function(){},h.resetTimeStamp=function(p){this.initPTS=p,this.lastEndDTS=null},h.resetNextTimestamp=function(){this.lastEndDTS=null},h.resetInitSegment=function(p,b,E){this.audioCodec=b,this.videoCodec=E,this.generateInitSegment(p),this.emitInitSegment=!0},h.generateInitSegment=function(p){var b=this.audioCodec,E=this.videoCodec;if(!p||!p.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var u=this.initData=Object(y.parseInitSegment)(p);b||(b=f(u.audio,v.ElementaryStreamTypes.AUDIO)),E||(E=f(u.video,v.ElementaryStreamTypes.VIDEO));var e={};u.audio&&u.video?e.audiovideo={container:"video/mp4",codec:b+","+E,initSegment:p,id:"main"}:u.audio?e.audio={container:"audio/mp4",codec:b,initSegment:p,id:"audio"}:u.video?e.video={container:"video/mp4",codec:E,initSegment:p,id:"main"}:k.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=e},h.remux=function(p,b,E,u,e){var n=this.initPTS,t=this.lastEndDTS,s={audio:void 0,video:void 0,text:u,id3:E,initSegment:void 0};Object(C.isFiniteNumber)(t)||(t=this.lastEndDTS=e||0);var g=b.samples;if(!g||!g.length)return s;var a={initPTS:void 0,timescale:1},o=this.initData;if(o&&o.length||(this.generateInitSegment(g),o=this.initData),!o||!o.length)return k.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),s;this.emitInitSegment&&(a.tracks=this.initTracks,this.emitInitSegment=!1),Object(C.isFiniteNumber)(n)||(this.initPTS=a.initPTS=n=L(o,g,t));var d=Object(y.getDuration)(g,o),r=t,l=d+r;Object(y.offsetStartDTS)(o,g,n),d>0?this.lastEndDTS=l:(k.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var i=!!o.audio,m=!!o.video,S="";i&&(S+="audio"),m&&(S+="video");var w={data1:g,startPTS:r,startDTS:r,endPTS:l,endDTS:l,type:S,hasAudio:i,hasVideo:m,nb:1,dropped:0};return s.audio=w.type==="audio"?w:void 0,s.video=w.type!=="audio"?w:void 0,s.text=u,s.id3=E,s.initSegment=a,s},T}(),L=function(T,h,p){return Object(y.getStartDTS)(T,h)-p};function f(T,h){var p=T==null?void 0:T.codec;return p&&p.length>4?p:p==="hvc1"?"hvc1.1.c.L120.90":p==="av01"?"av01.0.04M.08":p==="avc1"||h===v.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}A.default=D},"./src/task-loop.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return C});var C=function(){function y(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var v=y.prototype;return v.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},v.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},v.onHandlerDestroyed=function(){},v.hasInterval=function(){return!!this._tickInterval},v.hasNextTick=function(){return!!this._tickTimer},v.setInterval=function(k){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,k),!0)},v.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},v.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},v.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},v.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},v.doTick=function(){},y}()},"./src/types/level.ts":function(R,A,c){function C(L,f){for(var T=0;T<f.length;T++){var h=f[T];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(L,h.key,h)}}var y;function v(L,f){var T=L.canSkipUntil,h=L.canSkipDateRanges,p=L.endSN;return T&&(f!==void 0?f-p:0)<T?h?y.v2:y.Yes:y.No}c.r(A),c.d(A,"HlsSkip",function(){return y}),c.d(A,"getSkipValue",function(){return v}),c.d(A,"HlsUrlParameters",function(){return k}),c.d(A,"Level",function(){return D}),function(L){L.No="",L.Yes="YES",L.v2="v2"}(y||(y={}));var k=function(){function L(f,T,h){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=f,this.part=T,this.skip=h}return L.prototype.addDirectives=function(f){var T=new self.URL(f);return this.msn!==void 0&&T.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&T.searchParams.set("_HLS_part",this.part.toString()),this.skip&&T.searchParams.set("_HLS_skip",this.skip),T.toString()},L}(),D=function(){function L(h){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[h.url],this.attrs=h.attrs,this.bitrate=h.bitrate,h.details&&(this.details=h.details),this.id=h.id||0,this.name=h.name,this.width=h.width||0,this.height=h.height||0,this.audioCodec=h.audioCodec,this.videoCodec=h.videoCodec,this.unknownCodecs=h.unknownCodecs,this.codecSet=[h.videoCodec,h.audioCodec].filter(function(p){return p}).join(",").replace(/\.[^.,]+/g,"")}var f,T;return f=L,(T=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(h){var p=h%this.url.length;this._urlId!==p&&(this.details=void 0,this._urlId=p)}}])&&C(f.prototype,T),L}()},"./src/types/loader.ts":function(R,A,c){var C,y;c.r(A),c.d(A,"PlaylistContextType",function(){return C}),c.d(A,"PlaylistLevelType",function(){return y}),function(v){v.MANIFEST="manifest",v.LEVEL="level",v.AUDIO_TRACK="audioTrack",v.SUBTITLE_TRACK="subtitleTrack"}(C||(C={})),function(v){v.MAIN="main",v.AUDIO="audio",v.SUBTITLE="subtitle"}(y||(y={}))},"./src/types/transmuxer.ts":function(R,A,c){c.r(A),c.d(A,"ChunkMetadata",function(){return C});var C=function(y,v,k,D,L,f){D===void 0&&(D=0),L===void 0&&(L=-1),f===void 0&&(f=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=y,this.sn=v,this.id=k,this.size=D,this.part=L,this.partial=f}},"./src/utils/attr-list.ts":function(R,A,c){c.r(A),c.d(A,"AttrList",function(){return v});var C=/^(\d+)x(\d+)$/,y=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,v=function(){function k(L){for(var f in typeof L=="string"&&(L=k.parseAttrList(L)),L)L.hasOwnProperty(f)&&(this[f]=L[f])}var D=k.prototype;return D.decimalInteger=function(L){var f=parseInt(this[L],10);return f>Number.MAX_SAFE_INTEGER?1/0:f},D.hexadecimalInteger=function(L){if(this[L]){var f=(this[L]||"0x").slice(2);f=(1&f.length?"0":"")+f;for(var T=new Uint8Array(f.length/2),h=0;h<f.length/2;h++)T[h]=parseInt(f.slice(2*h,2*h+2),16);return T}return null},D.hexadecimalIntegerAsNumber=function(L){var f=parseInt(this[L],16);return f>Number.MAX_SAFE_INTEGER?1/0:f},D.decimalFloatingPoint=function(L){return parseFloat(this[L])},D.optionalFloat=function(L,f){var T=this[L];return T?parseFloat(T):f},D.enumeratedString=function(L){return this[L]},D.bool=function(L){return this[L]==="YES"},D.decimalResolution=function(L){var f=C.exec(this[L]);if(f!==null)return{width:parseInt(f[1],10),height:parseInt(f[2],10)}},k.parseAttrList=function(L){var f,T={};for(y.lastIndex=0;(f=y.exec(L))!==null;){var h=f[2];h.indexOf('"')===0&&h.lastIndexOf('"')===h.length-1&&(h=h.slice(1,-1)),T[f[1]]=h}return T},k}()},"./src/utils/binary-search.ts":function(R,A,c){c.r(A),A.default={search:function(C,y){for(var v=0,k=C.length-1,D=null,L=null;v<=k;){var f=y(L=C[D=(v+k)/2|0]);if(f>0)v=D+1;else{if(!(f<0))return L;k=D-1}}return null}}},"./src/utils/buffer-helper.ts":function(R,A,c){c.r(A),c.d(A,"BufferHelper",function(){return v});var C=c("./src/utils/logger.ts"),y={length:0,start:function(){return 0},end:function(){return 0}},v=function(){function k(){}return k.isBuffered=function(D,L){try{if(D){for(var f=k.getBuffered(D),T=0;T<f.length;T++)if(L>=f.start(T)&&L<=f.end(T))return!0}}catch{}return!1},k.bufferInfo=function(D,L,f){try{if(D){var T,h=k.getBuffered(D),p=[];for(T=0;T<h.length;T++)p.push({start:h.start(T),end:h.end(T)});return this.bufferedInfo(p,L,f)}}catch{}return{len:0,start:L,end:L,nextStart:void 0}},k.bufferedInfo=function(D,L,f){L=Math.max(0,L),D.sort(function(a,o){var d=a.start-o.start;return d||o.end-a.end});var T=[];if(f)for(var h=0;h<D.length;h++){var p=T.length;if(p){var b=T[p-1].end;D[h].start-b<f?D[h].end>b&&(T[p-1].end=D[h].end):T.push(D[h])}else T.push(D[h])}else T=D;for(var E,u=0,e=L,n=L,t=0;t<T.length;t++){var s=T[t].start,g=T[t].end;if(L+f>=s&&L<g)e=s,u=(n=g)-L;else if(L+f<s){E=s;break}}return{len:u,start:e||0,end:n||0,nextStart:E}},k.getBuffered=function(D){try{return D.buffered}catch(L){return C.logger.log("failed to get media.buffered",L),y}},k}()},"./src/utils/cea-608-parser.ts":function(R,A,c){c.r(A),c.d(A,"Row",function(){return e}),c.d(A,"CaptionScreen",function(){return n});var C,y=c("./src/utils/logger.ts"),v={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},k=function(o){var d=o;return v.hasOwnProperty(o)&&(d=v[o]),String.fromCharCode(d)},D={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},L={17:2,18:4,21:6,22:8,23:10,19:13,20:15},f={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},T={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];(function(o){o[o.ERROR=0]="ERROR",o[o.TEXT=1]="TEXT",o[o.WARNING=2]="WARNING",o[o.INFO=2]="INFO",o[o.DEBUG=3]="DEBUG",o[o.DATA=3]="DATA"})(C||(C={}));var p=function(){function o(){this.time=null,this.verboseLevel=C.ERROR}return o.prototype.log=function(d,r){this.verboseLevel>=d&&y.logger.log(this.time+" ["+d+"] "+r)},o}(),b=function(o){for(var d=[],r=0;r<o.length;r++)d.push(o[r].toString(16));return d},E=function(){function o(r,l,i,m,S){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=r||"white",this.underline=l||!1,this.italics=i||!1,this.background=m||"black",this.flash=S||!1}var d=o.prototype;return d.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},d.setStyles=function(r){for(var l=["foreground","underline","italics","background","flash"],i=0;i<l.length;i++){var m=l[i];r.hasOwnProperty(m)&&(this[m]=r[m])}},d.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},d.equals=function(r){return this.foreground===r.foreground&&this.underline===r.underline&&this.italics===r.italics&&this.background===r.background&&this.flash===r.flash},d.copy=function(r){this.foreground=r.foreground,this.underline=r.underline,this.italics=r.italics,this.background=r.background,this.flash=r.flash},d.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},o}(),u=function(){function o(r,l,i,m,S,w){this.uchar=void 0,this.penState=void 0,this.uchar=r||" ",this.penState=new E(l,i,m,S,w)}var d=o.prototype;return d.reset=function(){this.uchar=" ",this.penState.reset()},d.setChar=function(r,l){this.uchar=r,this.penState.copy(l)},d.setPenState=function(r){this.penState.copy(r)},d.equals=function(r){return this.uchar===r.uchar&&this.penState.equals(r.penState)},d.copy=function(r){this.uchar=r.uchar,this.penState.copy(r.penState)},d.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},o}(),e=function(){function o(r){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var l=0;l<100;l++)this.chars.push(new u);this.logger=r,this.pos=0,this.currPenState=new E}var d=o.prototype;return d.equals=function(r){for(var l=!0,i=0;i<100;i++)if(!this.chars[i].equals(r.chars[i])){l=!1;break}return l},d.copy=function(r){for(var l=0;l<100;l++)this.chars[l].copy(r.chars[l])},d.isEmpty=function(){for(var r=!0,l=0;l<100;l++)if(!this.chars[l].isEmpty()){r=!1;break}return r},d.setCursor=function(r){this.pos!==r&&(this.pos=r),this.pos<0?(this.logger.log(C.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>100&&(this.logger.log(C.DEBUG,"Too large cursor position "+this.pos),this.pos=100)},d.moveCursor=function(r){var l=this.pos+r;if(r>1)for(var i=this.pos+1;i<l+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(l)},d.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},d.insertChar=function(r){r>=144&&this.backSpace();var l=k(r);this.pos>=100?this.logger.log(C.ERROR,"Cannot insert "+r.toString(16)+" ("+l+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(l,this.currPenState),this.moveCursor(1))},d.clearFromPos=function(r){var l;for(l=r;l<100;l++)this.chars[l].reset()},d.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},d.clearToEndOfRow=function(){this.clearFromPos(this.pos)},d.getTextString=function(){for(var r=[],l=!0,i=0;i<100;i++){var m=this.chars[i].uchar;m!==" "&&(l=!1),r.push(m)}return l?"":r.join("")},d.setPenStyles=function(r){this.currPenState.setStyles(r),this.chars[this.pos].setPenState(this.currPenState)},o}(),n=function(){function o(r){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var l=0;l<15;l++)this.rows.push(new e(r));this.logger=r,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var d=o.prototype;return d.reset=function(){for(var r=0;r<15;r++)this.rows[r].clear();this.currRow=14},d.equals=function(r){for(var l=!0,i=0;i<15;i++)if(!this.rows[i].equals(r.rows[i])){l=!1;break}return l},d.copy=function(r){for(var l=0;l<15;l++)this.rows[l].copy(r.rows[l])},d.isEmpty=function(){for(var r=!0,l=0;l<15;l++)if(!this.rows[l].isEmpty()){r=!1;break}return r},d.backSpace=function(){this.rows[this.currRow].backSpace()},d.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},d.insertChar=function(r){this.rows[this.currRow].insertChar(r)},d.setPen=function(r){this.rows[this.currRow].setPenStyles(r)},d.moveCursor=function(r){this.rows[this.currRow].moveCursor(r)},d.setCursor=function(r){this.logger.log(C.INFO,"setCursor: "+r),this.rows[this.currRow].setCursor(r)},d.setPAC=function(r){this.logger.log(C.INFO,"pacData = "+JSON.stringify(r));var l=r.row-1;if(this.nrRollUpRows&&l<this.nrRollUpRows-1&&(l=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==l){for(var i=0;i<15;i++)this.rows[i].clear();var m=this.currRow+1-this.nrRollUpRows,S=this.lastOutputScreen;if(S){var w=S.rows[m].cueStartTime,x=this.logger.time;if(w&&x!==null&&w<x)for(var _=0;_<this.nrRollUpRows;_++)this.rows[l-this.nrRollUpRows+_+1].copy(S.rows[m+_])}}this.currRow=l;var I=this.rows[this.currRow];if(r.indent!==null){var P=r.indent,N=Math.max(P-1,0);I.setCursor(r.indent),r.color=I.chars[N].penState.foreground}var U={foreground:r.color,underline:r.underline,italics:r.italics,background:"black",flash:!1};this.setPen(U)},d.setBkgData=function(r){this.logger.log(C.INFO,"bkgData = "+JSON.stringify(r)),this.backSpace(),this.setPen(r),this.insertChar(32)},d.setRollUpRows=function(r){this.nrRollUpRows=r},d.rollUp=function(){if(this.nrRollUpRows!==null){this.logger.log(C.TEXT,this.getDisplayText());var r=this.currRow+1-this.nrRollUpRows,l=this.rows.splice(r,1)[0];l.clear(),this.rows.splice(this.currRow,0,l),this.logger.log(C.INFO,"Rolling up")}else this.logger.log(C.DEBUG,"roll_up but nrRollUpRows not set yet")},d.getDisplayText=function(r){r=r||!1;for(var l=[],i="",m=-1,S=0;S<15;S++){var w=this.rows[S].getTextString();w&&(m=S+1,r?l.push("Row "+m+": '"+w+"'"):l.push(w.trim()))}return l.length>0&&(i=r?"["+l.join(" | ")+"]":l.join(`
`)),i},d.getTextAndFormat=function(){return this.rows},o}(),t=function(){function o(r,l,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=r,this.outputFilter=l,this.mode=null,this.verbose=0,this.displayedMemory=new n(i),this.nonDisplayedMemory=new n(i),this.lastOutputScreen=new n(i),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}var d=o.prototype;return d.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},d.getHandler=function(){return this.outputFilter},d.setHandler=function(r){this.outputFilter=r},d.setPAC=function(r){this.writeScreen.setPAC(r)},d.setBkgData=function(r){this.writeScreen.setBkgData(r)},d.setMode=function(r){r!==this.mode&&(this.mode=r,this.logger.log(C.INFO,"MODE="+r),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=r)},d.insertChars=function(r){for(var l=0;l<r.length;l++)this.writeScreen.insertChar(r[l]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(C.INFO,i+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(this.logger.log(C.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},d.ccRCL=function(){this.logger.log(C.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},d.ccBS=function(){this.logger.log(C.INFO,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},d.ccAOF=function(){},d.ccAON=function(){},d.ccDER=function(){this.logger.log(C.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},d.ccRU=function(r){this.logger.log(C.INFO,"RU("+r+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(r)},d.ccFON=function(){this.logger.log(C.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},d.ccRDC=function(){this.logger.log(C.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},d.ccTR=function(){this.logger.log(C.INFO,"TR"),this.setMode("MODE_TEXT")},d.ccRTD=function(){this.logger.log(C.INFO,"RTD"),this.setMode("MODE_TEXT")},d.ccEDM=function(){this.logger.log(C.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},d.ccCR=function(){this.logger.log(C.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},d.ccENM=function(){this.logger.log(C.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},d.ccEOC=function(){if(this.logger.log(C.INFO,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var r=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=r,this.writeScreen=this.nonDisplayedMemory,this.logger.log(C.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},d.ccTO=function(r){this.logger.log(C.INFO,"TO("+r+") - Tab Offset"),this.writeScreen.moveCursor(r)},d.ccMIDROW=function(r){var l={flash:!1};if(l.underline=r%2==1,l.italics=r>=46,l.italics)l.foreground="white";else{var i=Math.floor(r/2)-16;l.foreground=["white","green","blue","cyan","red","yellow","magenta"][i]}this.logger.log(C.INFO,"MIDROW: "+JSON.stringify(l)),this.writeScreen.setPen(l)},d.outputDataUpdate=function(r){r===void 0&&(r=!1);var l=this.logger.time;l!==null&&this.outputFilter&&(this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,l,this.lastOutputScreen),r&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:l):this.cueStartTime=l,this.lastOutputScreen.copy(this.displayedMemory))},d.cueSplitAtTime=function(r){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,r,this.displayedMemory),this.cueStartTime=r))},o}(),s=function(){function o(r,l,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var m=new p;this.channels=[null,new t(r,l,m),new t(r+1,i,m)],this.cmdHistory={a:null,b:null},this.logger=m}var d=o.prototype;return d.getHandler=function(r){return this.channels[r].getHandler()},d.setHandler=function(r,l){this.channels[r].setHandler(l)},d.addData=function(r,l){var i,m,S,w=!1;this.logger.time=r;for(var x=0;x<l.length;x+=2)if(m=127&l[x],S=127&l[x+1],m!==0||S!==0){if(this.logger.log(C.DATA,"["+b([l[x],l[x+1]])+"] -> ("+b([m,S])+")"),(i=this.parseCmd(m,S))||(i=this.parseMidrow(m,S)),i||(i=this.parsePAC(m,S)),i||(i=this.parseBackgroundAttributes(m,S)),!i&&(w=this.parseChars(m,S))){var _=this.currentChannel;_&&_>0?this.channels[_].insertChars(w):this.logger.log(C.WARNING,"No channel found yet. TEXT-MODE?")}i||w||this.logger.log(C.WARNING,"Couldn't parse cleaned data "+b([m,S])+" orig: "+b([l[x],l[x+1]]))}},d.parseCmd=function(r,l){var i=this.cmdHistory;if(!((r===20||r===28||r===21||r===29)&&l>=32&&l<=47||(r===23||r===31)&&l>=33&&l<=35))return!1;if(a(r,l,i))return g(null,null,i),this.logger.log(C.DEBUG,"Repeated command ("+b([r,l])+") is dropped"),!0;var m=r===20||r===21||r===23?1:2,S=this.channels[m];return r===20||r===21||r===28||r===29?l===32?S.ccRCL():l===33?S.ccBS():l===34?S.ccAOF():l===35?S.ccAON():l===36?S.ccDER():l===37?S.ccRU(2):l===38?S.ccRU(3):l===39?S.ccRU(4):l===40?S.ccFON():l===41?S.ccRDC():l===42?S.ccTR():l===43?S.ccRTD():l===44?S.ccEDM():l===45?S.ccCR():l===46?S.ccENM():l===47&&S.ccEOC():S.ccTO(l-32),g(r,l,i),this.currentChannel=m,!0},d.parseMidrow=function(r,l){var i=0;if((r===17||r===25)&&l>=32&&l<=47){if((i=r===17?1:2)!==this.currentChannel)return this.logger.log(C.ERROR,"Mismatch channel in midrow parsing"),!1;var m=this.channels[i];return!!m&&(m.ccMIDROW(l),this.logger.log(C.DEBUG,"MIDROW ("+b([r,l])+")"),!0)}return!1},d.parsePAC=function(r,l){var i,m=this.cmdHistory;if(!((r>=17&&r<=23||r>=25&&r<=31)&&l>=64&&l<=127||(r===16||r===24)&&l>=64&&l<=95))return!1;if(a(r,l,m))return g(null,null,m),!0;var S=r<=23?1:2;i=l>=64&&l<=95?S===1?D[r]:f[r]:S===1?L[r]:T[r];var w=this.channels[S];return!!w&&(w.setPAC(this.interpretPAC(i,l)),g(r,l,m),this.currentChannel=S,!0)},d.interpretPAC=function(r,l){var i,m={color:null,italics:!1,indent:null,underline:!1,row:r};return i=l>95?l-96:l-64,m.underline=(1&i)==1,i<=13?m.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(m.italics=!0,m.color="white"):m.indent=4*Math.floor((i-16)/2),m},d.parseChars=function(r,l){var i,m,S=null,w=null;if(r>=25?(i=2,w=r-8):(i=1,w=r),w>=17&&w<=19?(m=w===17?l+80:w===18?l+112:l+144,this.logger.log(C.INFO,"Special char '"+k(m)+"' in channel "+i),S=[m]):r>=32&&r<=127&&(S=l===0?[r]:[r,l]),S){var x=b(S);this.logger.log(C.DEBUG,"Char codes =  "+x.join(",")),g(r,l,this.cmdHistory)}return S},d.parseBackgroundAttributes=function(r,l){var i;if(!((r===16||r===24)&&l>=32&&l<=47||(r===23||r===31)&&l>=45&&l<=47))return!1;var m={};r===16||r===24?(i=Math.floor((l-32)/2),m.background=h[i],l%2==1&&(m.background=m.background+"_semi")):l===45?m.background="transparent":(m.foreground="black",l===47&&(m.underline=!0));var S=r<=23?1:2;return this.channels[S].setBkgData(m),g(r,l,this.cmdHistory),!0},d.reset=function(){for(var r=0;r<Object.keys(this.channels).length;r++){var l=this.channels[r];l&&l.reset()}this.cmdHistory={a:null,b:null}},d.cueSplitAtTime=function(r){for(var l=0;l<this.channels.length;l++){var i=this.channels[l];i&&i.cueSplitAtTime(r)}},o}();function g(o,d,r){r.a=o,r.b=d}function a(o,d,r){return r.a===o&&r.b===d}A.default=s},"./src/utils/codecs.ts":function(R,A,c){c.r(A),c.d(A,"isCodecType",function(){return y}),c.d(A,"isCodecSupportedInMp4",function(){return v});var C={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function y(k,D){var L=C[D];return!!L&&L[k.slice(0,4)]===!0}function v(k,D){return MediaSource.isTypeSupported((D||"video")+'/mp4;codecs="'+k+'"')}},"./src/utils/cues.ts":function(R,A,c){c.r(A);var C=c("./src/utils/vttparser.ts"),y=c("./src/utils/webvtt-parser.ts"),v=c("./src/utils/texttrack-utils.ts"),k=/\s/,D={newCue:function(L,f,T,h){for(var p,b,E,u,e,n=[],t=self.VTTCue||self.TextTrackCue,s=0;s<h.rows.length;s++)if(E=!0,u=0,e="",!(p=h.rows[s]).isEmpty()){for(var g=0;g<p.chars.length;g++)k.test(p.chars[g].uchar)&&E?u++:(e+=p.chars[g].uchar,E=!1);p.cueStartTime=f,f===T&&(T+=1e-4),u>=16?u--:u++;var a=Object(C.fixLineBreaks)(e.trim()),o=Object(y.generateCueId)(f,T,a);L&&L.cues&&L.cues.getCueById(o)||((b=new t(f,T,a)).id=o,b.line=s+1,b.align="left",b.position=10+Math.min(80,10*Math.floor(8*u/32)),n.push(b))}return L&&n.length&&(n.sort(function(d,r){return d.line==="auto"||r.line==="auto"?0:d.line>8&&r.line>8?r.line-d.line:d.line-r.line}),n.forEach(function(d){return Object(v.addCueToTrack)(L,d)})),n}};A.default=D},"./src/utils/discontinuities.ts":function(R,A,c){c.r(A),c.d(A,"findFirstFragWithCC",function(){return k}),c.d(A,"shouldAlignOnDiscontinuities",function(){return D}),c.d(A,"findDiscontinuousReferenceFrag",function(){return L}),c.d(A,"adjustSlidingStart",function(){return T}),c.d(A,"alignStream",function(){return h}),c.d(A,"alignPDT",function(){return p}),c.d(A,"alignFragmentByPDTDelta",function(){return b}),c.d(A,"alignMediaPlaylistByPDT",function(){return E});var C=c("./src/polyfills/number.ts"),y=c("./src/utils/logger.ts"),v=c("./src/controller/level-helper.ts");function k(u,e){for(var n=null,t=0,s=u.length;t<s;t++){var g=u[t];if(g&&g.cc===e){n=g;break}}return n}function D(u,e,n){return!(!e.details||!(n.endCC>n.startCC||u&&u.cc<n.startCC))}function L(u,e){var n=u.fragments,t=e.fragments;if(t.length&&n.length){var s=k(n,t[0].cc);if(s&&(!s||s.startPTS))return s;y.logger.log("No frag in previous level to align on")}else y.logger.log("No fragments to align")}function f(u,e){if(u){var n=u.start+e;u.start=u.startPTS=n,u.endPTS=n+u.duration}}function T(u,e){for(var n=e.fragments,t=0,s=n.length;t<s;t++)f(n[t],u);e.fragmentHint&&f(e.fragmentHint,u),e.alignedSliding=!0}function h(u,e,n){e&&(function(t,s,g){if(D(t,g,s)){var a=L(g.details,s);a&&Object(C.isFiniteNumber)(a.start)&&(y.logger.log("Adjusting PTS using last level due to CC increase within current level "+s.url),T(a.start,s))}}(u,n,e),!n.alignedSliding&&e.details&&p(n,e.details),n.alignedSliding||!e.details||n.skippedSegments||Object(v.adjustSliding)(e.details,n))}function p(u,e){if(e.fragments.length&&u.hasProgramDateTime&&e.hasProgramDateTime){var n=e.fragments[0].programDateTime,t=u.fragments[0].programDateTime,s=(t-n)/1e3+e.fragments[0].start;s&&Object(C.isFiniteNumber)(s)&&(y.logger.log("Adjusting PTS using programDateTime delta "+(t-n)+"ms, sliding:"+s.toFixed(3)+" "+u.url+" "),T(s,u))}}function b(u,e){var n=u.programDateTime;if(n){var t=(n-e)/1e3;u.start=u.startPTS=t,u.endPTS=t+u.duration}}function E(u,e){if(e.fragments.length&&u.hasProgramDateTime&&e.hasProgramDateTime){var n=e.fragments[0].programDateTime-1e3*e.fragments[0].start;u.fragments.forEach(function(t){b(t,n)}),u.fragmentHint&&b(u.fragmentHint,n),u.alignedSliding=!0}}},"./src/utils/ewma-bandwidth-estimator.ts":function(R,A,c){c.r(A);var C=c("./src/utils/ewma.ts"),y=function(){function v(D,L,f){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=f,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new C.default(D),this.fast_=new C.default(L)}var k=v.prototype;return k.update=function(D,L){var f=this.slow_,T=this.fast_;this.slow_.halfLife!==D&&(this.slow_=new C.default(D,f.getEstimate(),f.getTotalWeight())),this.fast_.halfLife!==L&&(this.fast_=new C.default(L,T.getEstimate(),T.getTotalWeight()))},k.sample=function(D,L){var f=(D=Math.max(D,this.minDelayMs_))/1e3,T=8*L/f;this.fast_.sample(f,T),this.slow_.sample(f,T)},k.canEstimate=function(){var D=this.fast_;return D&&D.getTotalWeight()>=this.minWeight_},k.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},k.destroy=function(){},v}();A.default=y},"./src/utils/ewma.ts":function(R,A,c){c.r(A);var C=function(){function y(k,D,L){D===void 0&&(D=0),L===void 0&&(L=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=k,this.alpha_=k?Math.exp(Math.log(.5)/k):0,this.estimate_=D,this.totalWeight_=L}var v=y.prototype;return v.sample=function(k,D){var L=Math.pow(this.alpha_,k);this.estimate_=D*(1-L)+L*this.estimate_,this.totalWeight_+=k},v.getTotalWeight=function(){return this.totalWeight_},v.getEstimate=function(){if(this.alpha_){var k=1-Math.pow(this.alpha_,this.totalWeight_);if(k)return this.estimate_/k}return this.estimate_},y}();A.default=C},"./src/utils/fetch-loader.ts":function(R,A,c){c.r(A),c.d(A,"fetchSupported",function(){return h});var C=c("./src/polyfills/number.ts"),y=c("./src/loader/load-stats.ts"),v=c("./src/demux/chunk-cache.ts");function k(u){var e=typeof Map=="function"?new Map:void 0;return(k=function(n){if(n===null||(t=n,Function.toString.call(t).indexOf("[native code]")===-1))return n;var t;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,s)}function s(){return D(n,arguments,T(this).constructor)}return s.prototype=Object.create(n.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),f(s,n)})(u)}function D(u,e,n){return(D=L()?Reflect.construct:function(t,s,g){var a=[null];a.push.apply(a,s);var o=new(Function.bind.apply(t,a));return g&&f(o,g.prototype),o}).apply(null,arguments)}function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function f(u,e){return(f=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(u,e)}function T(u){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(u)}function h(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}var p=function(){function u(n){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=n.fetchSetup||b,this.controller=new self.AbortController,this.stats=new y.LoadStats}var e=u.prototype;return e.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},e.abortInternal=function(){var n=this.response;n&&n.ok||(this.stats.aborted=!0,this.controller.abort())},e.abort=function(){var n;this.abortInternal(),(n=this.callbacks)!==null&&n!==void 0&&n.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},e.load=function(n,t,s){var g=this,a=this.stats;if(a.loading.start)throw new Error("Loader can only be used once.");a.loading.start=self.performance.now();var o=function(i,m){var S={method:"GET",mode:"cors",credentials:"same-origin",signal:m};return i.rangeEnd&&(S.headers=new self.Headers({Range:"bytes="+i.rangeStart+"-"+String(i.rangeEnd-1)})),S}(n,this.controller.signal),d=s.onProgress,r=n.responseType==="arraybuffer",l=r?"byteLength":"length";this.context=n,this.config=t,this.callbacks=s,this.request=this.fetchSetup(n,o),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){g.abortInternal(),s.onTimeout(a,n,g.response)},t.timeout),self.fetch(this.request).then(function(i){if(g.response=g.loader=i,!i.ok){var m=i.status,S=i.statusText;throw new E(S||"fetch, bad network response",m,i)}return a.loading.first=Math.max(self.performance.now(),a.loading.start),a.total=parseInt(i.headers.get("Content-Length")||"0"),d&&Object(C.isFiniteNumber)(t.highWaterMark)?g.loadProgressively(i,a,n,t.highWaterMark,d):r?i.arrayBuffer():i.text()}).then(function(i){var m=g.response;self.clearTimeout(g.requestTimeout),a.loading.end=Math.max(self.performance.now(),a.loading.first),a.loaded=a.total=i[l];var S={url:m.url,data:i};d&&!Object(C.isFiniteNumber)(t.highWaterMark)&&d(a,n,i,m),s.onSuccess(S,a,n,m)}).catch(function(i){if(self.clearTimeout(g.requestTimeout),!a.aborted){var m=i.code||0;s.onError({code:m,text:i.message},n,i.details)}})},e.getCacheAge=function(){var n=null;if(this.response){var t=this.response.headers.get("age");n=t?parseFloat(t):null}return n},e.loadProgressively=function(n,t,s,g,a){g===void 0&&(g=0);var o=new v.default,d=n.body.getReader();return function r(){return d.read().then(function(l){if(l.done)return o.dataLength&&a(t,s,o.flush(),n),Promise.resolve(new ArrayBuffer(0));var i=l.value,m=i.length;return t.loaded+=m,m<g||o.dataLength?(o.push(i),o.dataLength>=g&&a(t,s,o.flush(),n)):a(t,s,i,n),r()}).catch(function(){return Promise.reject()})}()},u}();function b(u,e){return new self.Request(u.url,e)}var E=function(u){var e,n;function t(s,g,a){var o;return(o=u.call(this,s)||this).code=void 0,o.details=void 0,o.code=g,o.details=a,o}return n=u,(e=t).prototype=Object.create(n.prototype),e.prototype.constructor=e,f(e,n),t}(k(Error));A.default=p},"./src/utils/imsc1-ttml-parser.ts":function(R,A,c){c.r(A),c.d(A,"IMSC1_CODEC",function(){return T}),c.d(A,"parseIMSC1",function(){return E});var C=c("./src/utils/mp4-tools.ts"),y=c("./src/utils/vttparser.ts"),v=c("./src/utils/vttcue.ts"),k=c("./src/demux/id3.ts"),D=c("./src/utils/timescale-conversion.ts"),L=c("./src/utils/webvtt-parser.ts");function f(){return(f=Object.assign||function(g){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(g[d]=o[d])}return g}).apply(this,arguments)}var T="stpp.ttml.im1t",h=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,p=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,b={left:"start",center:"center",right:"end",start:"start",end:"end"};function E(g,a,o,d,r){var l=Object(C.findBox)(new Uint8Array(g),["mdat"]);if(l.length!==0){var i=l[0],m=Object(k.utf8ArrayToStr)(new Uint8Array(g,i.start,i.end-i.start)),S=Object(D.toTimescaleFromScale)(a,1,o);try{d(function(w,x){var _=new DOMParser().parseFromString(w,"text/xml").getElementsByTagName("tt")[0];if(!_)throw new Error("Invalid ttml");var I={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},P=Object.keys(I).reduce(function(G,K){return G[K]=_.getAttribute("ttp:"+K)||I[K],G},{}),N=_.getAttribute("xml:space")!=="preserve",U=e(u(_,"styling","style")),M=e(u(_,"layout","region")),B=u(_,"body","[begin]");return[].map.call(B,function(G){var K=function ve(we,ue){return[].slice.call(we.childNodes).reduce(function(Ee,Ce,Re){var Ne;return Ce.nodeName==="br"&&Re?Ee+`
`:(Ne=Ce.childNodes)!==null&&Ne!==void 0&&Ne.length?ve(Ce,ue):ue?Ee+Ce.textContent.trim().replace(/\s+/g," "):Ee+Ce.textContent},"")}(G,N);if(!K||!G.hasAttribute("begin"))return null;var z=s(G.getAttribute("begin"),P),Y=s(G.getAttribute("dur"),P),q=s(G.getAttribute("end"),P);if(z===null)throw t(G);if(q===null){if(Y===null)throw t(G);q=z+Y}var Z=new v.default(z-x,q-x,K);Z.id=Object(L.generateCueId)(Z.startTime,Z.endTime,Z.text);var ee=M[G.getAttribute("region")],te=U[G.getAttribute("style")];Z.position=10,Z.size=80;var ae=function(ve,we){var ue="http://www.w3.org/ns/ttml#styling";return["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce(function(Ee,Ce){var Re=n(we,ue,Ce)||n(ve,ue,Ce);return Re&&(Ee[Ce]=Re),Ee},{})}(ee,te),se=ae.textAlign;if(se){var pe=b[se];pe&&(Z.lineAlign=pe),Z.align=se}return f(Z,ae),Z}).filter(function(G){return G!==null})}(m,S))}catch(w){r(w)}}else r(new Error("Could not parse IMSC1 mdat"))}function u(g,a,o){var d=g.getElementsByTagName(a)[0];return d?[].slice.call(d.querySelectorAll(o)):[]}function e(g){return g.reduce(function(a,o){var d=o.getAttribute("xml:id");return d&&(a[d]=o),a},{})}function n(g,a,o){return g.hasAttributeNS(a,o)?g.getAttributeNS(a,o):null}function t(g){return new Error("Could not parse ttml timestamp "+g)}function s(g,a){if(!g)return null;var o=Object(y.parseTimeStamp)(g);return o===null&&(h.test(g)?o=function(d,r){var l=h.exec(d),i=(0|l[4])+(0|l[5])/r.subFrameRate;return 3600*(0|l[1])+60*(0|l[2])+(0|l[3])+i/r.frameRate}(g,a):p.test(g)&&(o=function(d,r){var l=p.exec(d),i=Number(l[1]);switch(l[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/r.frameRate;case"t":return i/r.tickRate}return i}(g,a))),o}},"./src/utils/logger.ts":function(R,A,c){c.r(A),c.d(A,"enableLogs",function(){return D}),c.d(A,"logger",function(){return L});var C=function(){},y={trace:C,debug:C,log:C,warn:C,info:C,error:C},v=y;function k(f){var T=self.console[f];return T?T.bind(self.console,"["+f+"] >"):C}function D(f){if(self.console&&f===!0||typeof f=="object"){(function(T){for(var h=arguments.length,p=new Array(h>1?h-1:0),b=1;b<h;b++)p[b-1]=arguments[b];p.forEach(function(E){v[E]=T[E]?T[E].bind(T):k(E)})})(f,"debug","log","info","warn","error");try{v.log()}catch{v=y}}else v=y}var L=y},"./src/utils/mediakeys-helper.ts":function(R,A,c){var C;c.r(A),c.d(A,"KeySystems",function(){return C}),c.d(A,"requestMediaKeySystemAccess",function(){return y}),function(v){v.WIDEVINE="com.widevine.alpha",v.PLAYREADY="com.microsoft.playready"}(C||(C={}));var y=typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null},"./src/utils/mediasource-helper.ts":function(R,A,c){function C(){return self.MediaSource||self.WebKitMediaSource}c.r(A),c.d(A,"getMediaSource",function(){return C})},"./src/utils/mp4-tools.ts":function(R,A,c){c.r(A),c.d(A,"bin2str",function(){return D}),c.d(A,"readUint16",function(){return L}),c.d(A,"readUint32",function(){return f}),c.d(A,"writeUint32",function(){return T}),c.d(A,"findBox",function(){return h}),c.d(A,"parseSegmentIndex",function(){return p}),c.d(A,"parseInitSegment",function(){return b}),c.d(A,"getStartDTS",function(){return E}),c.d(A,"getDuration",function(){return u}),c.d(A,"computeRawDurationFromSamples",function(){return e}),c.d(A,"offsetStartDTS",function(){return n}),c.d(A,"segmentValidRange",function(){return t}),c.d(A,"appendUint8Array",function(){return s});var C=c("./src/utils/typed-array.ts"),y=c("./src/loader/fragment.ts"),v=Math.pow(2,32)-1,k=[].push;function D(g){return String.fromCharCode.apply(null,g)}function L(g,a){"data"in g&&(a+=g.start,g=g.data);var o=g[a]<<8|g[a+1];return o<0?65536+o:o}function f(g,a){"data"in g&&(a+=g.start,g=g.data);var o=g[a]<<24|g[a+1]<<16|g[a+2]<<8|g[a+3];return o<0?4294967296+o:o}function T(g,a,o){"data"in g&&(a+=g.start,g=g.data),g[a]=o>>24,g[a+1]=o>>16&255,g[a+2]=o>>8&255,g[a+3]=255&o}function h(g,a){var o,d,r,l=[];if(!a.length)return l;"data"in g?(o=g.data,d=g.start,r=g.end):(d=0,r=(o=g).byteLength);for(var i=d;i<r;){var m=f(o,i),S=m>1?i+m:r;if(D(o.subarray(i+4,i+8))===a[0])if(a.length===1)l.push({data:o,start:i+8,end:S});else{var w=h({data:o,start:i+8,end:S},a.slice(1));w.length&&k.apply(l,w)}i=S}return l}function p(g){var a=h(g,["moov"])[0],o=a?a.end:null,d=h(g,["sidx"]);if(!d||!d[0])return null;var r=[],l=d[0],i=l.data[0],m=i===0?8:16,S=f(l,m);m+=4,m+=i===0?8:16,m+=2;var w=l.end+0,x=L(l,m);m+=2;for(var _=0;_<x;_++){var I=m,P=f(l,I);I+=4;var N=2147483647&P;if((2147483648&P)>>>31==1)return console.warn("SIDX has hierarchical references (not supported)"),null;var U=f(l,I);I+=4,r.push({referenceSize:N,subsegmentDuration:U,info:{duration:U/S,start:w,end:w+N-1}}),w+=N,m=I+=4}return{earliestPresentationTime:0,timescale:S,version:i,referencesCount:x,references:r,moovEndOffset:o}}function b(g){for(var a=[],o=h(g,["moov","trak"]),d=0;d<o.length;d++){var r=o[d],l=h(r,["tkhd"])[0];if(l){var i=l.data[l.start],m=i===0?12:20,S=f(l,m),w=h(r,["mdia","mdhd"])[0];if(w){var x=f(w,m=(i=w.data[w.start])===0?12:20),_=h(r,["mdia","hdlr"])[0];if(_){var I=D(_.data.subarray(_.start+8,_.start+12)),P={soun:y.ElementaryStreamTypes.AUDIO,vide:y.ElementaryStreamTypes.VIDEO}[I];if(P){var N=h(r,["mdia","minf","stbl","stsd"])[0],U=void 0;N&&(U=D(N.data.subarray(N.start+12,N.start+16))),a[S]={timescale:x,type:P},a[P]={timescale:x,id:S,codec:U}}}}}}return h(g,["moov","mvex","trex"]).forEach(function(M){var B=f(M,4),G=a[B];G&&(G.default={duration:f(M,12),flags:f(M,20)})}),a}function E(g,a){return h(a,["moof","traf"]).reduce(function(o,d){var r=h(d,["tfdt"])[0],l=r.data[r.start],i=h(d,["tfhd"]).reduce(function(m,S){var w=f(S,4),x=g[w];if(x){var _=f(r,4);l===1&&(_*=Math.pow(2,32),_+=f(r,8));var I=_/(x.timescale||9e4);if(isFinite(I)&&(m===null||I<m))return I}return m},null);return i!==null&&isFinite(i)&&(o===null||i<o)?i:o},null)||0}function u(g,a){for(var o=0,d=0,r=0,l=h(g,["moof","traf"]),i=0;i<l.length;i++){var m=l[i],S=h(m,["tfhd"])[0],w=a[f(S,4)];if(w){var x=w.default,_=f(S,0)|(x==null?void 0:x.flags),I=x==null?void 0:x.duration;8&_&&(I=f(S,2&_?12:8));for(var P=w.timescale||9e4,N=h(m,["trun"]),U=0;U<N.length;U++)o=I?I*f(N[U],4):e(N[U]),w.type===y.ElementaryStreamTypes.VIDEO?d+=o/P:w.type===y.ElementaryStreamTypes.AUDIO&&(r+=o/P)}}if(d===0&&r===0){var M=p(g);if(M!=null&&M.references)return M.references.reduce(function(B,G){return B+G.info.duration||0},0)}return d||r}function e(g){var a=f(g,0),o=8;1&a&&(o+=4),4&a&&(o+=4);for(var d=0,r=f(g,4),l=0;l<r;l++)256&a&&(d+=f(g,o),o+=4),512&a&&(o+=4),1024&a&&(o+=4),2048&a&&(o+=4);return d}function n(g,a,o){h(a,["moof","traf"]).forEach(function(d){h(d,["tfhd"]).forEach(function(r){var l=f(r,4),i=g[l];if(i){var m=i.timescale||9e4;h(d,["tfdt"]).forEach(function(S){var w=S.data[S.start],x=f(S,4);if(w===0)T(S,4,x-o*m);else{x*=Math.pow(2,32),x+=f(S,8),x-=o*m,x=Math.max(x,0);var _=Math.floor(x/(v+1)),I=Math.floor(x%(v+1));T(S,4,_),T(S,8,I)}})}})})}function t(g){var a={valid:null,remainder:null},o=h(g,["moof"]);if(!o)return a;if(o.length<2)return a.remainder=g,a;var d=o[o.length-1];return a.valid=Object(C.sliceUint8)(g,0,d.start-8),a.remainder=Object(C.sliceUint8)(g,d.start-8),a}function s(g,a){var o=new Uint8Array(g.length+a.length);return o.set(g),o.set(a,g.length),o}},"./src/utils/output-filter.ts":function(R,A,c){c.r(A),c.d(A,"default",function(){return C});var C=function(){function y(k,D){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=k,this.trackName=D}var v=y.prototype;return v.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},v.newCue=function(k,D,L){(this.startTime===null||this.startTime>k)&&(this.startTime=k),this.endTime=D,this.screen=L,this.timelineController.createCaptionsTrack(this.trackName)},v.reset=function(){this.cueRanges=[]},y}()},"./src/utils/texttrack-utils.ts":function(R,A,c){c.r(A),c.d(A,"sendAddTrackEvent",function(){return y}),c.d(A,"addCueToTrack",function(){return v}),c.d(A,"clearCurrentCues",function(){return k}),c.d(A,"removeCuesInRange",function(){return D}),c.d(A,"getCuesInRange",function(){return L});var C=c("./src/utils/logger.ts");function y(f,T){var h;try{h=new Event("addtrack")}catch{(h=document.createEvent("Event")).initEvent("addtrack",!1,!1)}h.track=f,T.dispatchEvent(h)}function v(f,T){var h=f.mode;if(h==="disabled"&&(f.mode="hidden"),f.cues&&!f.cues.getCueById(T.id))try{if(f.addCue(T),!f.cues.getCueById(T.id))throw new Error("addCue is failed for: "+T)}catch(b){C.logger.debug("[texttrack-utils]: "+b);var p=new self.TextTrackCue(T.startTime,T.endTime,T.text);p.id=T.id,f.addCue(p)}h==="disabled"&&(f.mode=h)}function k(f){var T=f.mode;if(T==="disabled"&&(f.mode="hidden"),f.cues)for(var h=f.cues.length;h--;)f.removeCue(f.cues[h]);T==="disabled"&&(f.mode=T)}function D(f,T,h){var p=f.mode;if(p==="disabled"&&(f.mode="hidden"),f.cues&&f.cues.length>0)for(var b=L(f.cues,T,h),E=0;E<b.length;E++)f.removeCue(b[E]);p==="disabled"&&(f.mode=p)}function L(f,T,h){var p=[],b=function(n,t){if(t<n[0].startTime)return 0;var s=n.length-1;if(t>n[s].endTime)return-1;for(var g=0,a=s;g<=a;){var o=Math.floor((a+g)/2);if(t<n[o].startTime)a=o-1;else{if(!(t>n[o].startTime&&g<s))return o;g=o+1}}return n[g].startTime-t<t-n[a].startTime?g:a}(f,T);if(b>-1)for(var E=b,u=f.length;E<u;E++){var e=f[E];if(e.startTime>=T&&e.endTime<=h)p.push(e);else if(e.startTime>h)return p}return p}},"./src/utils/time-ranges.ts":function(R,A,c){c.r(A),A.default={toString:function(C){for(var y="",v=C.length,k=0;k<v;k++)y+="["+C.start(k).toFixed(3)+","+C.end(k).toFixed(3)+"]";return y}}},"./src/utils/timescale-conversion.ts":function(R,A,c){function C(D,L,f,T){f===void 0&&(f=1),T===void 0&&(T=!1);var h=D*L*f;return T?Math.round(h):h}function y(D,L,f,T){return f===void 0&&(f=1),T===void 0&&(T=!1),C(D,L,1/f,T)}function v(D,L){return L===void 0&&(L=!1),C(D,1e3,1/9e4,L)}function k(D,L){return L===void 0&&(L=1),C(D,9e4,1/L)}c.r(A),c.d(A,"toTimescaleFromBase",function(){return C}),c.d(A,"toTimescaleFromScale",function(){return y}),c.d(A,"toMsFromMpegTsClock",function(){return v}),c.d(A,"toMpegTsClockFromTimescale",function(){return k})},"./src/utils/typed-array.ts":function(R,A,c){function C(y,v,k){return Uint8Array.prototype.slice?y.slice(v,k):new Uint8Array(Array.prototype.slice.call(y,v,k))}c.r(A),c.d(A,"sliceUint8",function(){return C})},"./src/utils/vttcue.ts":function(R,A,c){c.r(A),A.default=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;var C=["","lr","rl"],y=["start","middle","end","left","right"];function v(f,T){if(typeof T!="string"||!Array.isArray(f))return!1;var h=T.toLowerCase();return!!~f.indexOf(h)&&h}function k(f){return v(y,f)}function D(f){for(var T=arguments.length,h=new Array(T>1?T-1:0),p=1;p<T;p++)h[p-1]=arguments[p];for(var b=1;b<arguments.length;b++){var E=arguments[b];for(var u in E)f[u]=E[u]}return f}function L(f,T,h){var p=this,b={enumerable:!0};p.hasBeenReset=!1;var E="",u=!1,e=f,n=T,t=h,s=null,g="",a=!0,o="auto",d="start",r=50,l="middle",i=50,m="middle";Object.defineProperty(p,"id",D({},b,{get:function(){return E},set:function(S){E=""+S}})),Object.defineProperty(p,"pauseOnExit",D({},b,{get:function(){return u},set:function(S){u=!!S}})),Object.defineProperty(p,"startTime",D({},b,{get:function(){return e},set:function(S){if(typeof S!="number")throw new TypeError("Start time must be set to a number.");e=S,this.hasBeenReset=!0}})),Object.defineProperty(p,"endTime",D({},b,{get:function(){return n},set:function(S){if(typeof S!="number")throw new TypeError("End time must be set to a number.");n=S,this.hasBeenReset=!0}})),Object.defineProperty(p,"text",D({},b,{get:function(){return t},set:function(S){t=""+S,this.hasBeenReset=!0}})),Object.defineProperty(p,"region",D({},b,{get:function(){return s},set:function(S){s=S,this.hasBeenReset=!0}})),Object.defineProperty(p,"vertical",D({},b,{get:function(){return g},set:function(S){var w=function(x){return v(C,x)}(S);if(w===!1)throw new SyntaxError("An invalid or illegal string was specified.");g=w,this.hasBeenReset=!0}})),Object.defineProperty(p,"snapToLines",D({},b,{get:function(){return a},set:function(S){a=!!S,this.hasBeenReset=!0}})),Object.defineProperty(p,"line",D({},b,{get:function(){return o},set:function(S){if(typeof S!="number"&&S!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");o=S,this.hasBeenReset=!0}})),Object.defineProperty(p,"lineAlign",D({},b,{get:function(){return d},set:function(S){var w=k(S);if(!w)throw new SyntaxError("An invalid or illegal string was specified.");d=w,this.hasBeenReset=!0}})),Object.defineProperty(p,"position",D({},b,{get:function(){return r},set:function(S){if(S<0||S>100)throw new Error("Position must be between 0 and 100.");r=S,this.hasBeenReset=!0}})),Object.defineProperty(p,"positionAlign",D({},b,{get:function(){return l},set:function(S){var w=k(S);if(!w)throw new SyntaxError("An invalid or illegal string was specified.");l=w,this.hasBeenReset=!0}})),Object.defineProperty(p,"size",D({},b,{get:function(){return i},set:function(S){if(S<0||S>100)throw new Error("Size must be between 0 and 100.");i=S,this.hasBeenReset=!0}})),Object.defineProperty(p,"align",D({},b,{get:function(){return m},set:function(S){var w=k(S);if(!w)throw new SyntaxError("An invalid or illegal string was specified.");m=w,this.hasBeenReset=!0}})),p.displayState=void 0}return L.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},L}()},"./src/utils/vttparser.ts":function(R,A,c){c.r(A),c.d(A,"parseTimeStamp",function(){return v}),c.d(A,"fixLineBreaks",function(){return h}),c.d(A,"VTTParser",function(){return p});var C=c("./src/utils/vttcue.ts"),y=function(){function b(){}return b.prototype.decode=function(E,u){if(!E)return"";if(typeof E!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(E))},b}();function v(b){function E(e,n,t,s){return 3600*(0|e)+60*(0|n)+(0|t)+parseFloat(s||0)}var u=b.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return u?parseFloat(u[2])>59?E(u[2],u[3],0,u[4]):E(u[1],u[2],u[3],u[4]):null}var k=function(){function b(){this.values=Object.create(null)}var E=b.prototype;return E.set=function(u,e){this.get(u)||e===""||(this.values[u]=e)},E.get=function(u,e,n){return n?this.has(u)?this.values[u]:e[n]:this.has(u)?this.values[u]:e},E.has=function(u){return u in this.values},E.alt=function(u,e,n){for(var t=0;t<n.length;++t)if(e===n[t]){this.set(u,e);break}},E.integer=function(u,e){/^-?\d+$/.test(e)&&this.set(u,parseInt(e,10))},E.percent=function(u,e){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(e)){var n=parseFloat(e);if(n>=0&&n<=100)return this.set(u,n),!0}return!1},b}();function D(b,E,u,e){var n=e?b.split(e):[b];for(var t in n)if(typeof n[t]=="string"){var s=n[t].split(u);s.length===2&&E(s[0],s[1])}}var L=new C.default(0,0,""),f=L.align==="middle"?"middle":"center";function T(b,E,u){var e=b;function n(){var s=v(b);if(s===null)throw new Error("Malformed timestamp: "+e);return b=b.replace(/^[^\sa-zA-Z-]+/,""),s}function t(){b=b.replace(/^\s+/,"")}if(t(),E.startTime=n(),t(),b.substr(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+e);b=b.substr(3),t(),E.endTime=n(),t(),function(s,g){var a=new k;D(s,function(r,l){var i;switch(r){case"region":for(var m=u.length-1;m>=0;m--)if(u[m].id===l){a.set(r,u[m].region);break}break;case"vertical":a.alt(r,l,["rl","lr"]);break;case"line":i=l.split(","),a.integer(r,i[0]),a.percent(r,i[0])&&a.set("snapToLines",!1),a.alt(r,i[0],["auto"]),i.length===2&&a.alt("lineAlign",i[1],["start",f,"end"]);break;case"position":i=l.split(","),a.percent(r,i[0]),i.length===2&&a.alt("positionAlign",i[1],["start",f,"end","line-left","line-right","auto"]);break;case"size":a.percent(r,l);break;case"align":a.alt(r,l,["start",f,"end","left","right"])}},/:/,/\s/),g.region=a.get("region",null),g.vertical=a.get("vertical","");var o=a.get("line","auto");o==="auto"&&L.line===-1&&(o=-1),g.line=o,g.lineAlign=a.get("lineAlign","start"),g.snapToLines=a.get("snapToLines",!0),g.size=a.get("size",100),g.align=a.get("align",f);var d=a.get("position","auto");d==="auto"&&L.position===50&&(d=g.align==="start"||g.align==="left"?0:g.align==="end"||g.align==="right"?100:50),g.position=d}(b,E)}function h(b){return b.replace(/<br(?: \/)?>/gi,`
`)}var p=function(){function b(){this.state="INITIAL",this.buffer="",this.decoder=new y,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var E=b.prototype;return E.parse=function(u){var e=this;function n(){var o=e.buffer,d=0;for(o=h(o);d<o.length&&o[d]!=="\r"&&o[d]!==`
`;)++d;var r=o.substr(0,d);return o[d]==="\r"&&++d,o[d]===`
`&&++d,e.buffer=o.substr(d),r}u&&(e.buffer+=e.decoder.decode(u,{stream:!0}));try{var t="";if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;var s=(t=n()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!s||!s[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}for(var g=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(g?g=!1:t=n(),e.state){case"HEADER":/:/.test(t)?D(t,function(o,d){},/:/):t||(e.state="ID");continue;case"NOTE":t||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(t)){e.state="NOTE";break}if(!t)continue;if(e.cue=new C.default(0,0,""),e.state="CUE",t.indexOf("-->")===-1){e.cue.id=t;continue}case"CUE":if(!e.cue){e.state="BADCUE";continue}try{T(t,e.cue,e.regionList)}catch{e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var a=t.indexOf("-->")!==-1;if(!t||a&&(g=!0)){e.oncue&&e.cue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}if(e.cue===null)continue;e.cue.text&&(e.cue.text+=`
`),e.cue.text+=t;continue;case"BADCUE":t||(e.state="ID")}}}catch{e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},E.flush=function(){try{if((this.cue||this.state==="HEADER")&&(this.buffer+=`

`,this.parse()),this.state==="INITIAL"||this.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(u){this.onparsingerror&&this.onparsingerror(u)}return this.onflush&&this.onflush(),this},b}()},"./src/utils/webvtt-parser.ts":function(R,A,c){c.r(A),c.d(A,"generateCueId",function(){return h}),c.d(A,"parseWebVTT",function(){return p});var C=c("./src/polyfills/number.ts"),y=c("./src/utils/vttparser.ts"),v=c("./src/demux/id3.ts"),k=c("./src/utils/timescale-conversion.ts"),D=c("./src/remux/mp4-remuxer.ts"),L=/\r\n|\n\r|\n|\r/g,f=function(b,E,u){return u===void 0&&(u=0),b.substr(u,E.length)===E},T=function(b){for(var E=5381,u=b.length;u;)E=33*E^b.charCodeAt(--u);return(E>>>0).toString()};function h(b,E,u){return T(b.toString())+T(E.toString())+T(u)}function p(b,E,u,e,n,t,s,g){var a,o=new y.VTTParser,d=Object(v.utf8ArrayToStr)(new Uint8Array(b)).trim().replace(L,`
`).split(`
`),r=[],l=Object(k.toMpegTsClockFromTimescale)(E,u),i="00:00.000",m=0,S=0,w=!0,x=!1;o.oncue=function(_){var I=e[n],P=e.ccOffset,N=(m-l)/9e4;if(I!=null&&I.new&&(S!==void 0?P=e.ccOffset=I.start:function(G,K,z){var Y=G[K],q=G[Y.prevCC];if(!q||!q.new&&Y.new)return G.ccOffset=G.presentationOffset=Y.start,void(Y.new=!1);for(;(Z=q)!==null&&Z!==void 0&&Z.new;){var Z;G.ccOffset+=Y.start-q.start,Y.new=!1,q=G[(Y=q).prevCC]}G.presentationOffset=z}(e,n,N)),N&&(P=N-e.presentationOffset),x){var U=_.endTime-_.startTime,M=Object(D.normalizePts)(9e4*(_.startTime+P-S),9e4*t)/9e4;_.startTime=M,_.endTime=M+U}var B=_.text.trim();_.text=decodeURIComponent(encodeURIComponent(B)),_.id||(_.id=h(_.startTime,_.endTime,B)),_.endTime>0&&r.push(_)},o.onparsingerror=function(_){a=_},o.onflush=function(){a?g(a):s(r)},d.forEach(function(_){if(w){if(f(_,"X-TIMESTAMP-MAP=")){w=!1,x=!0,_.substr(16).split(",").forEach(function(I){f(I,"LOCAL:")?i=I.substr(6):f(I,"MPEGTS:")&&(m=parseInt(I.substr(7)))});try{S=function(I){var P=parseInt(I.substr(-3)),N=parseInt(I.substr(-6,2)),U=parseInt(I.substr(-9,2)),M=I.length>9?parseInt(I.substr(0,I.indexOf(":"))):0;if(!(Object(C.isFiniteNumber)(P)&&Object(C.isFiniteNumber)(N)&&Object(C.isFiniteNumber)(U)&&Object(C.isFiniteNumber)(M)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+I);return P+=1e3*N,P+=6e4*U,P+=36e5*M}(i)/1e3}catch(I){x=!1,a=I}return}_===""&&(w=!1)}o.parse(_+`
`)}),o.flush()}},"./src/utils/xhr-loader.ts":function(R,A,c){c.r(A);var C=c("./src/utils/logger.ts"),y=c("./src/loader/load-stats.ts"),v=/^age:\s*[\d.]+\s*$/m,k=function(){function D(f){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=f?f.xhrSetup:null,this.stats=new y.LoadStats,this.retryDelay=0}var L=D.prototype;return L.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},L.abortInternal=function(){var f=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),f&&(f.onreadystatechange=null,f.onprogress=null,f.readyState!==4&&(this.stats.aborted=!0,f.abort()))},L.abort=function(){var f;this.abortInternal(),(f=this.callbacks)!==null&&f!==void 0&&f.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},L.load=function(f,T,h){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=f,this.config=T,this.callbacks=h,this.retryDelay=T.retryDelay,this.loadInternal()},L.loadInternal=function(){var f=this.config,T=this.context;if(f){var h=this.loader=new self.XMLHttpRequest,p=this.stats;p.loading.first=0,p.loaded=0;var b=this.xhrSetup;try{if(b)try{b(h,T.url)}catch{h.open("GET",T.url,!0),b(h,T.url)}h.readyState||h.open("GET",T.url,!0)}catch(E){return void this.callbacks.onError({code:h.status,text:E.message},T,h)}T.rangeEnd&&h.setRequestHeader("Range","bytes="+T.rangeStart+"-"+(T.rangeEnd-1)),h.onreadystatechange=this.readystatechange.bind(this),h.onprogress=this.loadprogress.bind(this),h.responseType=T.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),f.timeout),h.send()}},L.readystatechange=function(){var f=this.context,T=this.loader,h=this.stats;if(f&&T){var p=T.readyState,b=this.config;if(!h.aborted&&p>=2)if(self.clearTimeout(this.requestTimeout),h.loading.first===0&&(h.loading.first=Math.max(self.performance.now(),h.loading.start)),p===4){T.onreadystatechange=null,T.onprogress=null;var E=T.status;if(E>=200&&E<300){var u,e;if(h.loading.end=Math.max(self.performance.now(),h.loading.first),e=f.responseType==="arraybuffer"?(u=T.response).byteLength:(u=T.responseText).length,h.loaded=h.total=e,!this.callbacks)return;var n=this.callbacks.onProgress;if(n&&n(h,f,u,T),!this.callbacks)return;var t={url:T.responseURL,data:u};this.callbacks.onSuccess(t,h,f,T)}else h.retry>=b.maxRetry||E>=400&&E<499?(C.logger.error(E+" while loading "+f.url),this.callbacks.onError({code:E,text:T.statusText},f,T)):(C.logger.warn(E+" while loading "+f.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,b.maxRetryDelay),h.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),b.timeout)}},L.loadtimeout=function(){C.logger.warn("timeout while loading "+this.context.url);var f=this.callbacks;f&&(this.abortInternal(),f.onTimeout(this.stats,this.context,this.loader))},L.loadprogress=function(f){var T=this.stats;T.loaded=f.loaded,f.lengthComputable&&(T.total=f.total)},L.getCacheAge=function(){var f=null;if(this.loader&&v.test(this.loader.getAllResponseHeaders())){var T=this.loader.getResponseHeader("age");f=T?parseFloat(T):null}return f},D}();A.default=k}}).default},j.exports=F())},function(j,H,O){j.exports=!O(7)&&!O(11)(function(){return Object.defineProperty(O(37)("div"),"a",{get:function(){return 7}}).a!=7})},function(j,H,O){var F=O(18),R=O(6).document,A=F(R)&&F(R.createElement);j.exports=function(c){return A?R.createElement(c):{}}},function(j,H){var O={}.toString;j.exports=function(F){return O.call(F).slice(8,-1)}},function(j,H){j.exports=function(O){if(O==null)throw TypeError("Can't call method on  "+O);return O}},function(j,H){j.exports=function(O){if(typeof O!="function")throw TypeError(O+" is not a function!");return O}},function(j,H,O){var F=O(14),R=O(58),A=O(30),c=O(29)("IE_PROTO"),C=function(){},y=function(){var v,k=O(37)("iframe"),D=A.length;for(k.style.display="none",O(62).appendChild(k),k.src="javascript:",(v=k.contentWindow.document).open(),v.write("<script>document.F=Object<\/script>"),v.close(),y=v.F;D--;)delete y.prototype[A[D]];return y()};j.exports=Object.create||function(v,k){var D;return v!==null?(C.prototype=F(v),D=new C,C.prototype=null,D[c]=v):D=y(),k===void 0?D:R(D,k)}},function(j,H,O){var F=O(12),R=O(15),A=O(59)(!1),c=O(29)("IE_PROTO");j.exports=function(C,y){var v,k=R(C),D=0,L=[];for(v in k)v!=c&&F(k,v)&&L.push(v);for(;y.length>D;)F(k,v=y[D++])&&(~A(L,v)||L.push(v));return L}},function(j,H){var O=Math.ceil,F=Math.floor;j.exports=function(R){return isNaN(R=+R)?0:(R>0?F:O)(R)}},function(j,H,O){H.f=O(8)},function(j,H){H.f=Object.getOwnPropertySymbols},function(j,H,O){var F=O(42),R=O(30).concat("length","prototype");H.f=Object.getOwnPropertyNames||function(A){return F(A,R)}},function(j,H,O){var F=O(14);j.exports=function(){var R=F(this),A="";return R.global&&(A+="g"),R.ignoreCase&&(A+="i"),R.multiline&&(A+="m"),R.unicode&&(A+="u"),R.sticky&&(A+="y"),A}},function(j,H){var O;O=function(){return this}();try{O=O||new Function("return this")()}catch{typeof window=="object"&&(O=window)}j.exports=O},function(j,H,O){var F=O(78);H.createRoot=F.createRoot,H.hydrateRoot=F.hydrateRoot},function(j,H,O){var F=O(51),R=O(52),A=O(27),c=O(15);j.exports=O(54)(Array,"Array",function(C,y){this._t=c(C),this._i=0,this._k=y},function(){var C=this._t,y=this._k,v=this._i++;return!C||v>=C.length?(this._t=void 0,R(1)):R(0,y=="keys"?v:y=="values"?C[v]:[v,C[v]])},"values"),A.Arguments=A.Array,F("keys"),F("values"),F("entries")},function(j,H,O){var F=O(8)("unscopables"),R=Array.prototype;R[F]==null&&O(9)(R,F,{}),j.exports=function(A){R[F][A]=!0}},function(j,H){j.exports=function(O,F){return{value:F,done:!!O}}},function(j,H,O){var F=O(38);j.exports=Object("z").propertyIsEnumerable(0)?Object:function(R){return F(R)=="String"?R.split(""):Object(R)}},function(j,H,O){var F=O(23),R=O(28),A=O(19),c=O(9),C=O(27),y=O(57),v=O(31),k=O(63),D=O(8)("iterator"),L=!([].keys&&"next"in[].keys()),f=function(){return this};j.exports=function(T,h,p,b,E,u,e){y(p,h,b);var n,t,s,g=function(w){if(!L&&w in r)return r[w];switch(w){case"keys":case"values":return function(){return new p(this,w)}}return function(){return new p(this,w)}},a=h+" Iterator",o=E=="values",d=!1,r=T.prototype,l=r[D]||r["@@iterator"]||E&&r[E],i=l||g(E),m=E?o?g("entries"):i:void 0,S=h=="Array"&&r.entries||l;if(S&&(s=k(S.call(new T)))!==Object.prototype&&s.next&&(v(s,a,!0),F||typeof s[D]=="function"||c(s,D,f)),o&&l&&l.name!=="values"&&(d=!0,i=function(){return l.call(this)}),F&&!e||!L&&!d&&r[D]||c(r,D,i),C[h]=i,C[a]=f,E)if(n={values:o?i:g("values"),keys:u?i:g("keys"),entries:m},e)for(t in n)t in r||A(r,t,n[t]);else R(R.P+R.F*(L||d),h,n);return n}},function(j,H,O){j.exports=O(21)("native-function-to-string",Function.toString)},function(j,H,O){var F=O(40);j.exports=function(R,A,c){if(F(R),A===void 0)return R;switch(c){case 1:return function(C){return R.call(A,C)};case 2:return function(C,y){return R.call(A,C,y)};case 3:return function(C,y,v){return R.call(A,C,y,v)}}return function(){return R.apply(A,arguments)}}},function(j,H,O){var F=O(41),R=O(24),A=O(31),c={};O(9)(c,O(8)("iterator"),function(){return this}),j.exports=function(C,y,v){C.prototype=F(c,{next:R(1,v)}),A(C,y+" Iterator")}},function(j,H,O){var F=O(10),R=O(14),A=O(25);j.exports=O(7)?Object.defineProperties:function(c,C){R(c);for(var y,v=A(C),k=v.length,D=0;k>D;)F.f(c,y=v[D++],C[y]);return c}},function(j,H,O){var F=O(15),R=O(60),A=O(61);j.exports=function(c){return function(C,y,v){var k,D=F(C),L=R(D.length),f=A(v,L);if(c&&y!=y){for(;L>f;)if((k=D[f++])!=k)return!0}else for(;L>f;f++)if((c||f in D)&&D[f]===y)return c||f||0;return!c&&-1}}},function(j,H,O){var F=O(43),R=Math.min;j.exports=function(A){return A>0?R(F(A),9007199254740991):0}},function(j,H,O){var F=O(43),R=Math.max,A=Math.min;j.exports=function(c,C){return(c=F(c))<0?R(c+C,0):A(c,C)}},function(j,H,O){var F=O(6).document;j.exports=F&&F.documentElement},function(j,H,O){var F=O(12),R=O(32),A=O(29)("IE_PROTO"),c=Object.prototype;j.exports=Object.getPrototypeOf||function(C){return C=R(C),F(C,A)?C[A]:typeof C.constructor=="function"&&C instanceof C.constructor?C.constructor.prototype:C instanceof Object?c:null}},function(j,H,O){var F=O(17)("meta"),R=O(18),A=O(12),c=O(10).f,C=0,y=Object.isExtensible||function(){return!0},v=!O(11)(function(){return y(Object.preventExtensions({}))}),k=function(L){c(L,F,{value:{i:"O"+ ++C,w:{}}})},D=j.exports={KEY:F,NEED:!1,fastKey:function(L,f){if(!R(L))return typeof L=="symbol"?L:(typeof L=="string"?"S":"P")+L;if(!A(L,F)){if(!y(L))return"F";if(!f)return"E";k(L)}return L[F].i},getWeak:function(L,f){if(!A(L,F)){if(!y(L))return!0;if(!f)return!1;k(L)}return L[F].w},onFreeze:function(L){return v&&D.NEED&&y(L)&&!A(L,F)&&k(L),L}}},function(j,H,O){var F=O(6),R=O(22),A=O(23),c=O(44),C=O(10).f;j.exports=function(y){var v=R.Symbol||(R.Symbol=A?{}:F.Symbol||{});y.charAt(0)=="_"||y in v||C(v,y,{value:c.f(y)})}},function(j,H,O){var F=O(25),R=O(45),A=O(33);j.exports=function(c){var C=F(c),y=R.f;if(y)for(var v,k=y(c),D=A.f,L=0;k.length>L;)D.call(c,v=k[L++])&&C.push(v);return C}},function(j,H,O){var F=O(38);j.exports=Array.isArray||function(R){return F(R)=="Array"}},function(j,H,O){var F=O(15),R=O(46).f,A={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];j.exports.f=function(C){return c&&A.call(C)=="[object Window]"?function(y){try{return R(y)}catch{return c.slice()}}(C):R(F(C))}},function(j,H,O){var F=O(33),R=O(24),A=O(15),c=O(26),C=O(12),y=O(36),v=Object.getOwnPropertyDescriptor;H.f=O(7)?v:function(k,D){if(k=A(k),D=c(D,!0),y)try{return v(k,D)}catch{}if(C(k,D))return R(!F.f.call(k,D),k[D])}},function(j,H,O){O(7)&&/./g.flags!="g"&&O(10).f(RegExp.prototype,"flags",{configurable:!0,get:O(47)})},function(j,H,O){var F=O(4),R=O(72);typeof(R=R.__esModule?R.default:R)=="string"&&(R=[[j.i,R,""]]);var A={insert:"head",singleton:!1};F(R,A),j.exports=R.locals||{}},function(j,H,O){(H=O(5)(!1)).push([j.i,"@keyframes show{0%{opacity:0}50%{opacity:.5}100%{opacity:1}}@keyframes scaleAnimate{50%{transform:scale(1.2)}100%{transform:scale(1)}}@keyframes rotateAnimate{0%{transform:rotate(270deg)}100%{transform:rotate(360deg)}}@keyframes example{from{opacity:0;transform:scale(1.5)}to{opacity:1;transform:scale(1)}}@keyframes learve{from{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(1.5)}}.JoL-progress-container{transition:all .5s;width:100%}.JoL-progress-container .progress-bg{transition:all .3s;width:100%;height:5px;background:rgba(255,255,255,.2);border-radius:2px;position:relative}.JoL-progress-container .progress-bg .progress-buffered{width:0%;height:100%;position:absolute;left:0;top:0;right:auto;bottom:auto;z-index:1;border-radius:2px;background:rgba(255,255,255,.5)}.JoL-progress-container .progress-bg .progress-played{width:0%;height:100%;position:absolute;left:0;top:0;right:auto;bottom:auto;z-index:2;border-radius:2px}.JoL-progress-container .progress-bg .progress-played .progress-scrubber{transition:all .3s;width:12px;height:12px;position:absolute;left:auto;top:-50%;right:-5px;bottom:auto;margin-top:1px;border-radius:50%}.JoL-progress-container .progress-bg .progress-seek-mask{width:100%;height:calc(100% + 6px);position:absolute;left:0;top:-3px;right:auto;bottom:auto;z-index:100}.JoL-progress-container .progress-bg .progress-seek-mask:hover{cursor:pointer}.JoL-progress-container .progress-bg .pointer{position:absolute;left:714px;top:0;right:auto;bottom:auto}.JoL-progress-container .progress-bg .pointer .top-triangle,.JoL-progress-container .progress-bg .pointer .bottom-triangle{width:0;height:0;position:absolute;border-right:4px solid transparent;border-left:4px solid transparent}.JoL-progress-container .progress-bg .pointer .top-triangle{left:-4px;top:-5px;border-bottom:4px solid transparent}.JoL-progress-container .progress-bg .pointer .bottom-triangle{left:-4px;top:3px;border-top:4px solid transparent}.JoL-progress-container .progress-bg .video-img-box{width:169px;height:96px;position:absolute;left:0;top:-105px;right:auto;bottom:auto;margin-left:calc(-169px / 2)}.JoL-progress-container .progress-bg .video-img-box .video-current-img{width:100%;height:100%}.JoL-progress-container .progress-bg .video-img-box .current-time{position:absolute;left:50%;top:auto;right:auto;bottom:0;font-size:12px;color:#fff;font-weight:normal;transform:translateX(-50%);background-color:#222;padding:1px 4px}",""]),j.exports=H},function(j,H,O){var F=O(4),R=O(74);typeof(R=R.__esModule?R.default:R)=="string"&&(R=[[j.i,R,""]]);var A={insert:"head",singleton:!1};F(R,A),j.exports=R.locals||{}},function(j,H,O){(H=O(5)(!1)).push([j.i,"@keyframes show{0%{opacity:0}50%{opacity:.5}100%{opacity:1}}@keyframes scaleAnimate{50%{transform:scale(1.2)}100%{transform:scale(1)}}@keyframes rotateAnimate{0%{transform:rotate(270deg)}100%{transform:rotate(360deg)}}.JoL-player-container .tooltip{position:relative;cursor:pointer;z-index:1}.JoL-player-container .tooltip:hover .title{transition:all .6s;opacity:1;display:block;animation:show .3s ease}.JoL-player-container .tooltip .title{display:none;opacity:0;z-index:-1;position:absolute;color:#fff;left:50%;bottom:49px;font-size:13px;background-color:rgba(0,0,0,.7);border-radius:3px;transform:translateX(-50%);line-height:20px;padding:5px 7px;white-space:nowrap}",""]),j.exports=H},function(j,H,O){var F=O(4),R=O(76);typeof(R=R.__esModule?R.default:R)=="string"&&(R=[[j.i,R,""]]);var A={insert:"head",singleton:!1};F(R,A),j.exports=R.locals||{}},function(j,H,O){(H=O(5)(!1)).push([j.i,'@keyframes show{0%{opacity:0}50%{opacity:.5}100%{opacity:1}}@keyframes scaleAnimate{50%{transform:scale(1.2)}100%{transform:scale(1)}}@keyframes rotateAnimate{0%{transform:rotate(270deg)}100%{transform:rotate(360deg)}}.JoL-player-container body{--JoL-theme: red}.JoL-player-container .container{display:flex;align-items:center;font-size:14px}.JoL-player-container .label{padding-right:20px;cursor:pointer}.JoL-player-container .switch{position:relative;width:30px;height:15px;background-color:#dadada;border-radius:30px;border:none;outline:none;-webkit-appearance:none;transition:all .2s ease;cursor:pointer}.JoL-player-container .switch::after{content:"";width:50%;height:100%;position:absolute;left:0;top:0;right:auto;bottom:auto;background-color:#fff;border-radius:50%;transition:all .2s ease}.JoL-player-container .switch:checked{background-color:var(--JoL-theme)}.JoL-player-container .switch:checked::after{left:50%}',""]),j.exports=H},function(j,H,O){(H=O(5)(!1)).push([j.i,'@keyframes show{0%{opacity:0}50%{opacity:.5}100%{opacity:1}}@keyframes scaleAnimate{50%{transform:scale(1.2)}100%{transform:scale(1)}}@keyframes rotateAnimate{0%{transform:rotate(270deg)}100%{transform:rotate(360deg)}}.clientFullScreen{width:auto !important;height:auto !important;position:fixed !important;left:0;top:0;right:0;bottom:0;z-index:100000 !important}.JoL-controls-container{padding:0 5px;box-sizing:border-box;transition:all .5s;width:100%;height:42px;color:#eee;position:relative;display:flex;align-items:center}.JoL-controls-container:hover{cursor:default}.JoL-controls-container:after{content:"";width:calc(100% + 26px);height:100%;position:absolute;left:50%;top:auto;right:auto;bottom:0;z-index:-1;transform:translateX(-50%);background:linear-gradient(to top, rgba(0, 0, 0, 0.5), transparent)}.JoL-controls-container .play-pause-timeline{display:flex;align-items:center}.JoL-controls-container .play-pause-timeline .icon{cursor:pointer}.JoL-controls-container .play-pause-timeline .time-wrap{font-size:13px;vertical-align:middle;padding:0 10px}.JoL-controls-container .JoL-multifunction{width:100%;height:100%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;align-items:center;text-align:center;line-height:42px}.JoL-controls-container .JoL-multifunction-multiple{cursor:pointer;padding:0 10px;position:relative}.JoL-controls-container .JoL-multifunction-multiple-container{transition:all .5s;position:absolute;left:50%;top:-12px;right:auto;bottom:auto;transform:translateX(-50%);width:100%;height:70px}.JoL-controls-container .JoL-multifunction-multiple-container:hover .multifunction-multiple-layer{animation:show .3s ease}.JoL-controls-container .JoL-multifunction-multiple-layer{list-style:none;line-height:normal;position:absolute;left:50%;top:auto;right:auto;bottom:65px;transform:translateX(-50%);border-radius:3px;background-color:rgba(0,0,0,.7)}.JoL-controls-container .JoL-multifunction-multiple-layer li{padding:10px 22px;cursor:pointer;font-size:14px;white-space:nowrap;display:flex}.JoL-controls-container .JoL-multifunction-multiple-layer li p{padding:0 3px}.JoL-controls-container .JoL-multifunction-multiple-layer li:hover{background:rgba(255,255,255,.2)}.JoL-controls-container .JoL-multifunction-multiple:hover{z-index:1000000000}.JoL-controls-container .JoL-multifunction-multiple:hover-layer{z-index:1000000000}.JoL-controls-container .JoL-multifunction-volume{padding:0 10px;position:relative;cursor:pointer}.JoL-controls-container .JoL-multifunction-volume:hover{z-index:1000000000}.JoL-controls-container .JoL-multifunction-volume:hover-layer{z-index:1000000000}.JoL-controls-container .JoL-multifunction-volume-container{width:100%;height:70px;position:absolute;left:50%;top:-12px;right:auto;bottom:0;transform:translateX(-50%)}.JoL-controls-container .JoL-multifunction-volume-container:hover .volume-box{animation:show .3s ease}.JoL-controls-container .JoL-multifunction-volume .volume-box{line-height:normal;position:absolute;bottom:65px;width:40px;height:120px;padding-bottom:8px;border-radius:3px;background-color:rgba(0,0,0,.7)}.JoL-controls-container .JoL-multifunction-volume .volume-box .current-volume{width:100%;height:24px;margin:0;line-height:24px;text-align:center}.JoL-controls-container .JoL-multifunction-volume .volume-box .current-volume:hover{cursor:default}.JoL-controls-container .JoL-multifunction-volume .volume-box .current-volume .volume-value{font-size:13px;font-style:normal}.JoL-controls-container .JoL-multifunction-volume .volume-box .volume-slider{width:100%;height:96px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:center}.JoL-controls-container .JoL-multifunction-volume .volume-box .volume-slider .volume-slider-bg{width:2px;height:86px;border-radius:1px;background-color:#fff;position:relative}.JoL-controls-container .JoL-multifunction-volume .volume-box .volume-slider .volume-slider-bg .volume-slider-op{width:100%;height:100%;position:absolute;left:0;top:auto;right:auto;bottom:0;z-index:1;border-radius:1px}.JoL-controls-container .JoL-multifunction-volume .volume-box .volume-slider .volume-slider-bg .volume-slider-op .volume-slider-op-circle{width:10px;height:10px;position:absolute;left:50%;top:calc(-10px / 2);right:auto;bottom:auto;margin-left:calc(-10px / 2);border-radius:50%}.JoL-controls-container .JoL-multifunction-volume .volume-box .volume-slider .volume-slider-bg .volume-slider-mirror{width:32px;height:calc(100% + 5px);position:absolute;left:-15px;top:auto;right:auto;bottom:0;z-index:2}.JoL-controls-container .JoL-multifunction-set{padding:0 10px;position:relative;cursor:pointer}.JoL-controls-container .JoL-multifunction-set-container{width:100%;height:70px;position:absolute;left:50%;top:-12px;right:auto;bottom:0;transition:all .5s;transform:translateX(-50%)}.JoL-controls-container .JoL-multifunction-set:hover{z-index:1000000000}.JoL-controls-container .JoL-multifunction-set:hover .hover-icon-rotateAnimate{animation:rotateAnimate .5s ease}.JoL-controls-container .JoL-multifunction-set:hover .JoL-multifunction-set-layer{animation:show .3s ease}.JoL-controls-container .JoL-multifunction-set-layer{line-height:normal;list-style:none;position:absolute;left:50%;top:auto;right:auto;bottom:65px;transform:translateX(-50%);border-radius:3px;background-color:rgba(0,0,0,.7);padding:8px 0}.JoL-controls-container .JoL-multifunction-set-layer li{padding:7px 22px;cursor:pointer;width:100%;white-space:nowrap}.JoL-controls-container .hover-icon-animate:hover{animation:scaleAnimate .5s ease}',""]),j.exports=H},function(j,H){j.exports=ut},function(j,H,O){var F=O(4),R=O(80);typeof(R=R.__esModule?R.default:R)=="string"&&(R=[[j.i,R,""]]);var A={insert:"head",singleton:!1};F(R,A),j.exports=R.locals||{}},function(j,H,O){(H=O(5)(!1)).push([j.i,"@keyframes show{0%{opacity:0}50%{opacity:.5}100%{opacity:1}}@keyframes scaleAnimate{50%{transform:scale(1.2)}100%{transform:scale(1)}}@keyframes rotateAnimate{0%{transform:rotate(270deg)}100%{transform:rotate(360deg)}}.JoL-player-container .leftTop{position:absolute;left:15px;top:15px;right:auto;bottom:auto}.JoL-player-container .rightTop{position:absolute;left:auto;top:15px;right:15px;bottom:auto}.JoL-player-container .leftBottom{position:absolute;left:15px;top:auto;right:auto;bottom:60px}.JoL-player-container .rightBottom{position:absolute;left:auto;top:auto;right:15px;bottom:60px}.JoL-player-container .center{position:absolute;left:50%;top:50%;right:auto;bottom:auto;transform:translate(-50%, -50%)}.JoL-player-container .jolPlayerToast{background-color:rgba(0,0,0,.7);z-index:10000;font-size:13px;color:#fff;font-weight:normal;padding:8px 10px;border-radius:2px;animation:show .3s ease}",""]),j.exports=H},function(j,H,O){var F=O(28),R=O(40),A=O(32),c=O(11),C=[].sort,y=[1,2,3];F(F.P+F.F*(c(function(){y.sort(void 0)})||!c(function(){y.sort(null)})||!O(82)(C)),"Array",{sort:function(v){return v===void 0?C.call(A(this)):C.call(A(this),R(v))}})},function(j,H,O){var F=O(11);j.exports=function(R,A){return!!R&&F(function(){A?R.call(null,function(){},1):R.call(null)})}},function(j,H,O){var F=O(4),R=O(84);typeof(R=R.__esModule?R.default:R)=="string"&&(R=[[j.i,R,""]]);var A={insert:"head",singleton:!1};F(R,A),j.exports=R.locals||{}},function(j,H,O){(H=O(5)(!1)).push([j.i,"@keyframes show{0%{opacity:0}50%{opacity:.5}100%{opacity:1}}@keyframes scaleAnimate{50%{transform:scale(1.2)}100%{transform:scale(1)}}@keyframes rotateAnimate{0%{transform:rotate(270deg)}100%{transform:rotate(360deg)}}.JoL-player-container .end{position:absolute;left:0;top:0;right:0;bottom:0;z-index:1300;cursor:default;background:rgba(0,0,0,.4)}.JoL-player-container .end .replay{position:absolute;left:50%;top:50%;right:0;bottom:0;transform:translate(-50%, -50%);display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:center;color:#fff;text-align:center;height:100px}.JoL-player-container .end .replay .cicle{width:65px;height:65px;background:rgba(0,0,0,.58);border-radius:50%;cursor:pointer;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:center}.JoL-player-container .end .replay p{width:100%}",""]),j.exports=H},function(j,H,O){var F=O(4),R=O(86);typeof(R=R.__esModule?R.default:R)=="string"&&(R=[[j.i,R,""]]);var A={insert:"head",singleton:!1};F(R,A),j.exports=R.locals||{}},function(j,H,O){(H=O(5)(!1)).push([j.i,"@keyframes show{0%{opacity:0}50%{opacity:.5}100%{opacity:1}}@keyframes scaleAnimate{50%{transform:scale(1.2)}100%{transform:scale(1)}}@keyframes rotateAnimate{0%{transform:rotate(270deg)}100%{transform:rotate(360deg)}}.JoL-player-container .screenshot{width:280px;position:absolute;left:auto;top:auto;right:0;bottom:55px;background:#fff;padding:3px;overflow:hidden}.JoL-player-container .screenshot .img{height:155px;overflow:hidden;position:relative}.JoL-player-container .screenshot .img canvas{position:absolute;left:50%;top:50%;right:auto;bottom:auto;transform:translate(-50%, -50%)}.JoL-player-container .screenshot .close{position:absolute;left:auto;top:-24px;right:-24px;bottom:auto;width:0;height:0;z-index:1;border:26px solid transparent;border-left-color:#fff;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);border-radius:100%}.JoL-player-container .screenshot .close .icon{position:absolute;left:auto;top:-8px;right:5px;bottom:auto;transform:rotate(45deg);cursor:pointer}.JoL-player-container .screenshot .save{padding:10px;text-align:center;font-size:13px}",""]),j.exports=H},function(j,H,O){var F=O(4),R=O(88);typeof(R=R.__esModule?R.default:R)=="string"&&(R=[[j.i,R,""]]);var A={insert:"head",singleton:!1};F(R,A),j.exports=R.locals||{}},function(j,H,O){(H=O(5)(!1)).push([j.i,"@keyframes show{0%{opacity:0}50%{opacity:.5}100%{opacity:1}}@keyframes scaleAnimate{50%{transform:scale(1.2)}100%{transform:scale(1)}}@keyframes rotateAnimate{0%{transform:rotate(270deg)}100%{transform:rotate(360deg)}}.JoL-player-container .tp{top:0}.JoL-player-container .bt{bottom:0}.JoL-player-container .suspendedProgressBoard{transition:all .3s;animation:show .3s ease;width:100%;height:3px;background:rgba(255,255,255,.2);border-radius:2px;position:absolute}.JoL-player-container .suspendedProgressBoard .progressPlayed{width:0%;height:100%;position:absolute;left:0;top:0;right:auto;bottom:auto;z-index:2;border-radius:2px}",""]),j.exports=H},function(j,H,O){var F=O(4),R=O(90);typeof(R=R.__esModule?R.default:R)=="string"&&(R=[[j.i,R,""]]);var A={insert:"head",singleton:!1};F(R,A),j.exports=R.locals||{}},function(j,H,O){(H=O(5)(!1)).push([j.i,"@keyframes show{0%{opacity:0}50%{opacity:.5}100%{opacity:1}}@keyframes scaleAnimate{50%{transform:scale(1.2)}100%{transform:scale(1)}}@keyframes rotateAnimate{0%{transform:rotate(270deg)}100%{transform:rotate(360deg)}}.JoL-controller-container{width:100%;height:100%;position:absolute;left:50%;top:auto;right:auto;bottom:0;transform:translateX(-50%);z-index:3;cursor:pointer}.JoL-controller-container .JoL-click-to-play-or-pause{width:100%;height:calc(100% - 47px);position:absolute;left:0;top:0;right:auto;bottom:auto;z-index:101;outline:none}.JoL-controller-container .play-icon{display:inline-block;font-size:24px;color:#fff;font-weight:normal;width:40px;height:40px;position:absolute;left:auto;top:auto;right:30px;bottom:60px;z-index:100;line-height:40px;text-align:center;border-radius:30%;opacity:.7}.JoL-controller-container .JoL-progress-and-controls-wrap{width:calc(100% - 26px);position:absolute;left:50%;top:auto;right:auto;bottom:0;z-index:102;transform:translateX(-50%)}",""]),j.exports=H},function(j,H,O){var F=O(4),R=O(92);typeof(R=R.__esModule?R.default:R)=="string"&&(R=[[j.i,R,""]]);var A={insert:"head",singleton:!1};F(R,A),j.exports=R.locals||{}},function(j,H,O){(H=O(5)(!1)).push([j.i,'.JoL-player-container html,.JoL-player-container body,.JoL-player-container div,.JoL-player-container span,.JoL-player-container object,.JoL-player-container iframe,.JoL-player-container h1,.JoL-player-container h2,.JoL-player-container h3,.JoL-player-container h4,.JoL-player-container h5,.JoL-player-container h6,.JoL-player-container p,.JoL-player-container blockquote,.JoL-player-container pre,.JoL-player-container abbr,.JoL-player-container address,.JoL-player-container cite,.JoL-player-container code,.JoL-player-container del,.JoL-player-container dfn,.JoL-player-container em,.JoL-player-container img,.JoL-player-container ins,.JoL-player-container kbd,.JoL-player-container q,.JoL-player-container samp,.JoL-player-container small,.JoL-player-container strong,.JoL-player-container sub,.JoL-player-container sup,.JoL-player-container var,.JoL-player-container b,.JoL-player-container i,.JoL-player-container dl,.JoL-player-container dt,.JoL-player-container dd,.JoL-player-container ol,.JoL-player-container ul,.JoL-player-container li,.JoL-player-container fieldset,.JoL-player-container form,.JoL-player-container label,.JoL-player-container legend,.JoL-player-container table,.JoL-player-container caption,.JoL-player-container tbody,.JoL-player-container tfoot,.JoL-player-container thead,.JoL-player-container tr,.JoL-player-container th,.JoL-player-container td,.JoL-player-container article,.JoL-player-container aside,.JoL-player-container canvas,.JoL-player-container details,.JoL-player-container figcaption,.JoL-player-container figure,.JoL-player-container footer,.JoL-player-container header,.JoL-player-container hgroup,.JoL-player-container menu,.JoL-player-container nav,.JoL-player-container section,.JoL-player-container summary,.JoL-player-container time,.JoL-player-container mark,.JoL-player-container audio,.JoL-player-container video{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}.JoL-player-container body{line-height:1}.JoL-player-container :focus{outline:1}.JoL-player-container article,.JoL-player-container aside,.JoL-player-container canvas,.JoL-player-container details,.JoL-player-container figcaption,.JoL-player-container figure,.JoL-player-container footer,.JoL-player-container header,.JoL-player-container hgroup,.JoL-player-container menu,.JoL-player-container nav,.JoL-player-container section,.JoL-player-container summary{display:block}.JoL-player-container nav ul{list-style:none}.JoL-player-container blockquote,.JoL-player-container q{quotes:none}.JoL-player-container blockquote:before,.JoL-player-container blockquote:after,.JoL-player-container q:before,.JoL-player-container q:after{content:"";content:none}.JoL-player-container a{margin:0;padding:0;border:0;font-size:100%;vertical-align:baseline;background:transparent}.JoL-player-container ins{background-color:#ff9;color:#000;text-decoration:none}.JoL-player-container mark{background-color:#ff9;color:#000;font-style:italic;font-weight:bold}.JoL-player-container del{text-decoration:line-through}.JoL-player-container abbr[title],.JoL-player-container dfn[title]{border-bottom:1px dotted #000;cursor:help}.JoL-player-container table{border-collapse:collapse;border-spacing:0}.JoL-player-container hr{display:block;height:1px;border:0;border-top:1px solid #ccc;margin:1em 0;padding:0}.JoL-player-container input,.JoL-player-container select{vertical-align:middle}',""]),j.exports=H},function(j,H,O){var F=O(4),R=O(94);typeof(R=R.__esModule?R.default:R)=="string"&&(R=[[j.i,R,""]]);var A={insert:"head",singleton:!1};F(R,A),j.exports=R.locals||{}},function(j,H,O){(H=O(5)(!1)).push([j.i,"@keyframes show{0%{opacity:0}50%{opacity:.5}100%{opacity:1}}@keyframes scaleAnimate{50%{transform:scale(1.2)}100%{transform:scale(1)}}@keyframes rotateAnimate{0%{transform:rotate(270deg)}100%{transform:rotate(360deg)}}.JoL-player-container{-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;user-select:none;margin:0;box-sizing:border-box;position:relative;z-index:100}.JoL-player-container .JoL-player{width:100%;height:100%;background-color:#000;object-fit:cover;position:absolute;left:0;top:0;right:auto;bottom:auto;z-index:1}.JoL-player-container .JoL-light-off-mask{width:100vw;height:100vh;position:fixed;left:0;top:0;right:auto;bottom:auto;z-index:0;background-color:rgba(0,0,0,.9);display:none}.JoL-player-container .video-no-useful-tip,.JoL-player-container .buffering-animation{width:100%;height:100px;position:fixed;left:0;top:50%;right:auto;bottom:auto;font-size:16px;color:#fff;font-weight:normal;margin-top:-50px;text-align:center;line-height:100px;z-index:99}.JoL-player-container .player-loading{position:absolute;left:50%;top:50%;right:auto;bottom:auto;z-index:30;transform:translate(-50%, -50%)}",""]),j.exports=H},function(j,H,O){var F={"./close.svg":96,"./closeFullScreen.svg":97,"./closeWebFullscreen.svg":98,"./fullScreen.svg":99,"./inPicture.svg":100,"./loading.svg":101,"./mute.svg":102,"./pause.svg":103,"./player.svg":104,"./replay.svg":105,"./screenshot.svg":106,"./screenshots.svg":107,"./set.svg":108,"./volume.svg":109,"./webFullscreen.svg":110};function R(c){var C=A(c);return O(C)}function A(c){if(!O.o(F,c)){var C=new Error("Cannot find module '"+c+"'");throw C.code="MODULE_NOT_FOUND",C}return F[c]}R.keys=function(){return Object.keys(F)},R.resolve=A,j.exports=R,R.id=95},function(j,H,O){O.r(H);var F=O(1),R=O.n(F),A=O(2),c=O.n(A),C=new R.a({id:"icon-close",use:"icon-close-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-close"><defs><style type="text/css"></style></defs><path d="M783.36 195.2L512 466.56 240.64 195.2a32 32 0 0 0-45.44 45.44L466.56 512l-271.36 271.36a32 32 0 0 0 45.44 45.44L512 557.44l271.36 271.36a32 32 0 0 0 45.44-45.44L557.44 512l271.36-271.36a32 32 0 0 0-45.44-45.44z" p-id="6952" /></symbol>'});c.a.add(C),H.default=C},function(j,H,O){O.r(H);var F=O(1),R=O.n(F),A=O(2),c=O.n(A),C=new R.a({id:"icon-closeFullScreen",use:"icon-closeFullScreen-usage",viewBox:"0 0 18 18",content:`<symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-closeFullScreen">
    <title>icon_tcqp</title>
    <g id="icon-closeFullScreen_页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="icon-closeFullScreen_iPhone-8" transform="translate(-253.000000, -61.000000)">
            <g id="icon-closeFullScreen_icon_tcqp" transform="translate(253.000000, 61.000000)">
                <rect id="icon-closeFullScreen_矩形备份" x="0" y="0" width="18" height="18" />
                <g transform="translate(1.000000, 1.000000)" fill="#FFFFFF" fill-rule="nonzero" id="icon-closeFullScreen_形状">
                    <path d="M6.1481867,5.15916634 L6.13112633,0.749707211 C6.12356793,0.409921405 5.84286357,0.205952741 5.50205199,0.198358355 L5.04484113,0.198358355 C4.70507332,0.190799961 4.43523865,0.486621108 4.44274306,0.826082983 L4.461837,3.22409148 L1.43637382,0.247145989 C1.10751169,-0.0823819964 0.575364753,-0.0823819964 0.24648463,0.247145989 C-0.0813697115,0.576727963 -0.0813697115,1.10928881 0.24648463,1.43914073 L3.24419771,4.40644027 L0.946139975,4.41565431 C0.606372165,4.40707014 0.291187132,4.64251411 0.23961009,5.04370287 L0.23961009,5.4770508 C0.248194266,5.81748447 0.528934618,6.09896266 0.868702428,6.10641308 L5.25663813,6.08053458 C5.26315274,6.08116444 5.2675798,6.08361192 5.27333858,6.08361192 L5.5810732,6.09041448 C5.7509751,6.09448161 5.90320475,6.02802173 6.01159572,5.91777716 C6.12180431,5.80830642 6.16243967,5.65539291 6.15792263,5.48446522 L6.1251516,5.17604675 C6.12516959,5.17001803 6.14800674,5.1659329 6.14800674,5.15904037 L6.1481867,5.15916634 Z M12.7278767,11.5673528 L15.0228211,11.5581388 C15.3625889,11.5657151 15.6771081,11.3568875 15.729351,10.9557347 L15.729351,10.5224408 C15.7207488,10.1819172 15.4390007,9.90052895 15.1002587,9.89190878 L10.768543,9.9181472 C10.7617405,9.9181472 10.7576553,9.91542978 10.7511407,9.91542978 L10.44409,9.90787139 C10.2741881,9.90380425 10.1210586,9.97030012 10.0125416,10.0808326 C9.9017032,10.1893496 9.86207562,10.342839 9.8654589,10.5137667 L9.89930971,10.8215013 C9.89990358,10.8290597 9.87710242,10.8333967 9.87710242,10.8392455 L9.89484665,15.1807871 C9.90343083,15.5202489 10.1841892,15.7235877 10.523939,15.7310381 L10.9561532,15.731704 C11.2949672,15.7394963 11.5657556,15.4427754 11.5572794,15.1028996 L11.5381675,12.7564142 L14.5636307,15.7528135 C14.8925288,16.0823955 15.4240099,16.0823955 15.752908,15.7528135 C16.0814282,15.4233035 16.0814282,14.8906887 15.752908,14.5611427 L12.7278407,11.5671908 L12.7278767,11.5673528 Z M6.01136177,10.0809406 C5.90288082,9.97044409 5.74967937,9.90396622 5.58083925,9.90799736 L5.27303265,9.91555575 C5.26680597,9.91555575 5.26284681,9.91827318 5.25597227,9.91827318 L0.868324508,9.89203475 C0.528538702,9.90063692 0.247402435,10.1819891 0.239250167,10.5225128 L0.239250167,10.9558247 C0.290413296,11.3569955 0.605598329,11.5657511 0.944808258,11.5582287 L3.26915841,11.5657871 L0.24610671,14.559811 C-0.08203557,14.8883312 -0.08203557,15.4219358 0.24610671,15.7514818 C0.574644906,16.0810638 1.10713377,16.0810638 1.43568996,15.7514818 L4.46151307,12.7745903 L4.44209519,15.1354187 C4.4345368,15.4759423 4.70446145,15.7727173 5.04359939,15.7641691 L5.50081025,15.7641691 C5.84160384,15.7555849 6.12239818,15.5533799 6.12988459,15.2128203 L6.14764682,10.8388496 C6.14764682,10.8326229 6.12484566,10.8285738 6.12484566,10.8217712 L6.1576167,10.5139646 C6.16132391,10.3430909 6.12175032,10.1895835 6.01155973,10.0811026 L6.01136177,10.0809406 Z M10.0144672,5.918497 C10.1229842,6.02868759 10.2761496,6.09520146 10.4457456,6.09041448 L10.7527604,6.08361192 C10.7595629,6.08361192 10.763702,6.08123643 10.7705046,6.08019265 L15.1649909,6.10641308 C15.5047587,6.09860274 15.7855351,5.81707055 15.7940653,5.47665488 L15.795109,5.04334295 C15.7429561,4.64147033 15.4272852,4.40708813 15.0885791,4.41457454 L12.7567606,4.40537849 L15.752818,1.43793498 C16.082328,1.10977471 16.082328,0.577177868 15.7537898,0.24761389 C15.4248917,-0.0819140958 14.8934106,-0.0819140958 14.5645305,0.24761389 L11.5390673,3.24302346 L11.5584852,0.82656888 C11.5666554,0.487107005 11.295777,0.190314064 10.956981,0.197800474 L10.5247668,0.197800474 C10.184981,0.20638465 9.90418667,0.409669458 9.89567448,0.749149329 L9.87827218,5.15956225 C9.87827218,5.16636481 9.90078539,5.17050393 9.90078539,5.17662263 L9.8673305,5.4850411 C9.86387523,5.65598678 9.90344883,5.80881031 10.0144133,5.91835303 L10.0144672,5.918497 Z" />
                </g>
            </g>
        </g>
    </g>
</symbol>`});c.a.add(C),H.default=C},function(j,H,O){O.r(H);var F=O(1),R=O.n(F),A=O(2),c=O.n(A),C=new R.a({id:"icon-closeWebFullscreen",use:"icon-closeWebFullscreen-usage",viewBox:"0 0 18 18",content:`<symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-closeWebFullscreen">
    <title>icon_tcqp</title>
    <g id="icon-closeWebFullscreen_页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="icon-closeWebFullscreen_iPhone-8" transform="translate(-78.000000, -21.000000)">
            <g id="icon-closeWebFullscreen_icon_tcqp" transform="translate(78.000000, 21.000000)">
                <rect id="icon-closeWebFullscreen_矩形备份-10" x="0" y="0" width="18" height="18" />
                <g id="icon-closeWebFullscreen_icon_wyqp" transform="translate(1.000000, 1.000000)" fill="#FFFFFF">
                    <path d="M0,14.3998594 L0,1.59990625 C0,0.71621875 0.71640625,0 1.60007812,0 L14.4000312,0 C15.2837187,0 15.9999375,0.71621875 15.9999375,1.59990625 L15.9999375,14.3998906 C15.9999375,15.2835781 15.2837187,16 14.4000312,16 L1.60007812,16 C0.716421875,16 0,15.2835469 0,14.3998594 Z M13.967076,1.66 L2.03308428,1.66 C1.76927393,1.66 1.66,1.76925936 1.66,2.0328949 L1.66,13.9669157 C1.66,14.2307406 1.76927393,14.34 2.03308428,14.34 L14.34,14.34 L14.34,2.0328949 C14.34,1.76924479 14.2307552,1.66 13.967076,1.66 Z" id="icon-closeWebFullscreen_形状" fill-rule="nonzero" />
                    <path d="M6.2,9 C6.28000001,9 6.44,9 6.52000001,9.08000001 C6.60000001,9.08000001 6.68000002,9.15999999 6.76000001,9.24 C6.84,9.32000001 6.92,9.39999999 6.92,9.48 C7.00000001,9.56000001 7.00000001,9.72 7.00000001,9.80000001 L7.00000001,9.80000001 L7.00000001,12.4 C7.00000001,12.88 6.68,13.2 6.2,13.2 C5.72,13.2 5.4,12.88 5.4,12.4 L5.4,12.4 L5.4,10.6 L3.60000001,10.6 C3.12000001,10.6 2.8,10.28 2.8,9.80000001 C2.8,9.32000001 3.12000001,9 3.60000001,9 L3.60000001,9 Z M12.4,9 C12.88,9 13.2,9.32000001 13.2,9.80000001 C13.2,10.28 12.88,10.6 12.4,10.6 L10.6,10.6 L10.6,12.4 C10.6,12.88 10.28,13.2 9.80000001,13.2 C9.32000001,13.2 9,12.88 9,12.4 L9,9.80000001 C9,9.72 9,9.56000001 9.08000001,9.48 C9.08000001,9.39999999 9.16000001,9.32000001 9.24,9.24 C9.31999999,9.15999999 9.39999999,9.08000001 9.48,9.08000001 C9.56000001,9 9.72,9 9.80000001,9 L12.4,9 Z M6.2,2.8 C6.68,2.8 7.00000001,3.12000001 7.00000001,3.60000001 L7.00000001,6.2 C7.00000001,6.28000001 7.00000001,6.44 6.92,6.52000001 C6.92,6.60000002 6.84,6.68 6.76000001,6.76000001 C6.68000002,6.84000001 6.60000001,6.92 6.52000001,6.92 C6.44,7.00000001 6.28000001,7.00000001 6.2,7.00000001 L3.60000001,7.00000001 C3.12000001,7.00000001 2.8,6.68 2.8,6.2 C2.8,5.72 3.12000001,5.4 3.60000001,5.4 L5.4,5.4 L5.4,3.60000001 C5.4,3.12000001 5.72,2.8 6.2,2.8 Z M9.80000001,2.8 C10.28,2.8 10.6,3.12000001 10.6,3.60000001 L10.6,3.60000001 L10.6,5.4 L12.4,5.4 C12.88,5.4 13.2,5.72 13.2,6.2 C13.2,6.68 12.88,7.00000001 12.4,7.00000001 L12.4,7.00000001 L9.80000001,7.00000001 C9.72,7.00000001 9.56000001,7.00000001 9.48,6.92 C9.39999999,6.92 9.31999999,6.84000001 9.24,6.76000001 C9.16000001,6.68 9.08000001,6.60000002 9.08000001,6.52000001 C9,6.44 9,6.28000001 9,6.2 L9,6.2 L9,3.60000001 C9,3.12000001 9.32000001,2.8 9.80000001,2.8 Z" id="icon-closeWebFullscreen_形状结合" />
                </g>
            </g>
        </g>
    </g>
</symbol>`});c.a.add(C),H.default=C},function(j,H,O){O.r(H);var F=O(1),R=O.n(F),A=O(2),c=O.n(A),C=new R.a({id:"icon-fullScreen",use:"icon-fullScreen-usage",viewBox:"0 0 18 18",content:`<symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-fullScreen">
    <title>icon_qp</title>
    <g id="icon-fullScreen_页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="icon-fullScreen_iPhone-8" transform="translate(-218.000000, -61.000000)">
            <g id="icon-fullScreen_icon_qp" transform="translate(218.000000, 61.000000)">
                <rect id="icon-fullScreen_矩形" x="0" y="0" width="18" height="18" />
                <g transform="translate(1.000000, 1.000000)" fill="#FFFFFF" fill-rule="nonzero" id="icon-fullScreen_形状">
                    <path d="M15.2,16 L11.6,16 C11.12,16 10.8,15.68 10.8,15.2 C10.8,14.72 11.12,14.4 11.6,14.4 L13.28,14.4 L10.16,11.28 C9.83999999,10.96 9.83999999,10.48 10.16,10.16 C10.48,9.84000001 10.96,9.83999999 11.28,10.16 L14.4,13.28 L14.4,11.6 C14.4,11.12 14.72,10.8 15.2,10.8 C15.68,10.8 16,11.12 16,11.6 L16,15.2 C16,15.28 16,15.44 15.92,15.52 C15.92,15.6 15.84,15.68 15.76,15.76 C15.68,15.84 15.6,15.92 15.52,15.92 C15.44,16 15.28,16 15.2,16 Z M4.4,16 L0.800000006,16 C0.719999999,16 0.560000006,16 0.48,15.92 C0.399999993,15.92 0.320000006,15.84 0.24,15.76 C0.159999994,15.68 0.0800000062,15.6 0.0800000062,15.52 C0,15.44 0,15.28 0,15.2 L0,11.6 C0,11.12 0.320000006,10.8 0.800000006,10.8 C1.28000001,10.8 1.60000001,11.12 1.60000001,11.6 L1.60000001,13.28 L4.72000001,10.16 C5.04000001,9.83999999 5.52000001,9.83999999 5.84,10.16 C6.15999999,10.48 6.16000001,10.96 5.84,11.28 L2.72,14.4 L4.4,14.4 C4.88,14.4 5.20000001,14.72 5.20000001,15.2 C5.20000001,15.68 4.88,16 4.4,16 Z M10.72,6.08 C10.48,6.08 10.32,6 10.16,5.84 C9.83999999,5.52 9.83999999,5.04 10.16,4.72000001 L13.28,1.60000001 L11.6,1.60000001 C11.12,1.60000001 10.8,1.28000001 10.8,0.800000006 C10.8,0.320000006 11.12,-4.4408921e-16 11.6,-4.4408921e-16 L15.2,-4.4408921e-16 C15.28,-4.4408921e-16 15.44,-4.4408921e-16 15.52,0.0800000062 C15.6,0.0800000062 15.68,0.160000012 15.76,0.24 C15.84,0.319999987 15.92,0.399999993 15.92,0.48 C16,0.560000006 16,0.719999999 16,0.800000006 L16,4.4 C16,4.88 15.68,5.20000001 15.2,5.20000001 C14.72,5.20000001 14.4,4.88 14.4,4.4 L14.4,2.72 L11.28,5.84 C11.12,6 10.88,6.08 10.72,6.08 L10.72,6.08 Z M5.28,6.08 C5.04,6.08 4.88,6 4.72000001,5.84 L1.60000001,2.72 L1.60000001,4.4 C1.60000001,4.88 1.28000001,5.20000001 0.800000006,5.20000001 C0.320000006,5.20000001 0,4.88 0,4.4 L0,0.800000006 C0,0.719999999 0,0.560000006 0.0800000062,0.48 C0.0800000062,0.399999993 0.160000012,0.320000006 0.24,0.24 C0.319999987,0.159999994 0.399999993,0.0800000062 0.48,0.0800000062 C0.560000006,-4.4408921e-16 0.719999999,-4.4408921e-16 0.800000006,-4.4408921e-16 L4.4,-4.4408921e-16 C4.88,-4.4408921e-16 5.20000001,0.320000006 5.20000001,0.800000006 C5.20000001,1.28000001 4.88,1.60000001 4.4,1.60000001 L2.72,1.60000001 L5.84,4.72000001 C6.16000001,5.04000001 6.16000001,5.52000001 5.84,5.84 C5.68000001,6 5.52,6.08 5.28,6.08 L5.28,6.08 Z" />
                </g>
            </g>
        </g>
    </g>
</symbol>`});c.a.add(C),H.default=C},function(j,H,O){O.r(H);var F=O(1),R=O.n(F),A=O(2),c=O.n(A),C=new R.a({id:"icon-inPicture",use:"icon-inPicture-usage",viewBox:"0 0 18 18",content:`<symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-inPicture">
    <title>icon_hzh</title>
    <g id="icon-inPicture_页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="icon-inPicture_iPhone-8" transform="translate(-288.000000, -61.000000)">
            <g id="icon-inPicture_icon_yhzh" transform="translate(288.000000, 61.000000)">
                <rect id="icon-inPicture_矩形备份-6" x="0" y="0" width="18" height="18" />
                <g transform="translate(0.000000, 1.500000)" fill="#FFFFFF">
                    <path d="M14,0 C15.1045695,-2.02906125e-16 16,0.8954305 16,2 L16,7.659 L14.34,7.659 L14.34,2.66 C14.34,2.14716416 13.9539598,1.72449284 13.4566211,1.66672773 L13.34,1.66 L2.66,1.66 C2.10771525,1.66 1.66,2.10771525 1.66,2.66 L1.66,2.66 L1.66,10.34 C1.66,10.8922847 2.10771525,11.34 2.66,11.34 L2.66,11.34 L7.659,11.34 L7.659,13 L2,13 C0.8954305,13 1.3527075e-16,12.1045695 0,11 L0,2 C-1.3527075e-16,0.8954305 0.8954305,2.02906125e-16 2,0 L14,0 Z" id="icon-inPicture_形状结合" />
                    <rect id="icon-inPicture_矩形" x="8.87" y="8.87" width="9.13" height="6.13" rx="1.5" />
                </g>
            </g>
        </g>
    </g>
</symbol>`});c.a.add(C),H.default=C},function(j,H,O){O.r(H);var F=O(1),R=O.n(F),A=O(2),c=O.n(A),C=new R.a({id:"icon-loading",use:"icon-loading-usage",viewBox:"0 0 100 100",content:`<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" id="icon-loading">\r
 <path d="M31.6,3.5C5.9,13.6-6.6,42.7,3.5,68.4c10.1,25.7,39.2,38.3,64.9,28.1l-3.1-7.9c-21.3,8.4-45.4-2-53.8-23.3\r
  c-8.4-21.3,2-45.4,23.3-53.8L31.6,3.5z">\r
      <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="2s" from="0 50 50" to="360 50 50" repeatCount="indefinite" />\r
  </path>\r
 <path d="M42.3,39.6c5.7-4.3,13.9-3.1,18.1,2.7c4.3,5.7,3.1,13.9-2.7,18.1l4.1,5.5c8.8-6.5,10.6-19,4.1-27.7\r
  c-6.5-8.8-19-10.6-27.7-4.1L42.3,39.6z">\r
      <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="0 50 50" to="-360 50 50" repeatCount="indefinite" />\r
  </path>\r
 <path d="M82,35.7C74.1,18,53.4,10.1,35.7,18S10.1,46.6,18,64.3l7.6-3.4c-6-13.5,0-29.3,13.5-35.3s29.3,0,35.3,13.5\r
  L82,35.7z">\r
      <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="2s" from="0 50 50" to="360 50 50" repeatCount="indefinite" />\r
  </path>\r
</symbol>`});c.a.add(C),H.default=C},function(j,H,O){O.r(H);var F=O(1),R=O.n(F),A=O(2),c=O.n(A),C=new R.a({id:"icon-mute",use:"icon-mute-usage",viewBox:"0 0 18 18",content:`<symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-mute">
    <title>icon_gbyl</title>
    <g id="icon-mute_页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="icon-mute_iPhone-8" transform="translate(-148.000000, -61.000000)">
            <g id="icon-mute_icon_gbyl" transform="translate(148.000000, 61.000000)">
                <rect id="icon-mute_矩形备份-4" x="0" y="0" width="18" height="18" />
                <g transform="translate(1.000000, 1.000000)" fill="#FFFFFF" fill-rule="nonzero">
                    <path d="M1.882,4.284 L3.482,5.884 L1.6001084,5.88493423 L1.6001084,10.117221 L3.99307054,10.117221 L9.07981515,14.1814963 L9.079,11.481 L10.68,13.082 L10.6807236,14.575923 C10.6807236,15.1087591 10.391104,15.5927919 9.92467239,15.8392086 C9.46072422,16.0846014 8.89795239,16.0468149 8.4709739,15.741602 L8.47017385,15.7424021 L3.43223254,11.7181294 L1.40329508,11.7181294 C0.629642666,11.7181294 0,11.0780861 0,10.2940329 L0,5.70812225 C0,4.92246902 0.629642651,4.28402578 1.40329508,4.28402576 L1.882,4.284 Z M13.6873273,3.4535695 C16.3950119,6.33895693 16.7255697,9.3563042 14.6790005,12.2744527 L13.5283797,11.1240388 C14.9637376,8.91769099 14.6278938,6.79375844 12.5208483,4.54884371 C12.3162543,4.34126159 12.2400166,4.03972533 12.321746,3.76055187 C12.4034753,3.48137841 12.630292,3.26856277 12.9141001,3.20476276 C13.1979083,3.14096275 13.4939825,3.23623264 13.6873273,3.4535695 Z M9.92467239,0.161346456 C10.391104,0.406963098 10.6807236,0.891795943 10.6807236,1.42463204 L10.68,8.277 L9.079,6.676 L9.07981515,1.82465915 L6.397,3.994 L5.258,2.855 L8.4709739,0.258953072 C8.89768882,-0.0469951052 9.46088713,-0.0848102934 9.92467239,0.161346456 Z" id="icon-mute_形状结合" />
                    <path d="M2.1728,1.0356 L14.9648,13.8276 C15.27499,14.1422606 15.2731354,14.6482675 14.9606472,14.9606458 C14.6481589,15.2730241 14.1421514,15.2747007 13.8276,14.9644 L1.0356,2.1724 C0.73932756,1.8557529 0.747545194,1.36120328 1.05417424,1.05457424 C1.36080328,0.747945194 1.8553529,0.73972756 2.172,1.036 L2.1728,1.0356 Z" id="icon-mute_路径备份" />
                </g>
            </g>
        </g>
    </g>
</symbol>`});c.a.add(C),H.default=C},function(j,H,O){O.r(H);var F=O(1),R=O.n(F),A=O(2),c=O.n(A),C=new R.a({id:"icon-pause",use:"icon-pause-usage",viewBox:"0 0 18 18",content:`<symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-pause">
    <title>icon_bf</title>
    <g id="icon-pause_页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="icon-pause_iPhone-8" transform="translate(-113.000000, -109.000000)">
            <g id="icon-pause_icon_bf" transform="translate(113.000000, 109.000000)">
                <rect id="icon-pause_矩形备份-10" x="0" y="0" width="18" height="18" />
                <g transform="translate(3.000000, 1.000000)" fill="#FFFFFF" fill-rule="nonzero" id="icon-pause_形状">
                    <path d="M9.73026169,0 C8.81413554,0 8.01252516,0.799821069 8.01252516,1.71415791 L8.01252516,14.2858421 C8.01252516,15.2001789 8.81413554,16 9.73026169,16 C10.6463878,16 11.4479982,15.2001789 11.4479982,14.2858421 L11.4479982,1.71415791 C11.4479982,0.799821069 10.6463878,0 9.73026169,0 Z M1.71773652,0 C0.801610378,0 -6.50946778e-16,0.799821069 -6.50946778e-16,1.71415791 L-6.50946778e-16,14.2858421 C-6.50946778e-16,15.2001789 0.801610378,16 1.71773652,16 C2.63386267,16 3.43547305,15.2001789 3.43547305,14.2858421 L3.43547305,1.71415791 C3.43368374,0.799821069 2.63207336,0 1.71773652,0 Z" />
                </g>
            </g>
        </g>
    </g>
</symbol>`});c.a.add(C),H.default=C},function(j,H,O){O.r(H);var F=O(1),R=O.n(F),A=O(2),c=O.n(A),C=new R.a({id:"icon-player",use:"icon-player-usage",viewBox:"0 0 18 18",content:`<symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-player">
    <title>icon_zt</title>
    <g id="icon-player_页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="icon-player_iPhone-8" transform="translate(-78.000000, -109.000000)">
            <g id="icon-player_icon_zt" transform="translate(78.000000, 109.000000)">
                <rect id="icon-player_矩形备份-10" x="0" y="0" width="18" height="18" />
                <g transform="translate(3.000000, 1.000000)" fill="#FFFFFF" fill-rule="nonzero" id="icon-player_路径">
                    <path d="M0.992369212,15.8990308 C0.481836467,15.7736376 0.0929717158,15.3594445 6.48386882e-16,14.8420245 L6.48386882e-16,1.15417331 C0.0879382032,0.631910584 0.478007891,0.211950496 0.992369212,0.0857604795 C1.54075549,-0.0899263394 2.14010986,0.00761010376 2.6044939,0.348110961 L11.729728,7.19203656 C12.0075567,7.3666885 12.176164,7.67183527 12.176164,8 C12.176164,8.32816473 12.0075567,8.6333115 11.729728,8.80796344 L2.6044939,15.651889 C2.14010986,15.9923899 1.54075549,16.0899263 0.992369212,15.9142395 L0.992369212,15.8990308 Z" />
                </g>
            </g>
        </g>
    </g>
</symbol>`});c.a.add(C),H.default=C},function(j,H,O){O.r(H);var F=O(1),R=O.n(F),A=O(2),c=O.n(A),C=new R.a({id:"icon-replay",use:"icon-replay-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-replay"><defs><style type="text/css"></style></defs><path d="M874.144 262.56C735.232 79.104 471.264 41.6 285.76 178.912c-60.16 44.544-106.784 104.352-135.584 172.224l-21.696-73.92c-4.992-16.96-22.752-26.752-39.712-21.696C71.808 260.512 62.08 278.304 67.072 295.264l47.456 161.76C118.624 470.944 131.36 480 145.216 480c2.976 0 22.72-5.76 25.824-6.912l161.248-59.264c16.576-6.08 25.088-24.48 18.976-41.088-6.08-16.576-24.384-25.056-41.088-18.976l-107.968 39.68c23.424-64.576 65.568-121.632 121.6-163.104 157.376-116.576 381.376-84.768 499.296 70.848 56.832 75.008 80.8 167.456 67.488 260.256-13.376 93.28-62.784 175.712-139.072 232.192-157.536 116.512-381.568 84.736-499.392-70.72-10.688-14.112-30.72-16.864-44.832-6.176-14.08 10.656-16.832 30.752-6.176 44.8 82.464 108.832 208.992 166.24 337.024 166.24 87.68 0 176.032-26.912 251.456-82.72 90.144-66.72 148.512-164.224 164.352-274.528C969.792 460.704 941.44 351.328 874.144 262.56z" p-id="1472" /></symbol>'});c.a.add(C),H.default=C},function(j,H,O){O.r(H);var F=O(1),R=O.n(F),A=O(2),c=O.n(A),C=new R.a({id:"icon-screenshot",use:"icon-screenshot-usage",viewBox:"0 0 1024 1024",content:`<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-screenshot"><defs><style type="text/css">@font-face { font-family: feedback-iconfont; src: url("//at.alicdn.com/t/font_1031158_1uhr8ri0pk5.eot?#iefix") format("embedded-opentype"), url("//at.alicdn.com/t/font_1031158_1uhr8ri0pk5.woff2") format("woff2"), url("//at.alicdn.com/t/font_1031158_1uhr8ri0pk5.woff") format("woff"), url("//at.alicdn.com/t/font_1031158_1uhr8ri0pk5.ttf") format("truetype"), url("//at.alicdn.com/t/font_1031158_1uhr8ri0pk5.svg#iconfont") format("svg"); }
</style></defs><path d="M512 384c55.6 0 107.8 21.6 147.1 60.9S720 536.4 720 592s-21.6 107.8-60.9 147.1S567.6 800 512 800s-107.8-21.6-147.1-60.9S304 647.6 304 592s21.6-107.8 60.9-147.1S456.4 384 512 384z m0-64c-150.2 0-272 121.8-272 272s121.8 272 272 272 272-121.8 272-272-121.8-272-272-272z" p-id="3304" /><path d="M650.9 128l4.4 23.6C666.7 212.1 719.6 256 781.1 256H896c35.3 0 64 28.7 64 64v512c0 35.3-28.7 64-64 64H128c-35.3 0-64-28.7-64-64V320c0-35.3 28.7-64 64-64h114.9c61.6 0 114.5-43.9 125.8-104.4l4.4-23.6h277.8z m39.8-64H333.3c-7.7 0-14.3 5.5-15.7 13.1l-11.8 62.7c-5.7 30.3-32.1 52.2-62.9 52.2H128C57.3 192 0 249.3 0 320v512c0 70.7 57.3 128 128 128h768c70.7 0 128-57.3 128-128V320c0-70.7-57.3-128-128-128H781.1c-30.8 0-57.2-21.9-62.9-52.2l-11.8-62.7c-1.4-7.6-8-13.1-15.7-13.1z" p-id="3305" /><path d="M224 352h-64c-17.7 0-32-14.3-32-32s14.3-32 32-32h64c17.7 0 32 14.3 32 32s-14.3 32-32 32zM512 560c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32z m0-64c-53 0-96 43-96 96s43 96 96 96 96-43 96-96-43-96-96-96z" p-id="3306" /></symbol>`});c.a.add(C),H.default=C},function(j,H,O){O.r(H);var F=O(1),R=O.n(F),A=O(2),c=O.n(A),C=new R.a({id:"icon-screenshots",use:"icon-screenshots-usage",viewBox:"0 0 18 18",content:`<symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-screenshots">
    <title>icon_xj</title>
    <g id="icon-screenshots_页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="icon-screenshots_iPhone-8" transform="translate(-148.000000, -109.000000)">
            <g id="icon-screenshots_icon_xj" transform="translate(148.000000, 110.000000)">
                <path d="M11.0584816,0.83 C11.3102833,0.83 11.5479599,0.910563303 11.7425926,1.05084664 C11.9372253,1.19112998 12.0888143,1.39113336 12.168441,1.63001351 L12.168441,1.63001351 L12.7630014,3.41369464 L15.9529961,3.8309214 C16.2946546,3.81754316 16.6053644,3.95073452 16.8273149,4.17268507 C17.0390433,4.38441342 17.17,4.67691342 17.17,5 L17.17,5 L17.17,13 C17.17,13.3230866 17.0390433,13.6155866 16.8273149,13.8273149 C16.6155866,14.0390433 16.3230866,14.17 16,14.17 L16,14.17 L2,14.17 C1.67691342,14.17 1.38441342,14.0390433 1.17268507,13.8273149 C0.960956711,13.6155866 0.83,13.3230866 0.83,13 L0.83,13 L0.83,5 C0.83,4.67691342 0.960956711,4.38441342 1.17268507,4.17268507 C1.38441342,3.96095671 1.67691342,3.83 2,3.83 L2,3.83 L4.62862034,3.83 L5.81227593,1.69379445 C5.88490856,1.42670035 6.04569254,1.20344209 6.25740741,1.05084664 C6.45204015,0.910563303 6.68971665,0.83 6.94151844,0.83 L6.94151844,0.83 Z" id="icon-screenshots_路径-2" stroke="#FFFFFF" stroke-width="1.66" />
                <circle id="icon-screenshots_椭圆形" stroke="#FFFFFF" stroke-width="1.66" cx="9" cy="8" r="2.17" />
                <circle id="icon-screenshots_椭圆形备份" fill="#FFFFFF" cx="14" cy="6" r="1" />
            </g>
        </g>
    </g>
</symbol>`});c.a.add(C),H.default=C},function(j,H,O){O.r(H);var F=O(1),R=O.n(F),A=O(2),c=O.n(A),C=new R.a({id:"icon-set",use:"icon-set-usage",viewBox:"0 0 18 18",content:`<symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-set">
    <title>icon_sz</title>
    <g id="icon-set_页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="icon-set_iPhone-8" transform="translate(-183.000000, -61.000000)">
            <g id="icon-set_icon_sz" transform="translate(183.000000, 61.000000)">
                <rect id="icon-set_矩形备份-3" x="0" y="0" width="18" height="18" />
                <g transform="translate(1.000000, 1.000000)" fill="#FFFFFF" fill-rule="nonzero" id="icon-set_形状">
                    <path d="M16,8.67446429 L16,7.32553571 C16,7.05316061 15.8077928,6.81863218 15.5407143,6.76517857 L13.7980357,6.41660714 C13.6014036,6.37680161 13.4398445,6.23718097 13.3719643,6.04839286 C13.3144643,5.88958333 13.25,5.73410714 13.1785714,5.58196429 C13.0929015,5.40035722 13.1083407,5.18718828 13.2192857,5.01982143 L14.2051786,3.54107143 C14.3562861,3.31441428 14.3263893,3.01260596 14.13375,2.82 L13.18,1.86625 C12.987394,1.67361075 12.6855857,1.64371394 12.4589286,1.79482143 L10.9801786,2.78071429 C10.8128117,2.8916593 10.5996428,2.90709848 10.4180357,2.82142857 C10.2660119,2.75 10.1104762,2.68559524 9.95142857,2.62821429 C9.76264046,2.56033408 9.62301981,2.39877498 9.58321429,2.20214286 L9.23464286,0.459285714 C9.18120242,0.192273064 8.94677226,0 8.67446429,0 L7.32553571,0 C7.05316061,0 6.81863218,0.192207246 6.76517857,0.459285714 L6.41660714,2.20196429 C6.37680161,2.39859641 6.23718097,2.56015551 6.04839286,2.62803571 C5.88958333,2.68553571 5.73410714,2.75 5.58196429,2.82142857 C5.40035722,2.90709848 5.18718828,2.8916593 5.01982143,2.78071429 L3.54107143,1.79482143 C3.31441428,1.64371394 3.01260596,1.67361075 2.82,1.86625 L1.86625,2.82 C1.67361075,3.01260596 1.64371394,3.31441428 1.79482143,3.54107143 L2.78071429,5.01982143 C2.8916593,5.18718828 2.90709848,5.40035722 2.82142857,5.58196429 C2.75,5.7339881 2.68559524,5.88952381 2.62821429,6.04857143 C2.56033408,6.23735954 2.39877498,6.37698019 2.20214286,6.41678571 L0.459285714,6.76535714 C0.192273064,6.81879758 0,7.05322774 0,7.32553571 L0,8.67428571 C0,8.94666082 0.192207246,9.18118924 0.459285714,9.23464286 L2.20196429,9.58321429 C2.39859641,9.62301981 2.56015551,9.76264046 2.62803571,9.95142857 C2.68553571,10.1103571 2.75,10.2658929 2.82142857,10.4180357 C2.90709848,10.5996428 2.8916593,10.8128117 2.78071429,10.9801786 L1.79482143,12.4589286 C1.64371394,12.6855857 1.67361075,12.987394 1.86625,13.18 L2.82,14.13375 C3.01260596,14.3263893 3.31441428,14.3562861 3.54107143,14.2051786 L5.01982143,13.2192857 C5.18718828,13.1083407 5.40035722,13.0929015 5.58196429,13.1785714 C5.7339881,13.25 5.88952381,13.3144048 6.04857143,13.3717857 C6.23735954,13.4396659 6.37698019,13.601225 6.41678571,13.7978571 L6.76535714,15.5405357 C6.81872326,15.8076194 7.05317271,16 7.32553571,16 L8.67428571,16 C8.94666082,16 9.18118924,15.8077928 9.23464286,15.5407143 L9.58321429,13.7980357 C9.62301981,13.6014036 9.76264046,13.4398445 9.95142857,13.3719643 C10.1103571,13.3144643 10.2658929,13.25 10.4180357,13.1785714 C10.5996428,13.0929015 10.8128117,13.1083407 10.9801786,13.2192857 L12.4589286,14.2051786 C12.6855857,14.3562861 12.987394,14.3263893 13.18,14.13375 L14.13375,13.18 C14.3263893,12.987394 14.3562861,12.6855857 14.2051786,12.4589286 L13.2192857,10.9801786 C13.1083407,10.8128117 13.0929015,10.5996428 13.1785714,10.4180357 C13.25,10.2660119 13.3144048,10.1104762 13.3717857,9.95142857 C13.4396659,9.76264046 13.601225,9.62301981 13.7978571,9.58321429 L15.5405357,9.23464286 C15.8076194,9.18127674 16,8.94682729 16,8.67446429 Z M10.4242857,10.4244643 C9.26765335,11.5810199 7.45510983,11.759488 6.09512057,10.8507258 C4.73513131,9.9419637 4.20646608,8.19907015 4.83243138,6.68791601 C5.45839669,5.17676186 7.06465532,4.31821771 8.6688959,4.63732834 C10.2731365,4.95643897 11.4285838,6.36432906 11.4285838,8 C11.4310195,8.90979114 11.0693876,9.78274895 10.4242857,10.4242857 L10.4242857,10.4244643 Z" />
                </g>
            </g>
        </g>
    </g>
</symbol>`});c.a.add(C),H.default=C},function(j,H,O){O.r(H);var F=O(1),R=O.n(F),A=O(2),c=O.n(A),C=new R.a({id:"icon-volume",use:"icon-volume-usage",viewBox:"0 0 18 18",content:`<symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-volume">
    <title>icon_yl</title>
    <g id="icon-volume_页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="icon-volume_iPhone-8" transform="translate(-113.000000, -61.000000)">
            <g id="icon-volume_icon_yl" transform="translate(113.000000, 61.000000)">
                <rect id="icon-volume_矩形备份-5" x="0" y="0" width="18" height="18" />
                <g transform="translate(1.000000, 1.000000)" fill="#FFFFFF" fill-rule="nonzero" id="icon-volume_形状">
                    <path d="M9.07981515,1.82465915 L4.78032386,5.30169472 L4.65871562,5.38970067 L3.91466522,5.88493423 L1.6001084,5.88493423 L1.6001084,10.117221 L3.99307054,10.117221 L9.07981515,14.1814963 L9.07981515,1.82465915 Z M8.47017385,15.7424021 L3.43223254,11.7181294 L1.40329508,11.7181294 C0.629642666,11.7181294 0,11.0780861 0,10.2940329 L0,5.70812225 C0,4.92246902 0.629642651,4.28402578 1.40329508,4.28402576 L3.43223254,4.28402576 L3.77465573,4.05601031 L8.4709739,0.258953072 C8.89768882,-0.0469951052 9.46088713,-0.0848102934 9.92467239,0.161346456 C10.391104,0.406963098 10.6807236,0.891795943 10.6807236,1.42463204 L10.6807236,14.575923 C10.6807236,15.1087591 10.391104,15.5927919 9.92467239,15.8392086 C9.46072422,16.0846014 8.89795239,16.0468149 8.4709739,15.741602 L8.47017385,15.7424021 Z M12.5208483,4.54804364 C12.3162543,4.34126159 12.2400166,4.03972533 12.321746,3.76055187 C12.4034753,3.48137841 12.630292,3.26856277 12.9141001,3.20476276 C13.1979083,3.14096275 13.4939825,3.23623264 13.6873273,3.4535695 C16.7715362,6.74019217 16.7715362,10.1980264 13.6873273,13.4854492 C13.3846547,13.8075634 12.8781649,13.8233241 12.5560507,13.5206515 C12.2339364,13.217979 12.2181757,12.7114892 12.5208483,12.3893749 C15.0274181,9.71879396 15.0274181,7.21942463 12.5208483,4.54884371 L12.5208483,4.54804364 Z" />
                </g>
            </g>
        </g>
    </g>
</symbol>`});c.a.add(C),H.default=C},function(j,H,O){O.r(H);var F=O(1),R=O.n(F),A=O(2),c=O.n(A),C=new R.a({id:"icon-webFullscreen",use:"icon-webFullscreen-usage",viewBox:"0 0 18 18",content:`<symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-webFullscreen">
    <title>icon_wyqp</title>
    <g id="icon-webFullscreen_页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="icon-webFullscreen_iPhone-8" transform="translate(-78.000000, -61.000000)">
            <g id="icon-webFullscreen_icon_wyqp" transform="translate(78.000000, 61.000000)">
                <rect id="icon-webFullscreen_矩形备份-10" x="0" y="0" width="18" height="18" />
                <g transform="translate(1.000000, 1.000000)" fill="#FFFFFF">
                    <path d="M0,14.3998594 L0,1.59990625 C0,0.71621875 0.71640625,0 1.60007812,0 L14.4000312,0 C15.2837187,0 15.9999375,0.71621875 15.9999375,1.59990625 L15.9999375,14.3998906 C15.9999375,15.2835781 15.2837187,16 14.4000312,16 L1.60007812,16 C0.716421875,16 0,15.2835469 0,14.3998594 Z M13.967076,1.66 L2.03308428,1.66 C1.76927393,1.66 1.66,1.76925936 1.66,2.0328949 L1.66,13.9669157 C1.66,14.2307406 1.76927393,14.34 2.03308428,14.34 L14.34,14.34 L14.34,2.0328949 C14.34,1.76924479 14.2307552,1.66 13.967076,1.66 Z" id="icon-webFullscreen_形状" fill-rule="nonzero" />
                    <path d="M3.60000001,9 C4.08000001,9 4.40000001,9.32000001 4.40000001,9.80000001 L4.40000001,9.80000001 L4.40000001,11.6 L6.2,11.6 C6.68,11.6 7.00000001,11.92 7.00000001,12.4 C7.00000001,12.88 6.68,13.2 6.2,13.2 L6.2,13.2 L3.60000001,13.2 C3.52,13.2 3.36000001,13.2 3.28,13.12 C3.19999999,13.12 3.11999999,13.04 3.04,12.96 C2.96000001,12.88 2.88000001,12.8 2.88000001,12.72 C2.8,12.64 2.8,12.48 2.8,12.4 L2.8,9.80000001 C2.8,9.32000001 3.12000001,9 3.60000001,9 Z M12.4,9 C12.88,9 13.2,9.32000001 13.2,9.80000001 L13.2,12.4 C13.2,12.48 13.2,12.64 13.12,12.72 C13.12,12.8 13.04,12.88 12.96,12.96 C12.88,13.04 12.8,13.12 12.72,13.12 C12.64,13.2 12.48,13.2 12.4,13.2 L9.80000001,13.2 C9.32000001,13.2 9,12.88 9,12.4 C9,11.92 9.32000001,11.6 9.80000001,11.6 L11.6,11.6 L11.6,9.80000001 C11.6,9.32000001 11.92,9 12.4,9 Z M6.2,2.8 C6.68,2.8 7.00000001,3.12000001 7.00000001,3.60000001 C7.00000001,4.08000001 6.68,4.40000001 6.2,4.40000001 L4.40000001,4.40000001 L4.40000001,6.2 C4.40000001,6.68 4.08000001,7.00000001 3.60000001,7.00000001 C3.12000001,7.00000001 2.8,6.68 2.8,6.2 L2.8,3.60000001 C2.8,3.52 2.8,3.36000001 2.88000001,3.28 C2.88000001,3.19999999 2.96000001,3.12000001 3.04,3.04 C3.11999999,2.95999999 3.19999999,2.88000001 3.28,2.88000001 C3.344,2.816 3.4592,2.8032 3.54368,2.80064 L6.2,2.8 Z M12.45632,2.80064 C12.5408,2.8032 12.656,2.816 12.72,2.88000001 C12.8,2.88000001 12.88,2.95999999 12.96,3.04 C13.04,3.12000001 13.12,3.19999999 13.12,3.28 C13.2,3.36000001 13.2,3.52 13.2,3.60000001 L13.2,3.60000001 L13.2,6.2 C13.2,6.68 12.88,7.00000001 12.4,7.00000001 C11.92,7.00000001 11.6,6.68 11.6,6.2 L11.6,6.2 L11.6,4.40000001 L9.80000001,4.40000001 C9.32000001,4.40000001 9,4.08000001 9,3.60000001 C9,3.12000001 9.32000001,2.8 9.80000001,2.8 L9.80000001,2.8 Z" id="icon-webFullscreen_形状结合" />
                </g>
            </g>
        </g>
    </g>
</symbol>`});c.a.add(C),H.default=C},function(j,H,O){O.r(H),O.d(H,"JolPlayer",function(){return Be}),O(3),O(13);var F=O(0),R=O.n(F);function A(V,W){var J=Object.keys(V);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(V);W&&(X=X.filter(function(ne){return Object.getOwnPropertyDescriptor(V,ne).enumerable})),J.push.apply(J,X)}return J}function c(V){for(var W=1;W<arguments.length;W++){var J=arguments[W]!=null?arguments[W]:{};W%2?A(Object(J),!0).forEach(function(X){C(V,X,J[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(J)):A(Object(J)).forEach(function(X){Object.defineProperty(V,X,Object.getOwnPropertyDescriptor(J,X))})}return V}function C(V,W,J){return W in V?Object.defineProperty(V,W,{value:J,enumerable:!0,configurable:!0,writable:!0}):V[W]=J,V}const y=Object(F.memo)(function(V){let{iconClass:W,fill:J,fontSize:X="18px",className:ne,onClick:$,style:le}=V;const ie=Object(F.useMemo)(()=>"#icon-"+W,[W]);return R.a.createElement("svg",{fontSize:X,style:c(c({},v),{},{fontSize:X},le),"aria-hidden":"true",className:ne,onClick:$},R.a.createElement("use",{xlinkHref:ie,fill:J}))}),v={width:"1em",height:"1em",verticalAlign:"-0.15em",overflow:"hidden",fill:"currentColor",fontSize:"1.1em"};var k=y;O(34);function D(V,W){var J=Object.keys(V);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(V);W&&(X=X.filter(function(ne){return Object.getOwnPropertyDescriptor(V,ne).enumerable})),J.push.apply(J,X)}return J}function L(V){for(var W=1;W<arguments.length;W++){var J=arguments[W]!=null?arguments[W]:{};W%2?D(Object(J),!0).forEach(function(X){f(V,X,J[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(J)):D(Object(J)).forEach(function(X){Object.defineProperty(V,X,Object.getOwnPropertyDescriptor(J,X))})}return V}function f(V,W,J){return W in V?Object.defineProperty(V,W,{value:J,enumerable:!0,configurable:!0,writable:!0}):V[W]=J,V}const T={isControl:!1,progressSliderChangeVal:0,progressMouseUpChangeVal:0,quality:void 0},h={videoRef:null,videoContainerRef:null,lightOffMaskRef:null,videoFlow:T},p=R.a.createContext(h);var b=()=>{const[,V]=Object(F.useReducer)(W=>W+1,0);return V};const E=[{id:.5,name:"0.5x"},{id:.75,name:"0.75x"},{id:1,name:"1.0x"},{id:1.25,name:"1.25x"},{id:1.5,name:"1.5x"},{id:2,name:"2.0x"}],u=[{name:"标清",key:"360P",enName:"SD",id:1},{name:"高清",key:"540P",enName:"HD",id:2},{name:"超清",key:"720P",enName:"FHD",id:3},{name:"蓝光",key:"1080P",enName:"BD",id:4}];function e(V,W){var J=Object.keys(V);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(V);W&&(X=X.filter(function(ne){return Object.getOwnPropertyDescriptor(V,ne).enumerable})),J.push.apply(J,X)}return J}function n(V){for(var W=1;W<arguments.length;W++){var J=arguments[W]!=null?arguments[W]:{};W%2?e(Object(J),!0).forEach(function(X){t(V,X,J[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(J)):e(Object(J)).forEach(function(X){Object.defineProperty(V,X,Object.getOwnPropertyDescriptor(J,X))})}return V}function t(V,W,J){return W in V?Object.defineProperty(V,W,{value:J,enumerable:!0,configurable:!0,writable:!0}):V[W]=J,V}const s=function(V){let W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const{videoElement:J}=V,X=b(),ne=Object(F.useRef)({isPlay:!1,currentTime:0,duration:0,bufferedTime:0,isPictureinpicture:!1,volume:0,multiple:1,isEndEd:!1,error:null}),$=Object(F.useRef)(null),le=Object(F.useRef)(null);$.current=J,Object(F.useEffect)(()=>($.current&&(oe(60),$.current.addEventListener("canplay",()=>{ie({duration:$.current.duration})}),$.current.addEventListener("progress",()=>{$.current.buffered.length>=1&&ie({bufferedTime:$.current.buffered.end(0)})}),$.current.addEventListener("enterpictureinpicture",()=>{ie({isPictureinpicture:!0})}),$.current.addEventListener("leavepictureinpicture",()=>{ie({isPictureinpicture:!1})}),le.current=setInterval(()=>{X(),ie({currentTime:$.current.currentTime,isPlay:!$.current.paused,volume:$.current.volume,multiple:$.current.playbackRate,isEndEd:!!$.current.ended})},1),$.current.addEventListener("pause",be),$.current.addEventListener("play",ge),$.current.addEventListener("timeupdate",he),$.current.addEventListener("ended",Se),$.current.addEventListener("error",ce)),()=>{le.current&&clearInterval(le.current)}),W);const ie=De=>{ne.current=n(n({},ne.current),De)},be=()=>{ie({isPlay:!$.current.paused})},ge=()=>{ie({isPlay:!$.current.paused})},he=()=>{ie({isPlay:!$.current.paused})},Se=()=>{ie({isEndEd:!!$.current.ended})},ce=()=>{ie({error:Date.now()})},de=()=>{ne.current.isPlay?$.current.pause():$.current.play()},oe=De=>{$.current.volume=De<1?De:De/100},me=Object(F.useMemo)(()=>({load:()=>$.current.load(),play:()=>$.current.play(),pause:()=>$.current.pause(),setVolume:oe,seek:De=>{$.current.currentTime=De},setVideoSrc:De=>{$.current.src=De}}),[W]);return Object(F.useMemo)(()=>n(n({handleChangePlayState:de},ne.current),{},{videoAttributes:ne.current,videoMethod:me}),[ne.current])};function g(V,W){return V*W}function a(V){const W=Math.floor(V/60),J=Math.floor(V%60);return(W.toString().length>1?W.toString():"0"+W.toString())+":"+(J.toString().length>1?J.toString():"0"+J.toString())}const o=V=>V==null||V===!0;function d(V,W){var J=Object.keys(V);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(V);W&&(X=X.filter(function(ne){return Object.getOwnPropertyDescriptor(V,ne).enumerable})),J.push.apply(J,X)}return J}function r(V,W,J){return W in V?Object.defineProperty(V,W,{value:J,enumerable:!0,configurable:!0,writable:!0}):V[W]=J,V}var l=()=>{const[V,W]=Object(F.useState)({clientX:0,clientY:0});return Object(F.useEffect)(()=>{function J(X){W(ne=>({clientX:X.clientX,clientY:X.clientY}))}return window.addEventListener("mousemove",J),()=>window.removeEventListener("mousemove",J)},[]),function(J){for(var X=1;X<arguments.length;X++){var ne=arguments[X]!=null?arguments[X]:{};X%2?d(Object(ne),!0).forEach(function($){r(J,$,ne[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(ne)):d(Object(ne)).forEach(function($){Object.defineProperty(J,$,Object.getOwnPropertyDescriptor(ne,$))})}return J}({},V)};function i(V,W){var J=Object.keys(V);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(V);W&&(X=X.filter(function(ne){return Object.getOwnPropertyDescriptor(V,ne).enumerable})),J.push.apply(J,X)}return J}function m(V){for(var W=1;W<arguments.length;W++){var J=arguments[W]!=null?arguments[W]:{};W%2?i(Object(J),!0).forEach(function(X){S(V,X,J[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(J)):i(Object(J)).forEach(function(X){Object.defineProperty(V,X,Object.getOwnPropertyDescriptor(J,X))})}return V}function S(V,W,J){return W in V?Object.defineProperty(V,W,{value:J,enumerable:!0,configurable:!0,writable:!0}):V[W]=J,V}O(71);var w=Object(F.memo)(function(V){const W=Object(F.useRef)(null),J=Object(F.useRef)(null),X=Object(F.useRef)(null),ne=Object(F.useRef)(null),$=Object(F.useRef)(null),le=Object(F.useRef)(0),ie=Object(F.useContext)(p),{theme:be}=ie.propsAttributes,{currentTime:ge,duration:he,bufferedTime:Se}=s({videoElement:ie.videoRef},[ie.videoRef]),{progressState:ce,dispatch:de}=(()=>{const[Me,Oe]=Object(F.useReducer)((Ie,ke)=>{switch(ke.type){case"positionX":return m(m({},Ie),{},{positionX:ke.data});case"isMovingProgress":return m(m({},Ie),{},{isMovingProgress:ke.data});case"progressPercent":return m(m({},Ie),{},{progressPercent:ke.data});case"isDrag":return m(m({},Ie),{},{isDrag:ke.data});default:return Ie}},{positionX:0,isMovingProgress:!1,progressPercent:0,isDrag:!1});return{progressState:Me,dispatch:Oe}})(),{clientX:oe}=l();le.current=oe,Object(F.useEffect)(()=>{if(J.current&&X.current){const Me=J.current,Oe=X.current;ne.current=setInterval(()=>{ce.isMovingProgress?me({height:7,opacity:1,animationName:"example",progressBgRefEle:Me,progressScrubberRefEle:Oe}):me({height:3,opacity:0,animationName:"learve",progressBgRefEle:Me,progressScrubberRefEle:Oe})},100)}return()=>{ne.current&&clearInterval(ne.current)}},[ce.isMovingProgress]),Object(F.useEffect)(()=>(window.addEventListener("mouseup",_e),()=>{window.removeEventListener("mouseup",_e)}),[ge,he,ce.isDrag]);const me=Me=>{const{height:Oe,opacity:Ie,animationName:ke,progressBgRefEle:je,progressScrubberRefEle:ye}=Me;je.style.height="".concat(Oe,"px"),ye.style.opacity="".concat(Ie),ye.style.animation="".concat(ke," 0.5s")},De=Object(F.useMemo)(()=>(ge/he*100).toString(),[he,ge]),Ae=Object(F.useMemo)(()=>(Se/he*100).toString(),[Se,he]),_e=()=>{$.current&&clearInterval($.current),ge<he&&ce.isDrag&&(ie.videoRef.play(),de({type:"isDrag",data:!1})),de({type:"isMovingProgress",data:!1})};return R.a.createElement("div",{className:"JoL-progress-container",style:{opacity:ie.videoFlow.isControl?"1":"0"}},R.a.createElement("div",{className:"progress-bg",ref:J},R.a.createElement("div",{className:"progress-buffered",style:{width:"".concat(Ae,"%")}}),R.a.createElement("div",{className:"progress-played",style:{width:"".concat(De,"%"),background:"".concat(be||"#ffb821")}},R.a.createElement("i",{className:"progress-scrubber",style:{background:"".concat(be||"#ffb821")},ref:X})),R.a.createElement("div",{ref:W,className:"progress-seek-mask",onMouseDown:()=>{const Me=W.current.offsetWidth;$.current&&clearInterval($.current),$.current=setInterval(()=>{((Oe,Ie)=>{if(Oe>=0&&Oe<=Ie){const ke=Oe/Ie;de({type:"progressPercent",data:ke}),ie.videoRef.currentTime=g(ke,he),de({type:"positionX",data:Oe}),de({type:"isMovingProgress",data:!0}),de({type:"isDrag",data:!0})}Oe<0&&(ie.videoRef.currentTime=0),Oe>Ie&&(ie.videoRef.currentTime=he)})(le.current-W.current.getBoundingClientRect().left+1,Me),ie.dispatch({type:"progressSliderChangeVal",data:Date.now()})},1)},onMouseUp:()=>{_e(),ie.dispatch({type:"progressMouseUpChangeVal",data:Date.now()})},onMouseMove:Me=>{const Oe=Me.clientX-W.current.getBoundingClientRect().left+1;de({type:"progressPercent",data:Oe/W.current.offsetWidth}),de({type:"isMovingProgress",data:!0}),de({type:"positionX",data:Oe})},onMouseLeave:()=>{de({type:"isMovingProgress",data:!1})},onClick:()=>{ie.videoRef.currentTime=g(ce.progressPercent,he),de({type:"isMovingProgress",data:!0})}}),ce.isMovingProgress&&R.a.createElement(R.a.Fragment,null,R.a.createElement("div",{className:"pointer",style:{left:"".concat(ce.positionX,"px")}},R.a.createElement("div",{className:"top-triangle",style:{borderTop:"4px solid ".concat(be||"#ffb821")}}),R.a.createElement("div",{className:"bottom-triangle",style:{borderBottom:"4px solid ".concat(be||"#ffb821")}})),R.a.createElement("div",{className:"video-img-box",style:{left:"".concat(ce.positionX,"px")}},R.a.createElement("span",{className:"current-time"},function(Me,Oe){const Ie=Me*Oe,ke=Math.floor(Ie/60),je=Math.floor(Ie%60);return(ke.toString().length>1?ke.toString():"0"+ke.toString())+":"+(je.toString().length>1?je.toString():"0"+je.toString())}(ce.progressPercent,he))))))});O(73);var x=Object(F.memo)(function(V){let{title:W,icon:J,styleCss:X}=V;return R.a.createElement("div",{className:"tooltip",style:X},R.a.createElement(R.a.Fragment,null,J),R.a.createElement("div",{className:"title"},W))});function _(V,W){var J=Object.keys(V);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(V);W&&(X=X.filter(function(ne){return Object.getOwnPropertyDescriptor(V,ne).enumerable})),J.push.apply(J,X)}return J}function I(V){for(var W=1;W<arguments.length;W++){var J=arguments[W]!=null?arguments[W]:{};W%2?_(Object(J),!0).forEach(function(X){P(V,X,J[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(J)):_(Object(J)).forEach(function(X){Object.defineProperty(V,X,Object.getOwnPropertyDescriptor(J,X))})}return V}function P(V,W,J){return W in V?Object.defineProperty(V,W,{value:J,enumerable:!0,configurable:!0,writable:!0}):V[W]=J,V}var N=O(20),U=O.n(N);O(75);var M=function(V){let{sole:W,label:J,onChange:X,theme:ne}=V;const[$,le]=Object(F.useState)("no"),ie=Object(F.useRef)(null),be=ge=>{ge.stopPropagation();const he=ge.target.value==="yes"?"no":"yes";le(he),X&&X(he)};return Object(F.useEffect)(()=>{ie.current.style.setProperty("--JoL-theme",ne||"#ffb821")},[ne]),Object(F.useMemo)(()=>R.a.createElement("div",{className:"container"},R.a.createElement("label",{htmlFor:W,className:"label"},J),R.a.createElement("input",{ref:ie,className:"switch",type:"checkbox",id:W,onChange:be,value:$})),[W,J,$])};const B={multiple:"倍数",closeLights:"关灯",loop:"循环",screenshots:"截图",openPicture:"开启画中画",closePicture:"关闭画中画",Fullscreen:"网页全屏",closeFullscreen:"关闭网页全屏",fullScreen:"全屏",closefullScreen:"关闭全屏",replay:"重播",screenshotsSucessText:"鼠标右键图片另存为",screenshotsFailText:"截图加载失败，在点击下",playText:"暂停中",clarityHint:"清晰度已切换到",multipleHint:"播放倍数已切换到"},G={multiple:"multiple",closeLights:"lights",loop:"loops",screenshots:"screenshots",openPicture:"open Picture",closePicture:"close Picture",Fullscreen:"Full screen",closeFullscreen:"close Full screen",fullScreen:"full Screen",closefullScreen:"close full Screen",replay:"Replay",screenshotsSucessText:"Right mouse button to save the picture as",screenshotsFailText:"The screenshot failed to load, click",playText:"Paused",clarityHint:"Sharpness has been switched to",multipleHint:"The playback multiple has been switched to"},K=(V,W)=>V==="zh"?B[W]:G[W];O(16);var z=Object(F.memo)(function(V){let{switchChange:W,style:J}=V;const X=Object(F.useContext)(p),{theme:ne,language:$}=X.propsAttributes,[le,ie]=Object(F.useState)(!1);return R.a.createElement("div",{className:"JoL-multifunction-set",onMouseEnter:be=>[ie(!0),be.stopPropagation()],onMouseLeave:be=>[ie(!1)],style:J},R.a.createElement(k,{iconClass:"set",fill:"#fff",className:"hover-icon-rotateAnimate",fontSize:"20px"}),R.a.createElement("div",{className:"JoL-multifunction-set-container",style:{display:le?"block":"none"}},R.a.createElement("ul",{className:"JoL-multifunction-set-layer"},R.a.createElement("li",null,R.a.createElement(M,{sole:"lights",label:K($||"zh","closeLights"),onChange:be=>W(be,"lights"),theme:ne})),R.a.createElement("li",null,R.a.createElement(M,{sole:"loop",label:K($||"zh","loop"),theme:ne,onChange:be=>W(be,"loop")})))))}),Y=O(49);O(79);const q=function(V){let{message:W,duration:J,position:X}=V;const ne=()=>{document.querySelector("#jolPlayerToast")&&document.querySelector("#JoL-player-container").removeChild(document.querySelector("#jolPlayerToast"))};return Object(F.useEffect)(()=>{let $=null;return $&&clearTimeout($),$=setTimeout(()=>{ne()},J||2e3),()=>{$&&clearTimeout($)}},[]),R.a.createElement("div",{className:"jolPlayerToast ".concat(X||"leftTop")},W)};var Z=V=>{if(!document.querySelector("#jolPlayerToast")){const W=document.createElement("div");W.id="jolPlayerToast",document.querySelector("#JoL-player-container").appendChild(W),Object(Y.createRoot)(W).render(R.a.createElement(q,V))}},ee=Object(F.memo)(function(V){let{multipleText:W,selectPlayRate:J,multiple:X,style:ne}=V;const $=Object(F.useContext)(p),{theme:le,language:ie,isToast:be,toastPosition:ge}=$.propsAttributes,[he,Se]=Object(F.useState)(!1);return R.a.createElement("div",{className:"JoL-multifunction-multiple",onClick:ce=>Se(de=>!de),onMouseLeave:ce=>[Se(!1)],style:ne},R.a.createElement("p",null,W),R.a.createElement("div",{className:"JoL-multifunction-multiple-container",style:{display:he?"block":"none"}},R.a.createElement("ul",{className:"JoL-multifunction-multiple-layer"},E.map((ce,de)=>R.a.createElement("li",{onClick:oe=>[J(ce.id),Se(!1),oe.stopPropagation(),be&&Z({message:R.a.createElement("div",null,"".concat(K(ie||"zh","multipleHint")," ："),R.a.createElement("strong",{style:{color:"#FF455B"}},ce.name)),position:ge})],key:de,style:{color:X===ce.id?le||"#ffb821":"#fff"}},ce.name)))))});const te=function(V,W){let{volume:J,changeCurrentVolume:X,slideCurrentVolume:ne,clearVolumeInterval:$,isMuted:le,toggleVolume:ie,style:be}=V;const ge=Object(F.useRef)(null),he=Object(F.useContext)(p),{theme:Se}=he.propsAttributes,[ce,de]=Object(F.useState)(!1);return Object(F.useImperativeHandle)(W,()=>({element:ge.current})),R.a.createElement("div",{className:"JoL-multifunction-volume",onMouseEnter:oe=>[de(!0)],onMouseLeave:oe=>[de(!1)],onClick:oe=>{oe.stopPropagation(),ie()},style:be},R.a.createElement(k,{iconClass:le?"mute":"volume",fill:"#fff",fontSize:"20px"}),R.a.createElement("div",{className:"JoL-multifunction-volume-container",style:{display:ce?"block":"none"}},R.a.createElement("div",{className:"volume-box"},R.a.createElement("p",{className:"current-volume"},R.a.createElement("span",{className:"volume-value"},Math.floor(J))),R.a.createElement("div",{className:"volume-slider"},R.a.createElement("div",{className:"volume-slider-bg"},R.a.createElement("div",{ref:ge,className:"volume-slider-mirror",onClick:X,onMouseDown:ne,onMouseUp:$}),R.a.createElement("div",{className:"volume-slider-op",style:{height:"".concat(J,"%"),backgroundColor:"".concat(Se||"#ffb821")}},R.a.createElement("div",{className:"volume-slider-op-circle",style:{backgroundColor:"".concat(Se||"#ffb821")}})))))))};var ae=Object(F.forwardRef)(te),se=Object(F.memo)(function(V){let{isPlay:W,handleChangePlayState:J,currentTime:X,totalTime:ne}=V;return R.a.createElement("div",{className:"play-pause-timeline"},R.a.createElement(k,{iconClass:W?"pause":"player",fill:"#fff",fontSize:"20px",onClick:J,className:"icon"}),R.a.createElement("span",{className:"time-wrap"},R.a.createElement("span",{className:"current-time"},X),R.a.createElement("span",{className:"time-divider"}," / "),R.a.createElement("span",{className:"total-time"},ne)))});O(81);var pe=Object(F.memo)(function(V){let{style:W,videoSrc:J,qualityToggle:X}=V;const ne=Object(F.useContext)(p),{theme:$,quality:le,language:ie,isToast:be,toastPosition:ge}=ne.propsAttributes,[he,Se]=Object(F.useState)(!1),ce=Object(F.useMemo)(()=>le?le.map(oe=>u.map(me=>oe.name===me.enName&&Object.assign({},me,{url:oe.url})).filter(me=>me)[0]).sort((oe,me)=>(me&&me.id?me.id:1)-(oe&&oe.id?oe.id:1)):[],[le]),de=Object(F.useMemo)(()=>{let oe=[];return J&&ce&&(oe=ce.filter(me=>me.url===J)),oe.length?oe[0]:{key:"360P",enName:"SD",name:"标清",id:1}},[J,ce]);return R.a.createElement("div",{className:"JoL-multifunction-multiple",onClick:oe=>Se(me=>!me),onMouseLeave:oe=>[Se(!1)],style:W},R.a.createElement("p",null,de?ie&&ie==="en"?de.enName:de.name:null),R.a.createElement("div",{className:"JoL-multifunction-multiple-container",style:{display:he?"block":"none"}},ce&&ce.length?R.a.createElement("ul",{className:"JoL-multifunction-multiple-layer"},ce.map((oe,me)=>R.a.createElement("li",{key:me,onClick:()=>{return De=oe&&oe.url?oe.url:"",Ae=oe&&oe.key?oe.key:"360P",X(De,Ae),void(be&&Z({message:R.a.createElement("div",null,"".concat(K(ie||"zh","clarityHint")," ："),R.a.createElement("strong",{style:{color:"#FF455B"}},Ae)),position:ge}));var De,Ae},style:{color:de.key===(oe&&oe.key?oe.key:null)?$||"#ffb821":"#fff"}},R.a.createElement("p",null,oe&&oe.name?ie&&ie==="en"?oe.enName:oe.name:null),R.a.createElement("p",null,oe&&oe.key?oe.key:null)))):null))}),ve=Object(F.memo)(function(V){let{setIsscreenshot:W,setScreenshotLoading:J}=V;const X=Object(F.useRef)(null),ne=Object(F.useRef)(0),$=Object(F.useRef)(null),le=Object(F.useContext)(p),{propsAttributes:ie,dispatch:be}=le,ge=Object(F.useRef)(null),{isPlay:he,handleChangePlayState:Se,currentTime:ce,duration:de,isPictureinpicture:oe,volume:me,videoMethod:De}=s({videoElement:le.videoRef},[le.videoRef]),{controlsState:Ae,dispatch:_e}=(()=>{const ye={volume:60,isMuted:!1,isSlideVolume:!1,isScreentFull:!1,multiple:1,isWebPageFullScreen:!1,isMute:!1},[Le,Pe]=Object(F.useReducer)((Fe,Ge)=>{switch(Ge.type){case"volume":return I(I({},Fe),{},{volume:Ge.data});case"isMuted":return I(I({},Fe),{},{isMuted:Ge.data});case"isSlideVolume":return I(I({},Fe),{},{isSlideVolume:Ge.data});case"isScreentFull":return I(I({},Fe),{},{isScreentFull:Ge.data});case"multiple":return I(I({},Fe),{},{multiple:Ge.data});case"isWebPageFullScreen":return I(I({},Fe),{},{isWebPageFullScreen:Ge.data});case"isMute":return I(I({},Fe),{},{isMute:Ge.data});default:return Fe}},ye);return{controlsState:Le,dispatch:Pe}})(),{clientY:Me}=l();ne.current=Me,ge.current=le,Object(F.useEffect)(()=>{_e({type:"volume",data:Math.floor(100*me)}),_e({type:"isMuted",data:me===0})},[me]),Object(F.useEffect)(()=>(window.addEventListener("mouseup",Ie),()=>{window.removeEventListener("mouseup",Ie)}),[]),Object(F.useEffect)(()=>{ge.current&&ge.current.videoRef&&(ge.current.videoRef.muted=!!Ae.isMuted,_e({type:"volume",data:Ae.isMuted?0:Math.floor(100*me)}))},[Ae.isMuted]);const Oe=ye=>{const Le=le.videoRef;ye>=0&&ye<=1&&(Le.volume=ye,Le.muted=!1,_e({type:"volume",data:100*ye}),_e({type:"isMuted",data:Math.floor(100*ye)===0})),ye<0&&(Le.volume=0,Le.muted=!0,_e({type:"volume",data:0}),_e({type:"isMuted",data:!0})),ye>1&&(Le.volume=1,_e({type:"volume",data:100}))},Ie=()=>{$.current&&clearInterval($.current),_e({type:"isSlideVolume",data:!1})},ke=Object(F.useMemo)(()=>Ae.multiple===1?K(ie.language||"zh","multiple"):E.filter(ye=>ye.id===Ae.multiple)[0].name,[Ae.multiple]),je=Object(F.useMemo)(()=>Ae.isScreentFull||Ae.isWebPageFullScreen?"13px":"8px",[Ae.isWebPageFullScreen,Ae.isScreentFull]);return R.a.createElement("div",{className:"JoL-controls-container",style:{opacity:le.videoFlow.isControl?"1":"0"}},R.a.createElement(se,{isPlay:he,handleChangePlayState:Se,currentTime:a(ce),totalTime:a(de)}),R.a.createElement("div",{className:"JoL-multifunction"},ie.quality&&ie.quality.length?R.a.createElement(pe,{videoSrc:ge.current&&ge.current.videoRef?ge.current.videoRef.src:void 0,qualityToggle:(ye,Le)=>{be({type:"quality",data:Le}),De.setVideoSrc(ye),De.seek(ce),De.play()}}):null,o(ie.isShowMultiple)&&R.a.createElement(ee,{multipleText:ke,multiple:Ae.multiple,selectPlayRate:ye=>{le.videoRef.playbackRate=ye,_e({type:"multiple",data:ye})}}),R.a.createElement(ae,{style:{padding:"0 ".concat(je)},ref:X,volume:Ae.volume,changeCurrentVolume:ye=>{ye.stopPropagation();const Le=X.current.element,Pe=Le.offsetHeight,Fe=1-(ye.clientY-Le.getBoundingClientRect().top)/Pe;Oe(Fe)},slideCurrentVolume:ye=>{ye.stopPropagation();const Le=X.current.element,Pe=Le.offsetHeight;$.current&&clearInterval($.current),$.current=setInterval(()=>{const Fe=1-(ne.current-Le.getBoundingClientRect().top)/Pe;Oe(Fe),_e({type:"isSlideVolume",data:!0})},1)},clearVolumeInterval:ye=>{ye.stopPropagation(),Ie()},isMuted:Ae.isMuted,toggleVolume:()=>_e({type:"isMuted",data:!Ae.isMuted})}),o(ie.isShowSet)&&R.a.createElement(z,{switchChange:(ye,Le)=>{const{videoRef:Pe,lightOffMaskRef:Fe}=ge.current;if(Le==="lights")Fe&&(Fe.style.display=ye==="yes"?"block":"none");else{const Ge=Pe.loop;Pe.loop=!Ge}},style:{padding:"0 ".concat(je)}}),o(ie.isShowScreenshot)&&R.a.createElement(x,{styleCss:{padding:"0 ".concat(je)},title:K(ie.language||"zh","screenshots"),icon:R.a.createElement(k,{fontSize:"20px",iconClass:"screenshots",className:"hover-icon-animate",fill:"#fff",onClick:async()=>{const ye=document.querySelector("#JoL-screenshotCanvas"),Le=function(Pe){let Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.25;var Ge=Pe.videoWidth*Fe,ze=Pe.videoHeight*Fe,Je=document.createElement("canvas");Je.width=Ge,Je.height=ze;var qe=Je.getContext("2d");return qe.drawImage(Pe,0,0,Ge,ze),Je}(le.videoRef,.45);W(!0),ye?(J(!1),ye.innerHTML="",ye.appendChild(Le)):J(!0)}})}),o(ie.isShowPicture)&&R.a.createElement(x,{styleCss:{padding:"0 ".concat(je)},title:K(ie.language||"zh",oe?"closePicture":"openPicture"),icon:R.a.createElement(k,{iconClass:"inPicture",fill:"#fff",className:"hover-icon-animate",fontSize:"20px",onClick:()=>{oe?document.exitPictureInPicture():le.videoRef.requestPictureInPicture()}})}),o(ie.isShowWebFullScreen)&&R.a.createElement(x,{styleCss:{padding:"0 ".concat(je)},title:K(ie.language||"zh",Ae.isWebPageFullScreen?"closeFullscreen":"Fullscreen"),icon:R.a.createElement(k,{iconClass:Ae.isWebPageFullScreen?"closeWebFullscreen":"webFullscreen",fill:"#fff",className:"hover-icon-animate",fontSize:"20px",onClick:()=>{const ye=le.videoContainerRef;ye.classList.contains("clientFullScreen")?(ye.classList.remove("clientFullScreen"),_e({type:"isWebPageFullScreen",data:!1})):(ye.classList.add("clientFullScreen"),_e({type:"isWebPageFullScreen",data:!0}))}})}),R.a.createElement(x,{styleCss:{padding:"0 ".concat(je)},title:K(ie.language||"zh",Ae.isScreentFull?"closefullScreen":"fullScreen"),icon:R.a.createElement(k,{iconClass:Ae.isScreentFull?"closeFullScreen":"fullScreen",fill:"#fff",fontSize:"19px",onClick:()=>{U.a.isEnabled&&(U.a.toggle(le.videoContainerRef),U.a.on("change",()=>_e({type:"isScreentFull",data:U.a.isFullscreen})))},className:"hover-icon-animate"})})))});O(83);var we=Object(F.memo)(function(V){let{handle:W,language:J}=V;return R.a.createElement("div",{className:"end"},R.a.createElement("div",{className:"replay"},R.a.createElement("div",{className:"cicle",onClick:()=>{W()}},R.a.createElement(k,{iconClass:"replay",fill:"#fff",fontSize:"37px"})),R.a.createElement("p",null,K(J||"zh","replay"))))});O(85);var ue=Object(F.memo)(function(V){let{setIsscreenshot:W,screenshotLoading:J,theme:X,language:ne}=V;return R.a.createElement("div",{className:"screenshot"},R.a.createElement("div",{className:"close",onClick:()=>W(!1)},R.a.createElement(k,{iconClass:"close",fill:X||"#ffb821",className:"icon"})),R.a.createElement("div",{className:"img",id:"JoL-screenshotCanvas"},R.a.createElement(k,{iconClass:"loading",fill:X||"#ffb821",className:"player-loading",fontSize:"55px"})),R.a.createElement("p",{className:"save"},K(ne||"zh",J?"screenshotsFailText":"screenshotsSucessText")))});O(87);var Ee=Object(F.memo)(function(V){let{duration:W,currentTime:J}=V;const X=Object(F.useContext)(p),{theme:ne,progressFloatPosition:$}=X.propsAttributes,le=Object(F.useMemo)(()=>(J/W*100).toString(),[W,J]);return R.a.createElement("div",{className:"suspendedProgressBoard ".concat($||"bt")},R.a.createElement("div",{className:"progressPlayed ",style:{width:"".concat(le,"%"),background:"".concat(ne||"#ffb821")}}))});O(89);var Ce=Object(F.memo)(function(){const V=Object(F.useContext)(p),{dispatch:W,propsAttributes:J,videoFlow:X}=V,{isPlay:ne,handleChangePlayState:$,isEndEd:le,duration:ie,currentTime:be}=s({videoElement:V.videoRef},[V.videoRef]),ge=Object(F.useRef)(null),he=Object(F.useRef)(null),Se=Object(F.useRef)(!1),ce=Object(F.useRef)(null),de=Object(F.useRef)(!1),[oe,me]=Object(F.useState)(!1),[De,Ae]=Object(F.useState)(!1);Object(F.useEffect)(()=>{J.isToast&&!ne&&Z({message:K(J.language||"zh","playText"),position:J.toastPosition})},[ne]),Object(F.useEffect)(()=>(ge.current=setInterval(()=>{Se.current&&(Se.current=!1,W({type:"isControl",data:!0}),he.current.style.cursor="pointer",ce.current&&clearTimeout(ce.current),ce.current=setTimeout(()=>{Se.current||de.current||(W({type:"isControl",data:!1}),he.current.style.cursor="none")},J.hideMouseTime?J.hideMouseTime:2e3))},200),()=>{ge.current&&clearInterval(ge.current)}),[]);const _e=ke=>{W({type:"isControl",data:ke==="enter"&&!le})},Me=Object(F.useMemo)(()=>J.pausePlacement==="center"?{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}:{right:"30px",bottom:"60px"},[J.pausePlacement]),Oe=Object(F.useMemo)(()=>J.setPauseButtonContent?J.setPauseButtonContent:R.a.createElement(k,{iconClass:"player",fill:"#fff",fontSize:"55px",className:"play-icon",style:Me}),[Me,J.setPauseButtonContent]),Ie=ke=>{de.current=ke==="move"};return R.a.createElement("div",{className:"JoL-controller-container",onMouseEnter:ke=>[_e("enter")],onMouseLeave:ke=>[_e("leave")],ref:he},R.a.createElement("div",{id:"play-or-pause-mask",className:"JoL-click-to-play-or-pause",onMouseLeave:ke=>{Se.current=!1,he.current.style.cursor="pointer"},onMouseMove:ke=>{Se.current=!0,de.current=!1},onClick:()=>{$&&$()}}),o(J.isShowPauseButton)?!ne&&!le&&R.a.createElement(R.a.Fragment,null,Oe):null,R.a.createElement("div",{className:"JoL-progress-and-controls-wrap",onMouseMove:ke=>[Ie("move")],onMouseLeave:ke=>[Ie("leave")]},oe?R.a.createElement(ue,{setIsscreenshot:me,screenshotLoading:De,theme:J.theme,language:J.language}):null,R.a.createElement(w,null),R.a.createElement(ve,{setIsscreenshot:me,setScreenshotLoading:Ae})),le?J.setEndPlayContent?J.setEndPlayContent:R.a.createElement(we,{handle:()=>[$(),_e("enter")],language:J.language}):null,!X.isControl&&J.isProgressFloat?R.a.createElement(Ee,{duration:ie,currentTime:be}):null)}),Re=(V,W,J)=>{const{isPlay:X,currentTime:ne,isEndEd:$,error:le,volume:ie}=V,{progressSliderChangeVal:be,progressMouseUpChangeVal:ge,quality:he}=W,{onProgressMouseDown:Se,onPlay:ce,onPause:de,onTimeChange:oe,onEndEd:me,onProgressMouseUp:De,onError:Ae,onvolumechange:_e,onQualityChange:Me}=J;Object(F.useEffect)(()=>{W.progressSliderChangeVal&&Se&&Se(V)},[be]),Object(F.useEffect)(()=>{W.progressMouseUpChangeVal&&De&&De(V)},[ge]),Object(F.useEffect)(()=>{X?ce&&ce(V):de&&de(V)},[X]),Object(F.useEffect)(()=>{ne&&oe&&oe(V)},[ne]),Object(F.useEffect)(()=>{$&&me&&me(V)},[$]),Object(F.useEffect)(()=>{le&&Ae&&Ae()},[le]),Object(F.useEffect)(()=>{ie&&_e&&_e(V)},[ie]),Object(F.useEffect)(()=>{he&&Me&&Me(he)},[he])},Ne=O(35),Q=O.n(Ne);O(91),O(93);function re(V,W){var J=Object.keys(V);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(V);W&&(X=X.filter(function(ne){return Object.getOwnPropertyDescriptor(V,ne).enumerable})),J.push.apply(J,X)}return J}function fe(V){for(var W=1;W<arguments.length;W++){var J=arguments[W]!=null?arguments[W]:{};W%2?re(Object(J),!0).forEach(function(X){Te(V,X,J[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(J)):re(Object(J)).forEach(function(X){Object.defineProperty(V,X,Object.getOwnPropertyDescriptor(J,X))})}return V}function Te(V,W,J){return W in V?Object.defineProperty(V,W,{value:J,enumerable:!0,configurable:!0,writable:!0}):V[W]=J,V}const xe=function(V,W){const{option:J,className:X,style:ne,onProgressMouseDown:$,onPlay:le,onPause:ie,onTimeChange:be,onEndEd:ge,onProgressMouseUp:he,onError:Se,onvolumechange:ce,onQualityChange:de}=V,{videoSrc:oe,width:me,height:De,theme:Ae,poster:_e,setBufferContent:Me,videoType:Oe,toastPosition:Ie,autoPlay:ke,mode:je}=J,ye=Object(F.useRef)(null),Le=Object(F.useRef)(null),Pe=Object(F.useRef)(null),Fe=Object(F.useRef)(null),[Ge,ze]=Object(F.useState)(!1),Je=Object(F.useRef)(!1),{videoFlow:qe,dispatch:rt}=(()=>{const[Ke,Ve]=Object(F.useReducer)((He,We)=>{switch(We.type){case"isControl":return L(L({},He),{},{isControl:We.data});case"progressSliderChangeVal":return L(L({},He),{},{progressSliderChangeVal:We.data});case"progressMouseUpChangeVal":return L(L({},He),{},{progressMouseUpChangeVal:We.data});case"quality":return L(L({},He),{},{quality:We.data});default:return He}},T);return{videoFlow:Ke,dispatch:Ve}})(),nt=b(),Ze=()=>{ze(!0)},Qe=()=>{ze(!1)},it=Ke=>{const Ve=Ke.target,He=Ve.videoWidth,We=Ve.videoHeight;if(me&&De)Pe.current.style.width="".concat(me,"px"),Pe.current.style.height="".concat(De,"px");else if(je==="widthFix"&&me){const Ye=me*We/He;Pe.current.style.height="".concat(Ye,"px"),Pe.current.style.width="".concat(me,"px")}else if(je==="heightFix"&&De){const Ye=He*De/We;Pe.current.style.width="".concat(Ye,"px"),Pe.current.style.height="".concat(De,"px")}else Pe.current.style.width="".concat(me||He,"px"),Pe.current.style.height="".concat(De||We,"px")},{videoAttributes:$e,videoMethod:at}=s({videoElement:Le.current},[Le.current]);Re($e,qe,{onProgressMouseDown:$,onProgressMouseUp:he,onPlay:le,onPause:ie,onTimeChange:be,onEndEd:ge,onError:Se,onvolumechange:ce,onQualityChange:de}),Object(F.useEffect)(()=>{nt();const Ke=Le.current;return(Ve=>{if(Oe&&Oe==="hls"&&Q.a.isSupported()){var He=new Q.a;He.loadSource(oe),He.attachMedia(Ve)}})(Ke),J.autoPlay&&(Je.current=!0,Le.current.volume=0),Fe.current=setTimeout(()=>{Ke.networkState===0||Ke.networkState===3?Z({message:"Error：Video source not found",duration:4e3,position:Ie}):clearTimeout(Fe.current)},3e3),Ke.addEventListener("canplay",it),Ke.addEventListener("waiting",Ze),Ke.addEventListener("playing",Qe),()=>{Fe.current&&clearTimeout(Fe.current),Ke.removeEventListener("waiting",Ze),Ke.removeEventListener("playing",Qe)}},[J]),Object(F.useEffect)(()=>(ke&&document.addEventListener("mousemove",()=>et(ke)),()=>{ke&&document.removeEventListener("mousemove",()=>et)}),[ke]);const et=Object(F.useCallback)(Ke=>{if(Ke){if(!Je.current||!Le.current)return null;var Ve=Le.current.play();Ve!==void 0&&Ve.catch(He=>{Le.current.volume=.6,Je.current=!1}).then(()=>{Le.current.play(),Le.current.volume=.6,Je.current=!1})}},[]);Object(F.useImperativeHandle)(W,()=>fe(fe({video:Le.current},at),$e));const st=Object(F.useMemo)(()=>R.a.createElement(R.a.Fragment,null,R.a.createElement("source",{src:oe,type:"video/mp4"}),R.a.createElement("source",{src:oe,type:"video/ogg"}),R.a.createElement("source",{src:oe,type:"video/webm"})),[oe]),ot=Object(F.useMemo)(()=>Object.assign({},{videoRef:Le.current,videoContainerRef:Pe.current,lightOffMaskRef:ye.current,dispatch:rt,videoFlow:qe,propsAttributes:J}),[Le.current,qe,J]);return R.a.createElement("div",{className:"JoL-player-container ".concat(X),ref:Pe,style:ne,id:"JoL-player-container"},R.a.createElement("div",{className:"JoL-light-off-mask",ref:ye}),R.a.createElement("video",{autoPlay:ke,muted:Je.current,className:"JoL-player",ref:Le,src:oe,poster:_e||void 0,id:"JoL-player"},st),Ge&&(Me||R.a.createElement(k,{iconClass:"loading",fill:Ae||"#ffb821",className:"player-loading",fontSize:"55px"})),R.a.createElement(p.Provider,{value:ot},R.a.createElement(Ce,null)))};var Be=Object(F.forwardRef)(xe);(V=>V.keys().map(V))(O(95)),H.default=Be}]);const dt=lt(ct);function ht(){const j=Xe.useRef(null),H=k=>{console.log("onProgressMouseUp",k)},O=k=>{console.log("onEndEd",k)},F=k=>{console.log("onPause",k)},R=k=>{console.log("onProgressMouseDown",k)},A=k=>{console.log("onPlay",k)},c=k=>{console.log("onTimeChange",k)},C=k=>{console.log("onvolumechange",k)},y=()=>{console.log("onError")},v=k=>{console.log("onQualityChange",k)};return Xe.useEffect(()=>{console.log("videoRef.current",j.current)},[j.current]),tt.jsx("div",{className:"content",children:tt.jsx(dt,{ref:j,onProgressMouseUp:H,onEndEd:O,onPause:F,onProgressMouseDown:R,onPlay:A,onTimeChange:c,onvolumechange:C,onError:y,onQualityChange:v,option:{videoSrc:"https://gs-files.oss-cn-hongkong.aliyuncs.com/okr/prod/file/2021/08/31/540p.mp4",width:300,mode:"widthFix",theme:"#C91314",pausePlacement:"center",isToast:!0,isShowScreenshot:!1,isShowPicture:!1,isProgressFloat:!0}})})}export{ht as default};
